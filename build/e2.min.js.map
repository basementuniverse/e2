{"version":3,"file":"e2.min.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAY,GAAID,IAEhBD,EAAS,GAAIC,GACd,CATD,CASGK,KAAM,I,wCCPT,IAAIC,EAAU,EAAQ,KAGlBC,EAAkBD,EAAQC,gBAE1BC,EAAcF,EAAQE,YAEtBC,EAAY,CAEhBA,iBAA6B,CAE3B,IAAM,EACN,SAAW,EACX,aAAe,EACf,OAAS,EAET,iBAAmB,EACnB,MAAQ,EACR,MAAQ,EAER,SAAW,EACX,MAAQ,EACR,SAAW,IAMTC,EAAaD,EAAUC,WAAa,CAAC,EAgCzC,SAASC,EAAkBC,EAAUC,EAASC,EAAKC,EAAUC,GAC3D,IAAIC,EAAaJ,EAAQI,WACrBC,EAAWL,EAAQK,SACvBL,EAAQI,YAAa,EACrBJ,EAAQK,UAAW,EACnB,IAAIC,EAAMd,KAAKe,eAAeR,EAAUI,EAAQH,EAASC,GAOzD,OANAD,EAAQI,WAAaA,EACrBJ,EAAQK,SAAWA,GAEdC,EAAIE,OAASN,aAAoBO,UACpCP,EAASI,GAEJA,EAAIE,KACb,CA+IA,SAASE,EAAsBC,EAAQC,GAGrC,GAAGC,OAAOC,eAAeC,KAAKJ,EAAQC,GAAM,OAAOD,EAAOC,GAE1D,GAAKA,KAAOD,EACZ,KAAQA,EAASE,OAAOG,eAAeL,IACrC,GAAGE,OAAOI,qBAAqBF,KAAKJ,EAAQC,GAAM,OAAOD,EAAOC,EAEpE,CA+DA,SAASM,EAAwBnB,EAAUI,EAAQH,EAASC,EAAKkB,EAAUC,GACzE,GAAI5B,KAAK6B,MAAMV,OAAOZ,MAClBI,EAAOmB,iBAA8CC,IAAhCpB,EAAOmB,WAAWH,IAG3C,IAAoC,IAAhChB,EAAOqB,qBACTJ,EAAOK,SAAS,CACdC,KAAM,uBACNC,SAAUR,EACVS,QAAS,kDAAoDC,KAAKC,UAAUX,SAEzE,CACL,IAAIK,EAAuBrB,EAAOqB,sBAAwB,CAAC,EAEjB,mBAA/BxB,EAAQ+B,qBACjB/B,EAAQ+B,oBAAoBhC,EAAUoB,EAAUK,EAAsBxB,EAASC,GAGjF,IAAIK,EAAMd,KAAKe,eAAeR,EAASoB,GAAWK,EAAsBxB,EAASC,EAAI+B,UAAUR,EAAsBL,IAClHb,EAAIP,WAAaqB,EAAOrB,SAASoB,KAAWC,EAAOrB,SAASoB,GAAYb,EAAIP,UAC/EqB,EAAOa,aAAa3B,EACtB,CACF,CAhRAT,EAAWqC,KAAO,SAAuBnC,EAAUI,EAAQH,EAASC,GAElE,QAAiBsB,IAAbxB,EACF,OAAO,KAET,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDoB,EAAQc,MAAMC,QAAQjC,EAAO+B,MAAQ/B,EAAO+B,KAAO,CAAC/B,EAAO+B,MAC/D,IAAKb,EAAMgB,KAAK7C,KAAK8C,SAASC,KAAK/C,KAAMO,EAAUI,EAAQH,EAASC,IAAO,CACzE,IAAIuC,EAAOnB,EAAMoB,IAAI,SAAUC,GAC7B,GAAIA,EAAJ,CACA,IAAIC,EAAKD,EAAEE,KAAOF,EAAEC,GACpB,OAAOA,EAAM,IAAMA,EAAK,IAAQD,EAAE,EAFrB,CAGf,GACAtB,EAAOK,SAAS,CACdC,KAAM,OACNC,SAAUa,EACVZ,QAAS,uBAAyBY,GAEtC,CACA,OAAOpB,CACT,EAyBAvB,EAAWgD,MAAQ,SAAwB9C,EAAUI,EAAQH,EAASC,GAEpE,QAAiBsB,IAAbxB,EACF,OAAO,KAET,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxD6C,EAAQ,IAAIpD,EAAgBK,EAAUI,EAAQH,EAASC,GAC3D,IAAKkC,MAAMC,QAAQjC,EAAO0C,OACxB,MAAM,IAAIlD,EAAY,0BAExB,IAAKQ,EAAO0C,MAAMR,KAChBvC,EAAkByC,KAChB/C,KAAMO,EAAUC,EAASC,EAAK,SAASK,GAAKwC,EAAMb,aAAa3B,EAAK,IAClE,CACJ,IAAIkC,EAAOrC,EAAO0C,MAAMJ,IAAI,SAAUC,EAAGK,GACvC,IAAIJ,EAAKD,EAAEE,KAAOF,EAAEC,GACpB,OAAGA,EAAW,IAAMA,EAAK,IAClBD,EAAEM,OAASnB,KAAKC,UAAUY,EAAEM,QAAYN,EAAQ,MAAM,IAAMA,EAAQ,KAAI,KAAS,cAAcK,EAAE,GAC1G,GACI/C,EAAQiD,cACV7B,EAAOa,aAAaa,GAEtB1B,EAAOK,SAAS,CACdC,KAAM,QACNC,SAAUa,EACVZ,QAAS,iBAAmBY,EAAKU,KAAK,MAE1C,CACA,OAAO9B,CACT,EAUAvB,EAAWsD,MAAQ,SAAwBpD,EAAUI,EAAQH,EAASC,GAEpE,QAAiBsB,IAAbxB,EACF,OAAO,KAET,IAAKoC,MAAMC,QAAQjC,EAAOgD,OACxB,MAAM,IAAIxD,EAAY,0BAExB,IAAIyB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDmD,EAAO5D,KAcX,OAbAW,EAAOgD,MAAME,QAAQ,SAASX,EAAGK,GAC/B,IAAIvC,EAAQ4C,EAAK7C,eAAeR,EAAU2C,EAAG1C,EAASC,GACtD,IAAIO,EAAMA,MAAM,CACd,IACI8C,EADKZ,EAAEE,KAAOF,EAAEC,IACHD,EAAEM,OAASnB,KAAKC,UAAUY,EAAEM,QAAYN,EAAQ,MAAM,IAAMA,EAAQ,KAAI,KAAS,cAAcK,EAAE,IAClH3B,EAAOK,SAAS,CACdC,KAAM,QACNC,SAAU,CAAEgB,GAAIW,EAAKC,OAAQ/C,EAAMgD,OAAOD,OAAQ/C,MAAOA,GACzDoB,QAAS,+BAAiC0B,EAAM,SAAW9C,EAAMgD,OAAOD,OAAS,eAEnFnC,EAAOa,aAAazB,EACtB,CACF,GACOY,CACT,EAUAvB,EAAW4D,MAAQ,SAAwB1D,EAAUI,EAAQH,EAASC,GAEpE,QAAiBsB,IAAbxB,EACF,OAAO,KAET,IAAKoC,MAAMC,QAAQjC,EAAOsD,OACxB,MAAM,IAAI9D,EAAY,0BAExB,IAAIyB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxD6C,EAAQ,IAAIpD,EAAgBK,EAAUI,EAAQH,EAASC,GACvDyD,EAAQvD,EAAOsD,MAAME,OACvB7D,EAAkByC,KAChB/C,KAAMO,EAAUC,EAASC,EAAK,SAASK,GAAMwC,EAAMb,aAAa3B,EAAK,IACnEiD,OACFf,EAAOrC,EAAOsD,MAAMhB,IAAI,SAAUC,EAAGK,GAEvC,OADSL,EAAEE,KAAOF,EAAEC,IACND,EAAEM,OAASnB,KAAKC,UAAUY,EAAEM,QAAYN,EAAQ,MAAM,IAAMA,EAAQ,KAAI,KAAS,cAAcK,EAAE,GACjH,GAWA,OAVY,IAARW,IACE1D,EAAQiD,cACV7B,EAAOa,aAAaa,GAEtB1B,EAAOK,SAAS,CACdC,KAAM,QACNC,SAAUa,EACVZ,QAAS,2BAA6BY,EAAKU,KAAK,QAG7C9B,CACT,EAUAvB,EAAW+D,GAAK,SAAqB7D,EAAUI,EAAQH,EAASC,GAE9D,QAAiBsB,IAAbxB,EAAwB,OAAO,KACnC,IAAKN,EAAQoE,SAAS1D,EAAOyD,IAAK,MAAM,IAAIE,MAAM,wCAClD,IAEIxD,EAFAyD,EAAUjE,EAAkBiB,KAAKvB,KAAMO,EAAUC,EAASC,EAAK,KAAME,EAAOyD,IAC5ExC,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAE5D,GAAG8D,EAAQ,CACT,QAAoBxC,IAAhBpB,EAAO6D,KAAoB,OAC/B,IAAKvE,EAAQoE,SAAS1D,EAAO6D,MAAO,MAAM,IAAIF,MAAM,0CACpDxD,EAAMd,KAAKe,eAAeR,EAAUI,EAAO6D,KAAMhE,EAASC,EAAI+B,UAAU7B,EAAO6D,OAC/E5C,EAAOa,aAAa3B,EACtB,KAAK,CACH,QAAoBiB,IAAhBpB,EAAO8D,KAAoB,OAC/B,IAAKxE,EAAQoE,SAAS1D,EAAO8D,MAAO,MAAM,IAAIH,MAAM,0CACpDxD,EAAMd,KAAKe,eAAeR,EAAUI,EAAO8D,KAAMjE,EAASC,EAAI+B,UAAU7B,EAAO8D,OAC/E7C,EAAOa,aAAa3B,EACtB,CACA,OAAOc,CACT,EAqBAvB,EAAWqE,cAAgB,SAAgCnE,EAAUI,EAAQH,EAASC,GACpF,GAAIT,KAAK6B,MAAMV,OAAOZ,GAAtB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDkE,OAAmC5C,IAAvBpB,EAAO+D,cAA4B/D,EAAO+D,cAAgB,CAAC,EAC3E,IAAIzE,EAAQoE,SAASM,GAAY,MAAM,IAAIxE,EAAY,+DAEvD,IAAK,IAAIwB,KAAYpB,EACnB,QAAiDwB,IAA9Cb,EAAsBX,EAAUoB,GAAwB,CACzD,IAAIb,EAAMd,KAAKe,eAAeY,EAAUgD,EAAWnE,EAASC,EAAI+B,UAAUmC,IAC1E/C,EAAOa,aAAa3B,EACtB,CAGF,OAAOc,CAZgC,CAazC,EAUAvB,EAAWyB,WAAa,SAA6BvB,EAAUI,EAAQH,EAASC,GAC9E,GAAIT,KAAK6B,MAAMV,OAAOZ,GAAtB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDqB,EAAanB,EAAOmB,YAAc,CAAC,EACvC,IAAK,IAAIH,KAAYG,EAAY,CAC/B,IAAI6C,EAAY7C,EAAWH,GAC3B,QAAeI,IAAZ4C,EAAH,CAEM,GAAe,OAAZA,EACP,MAAM,IAAIxE,EAAY,oDAEkB,mBAA/BK,EAAQ+B,qBACjB/B,EAAQ+B,oBAAoBhC,EAAUoB,EAAUgD,EAAWnE,EAASC,GAEtE,IAAImE,EAAO1D,EAAsBX,EAAUoB,GACvCb,EAAMd,KAAKe,eAAe6D,EAAMD,EAAWnE,EAASC,EAAI+B,UAAUmC,EAAWhD,IAC9Eb,EAAIP,WAAaqB,EAAOrB,SAASoB,KAAWC,EAAOrB,SAASoB,GAAYb,EAAIP,UAC/EqB,EAAOa,aAAa3B,EAPpB,CAQF,CACA,OAAOc,CAlBgC,CAmBzC,EAyCAvB,EAAWwE,kBAAoB,SAAoCtE,EAAUI,EAAQH,EAASC,GAC5F,GAAIT,KAAK6B,MAAMV,OAAOZ,GAAtB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDoE,EAAoBlE,EAAOkE,mBAAqB,CAAC,EAErD,IAAK,IAAIlD,KAAYpB,EAAU,CAC7B,IAAIuE,GAAO,EACX,IAAK,IAAIC,KAAWF,EAAmB,CACrC,IAAIF,EAAYE,EAAkBE,GAClC,QAAehD,IAAZ4C,EAAH,CAEM,GAAe,OAAZA,EACP,MAAM,IAAIxE,EAAY,2DAExB,IACE,IAAI6E,EAAS,IAAIC,OAAOF,EAAS,IACnC,CAAE,MAAMG,GAGNF,EAAS,IAAIC,OAAOF,EACtB,CACA,GAAKC,EAAOF,KAAKnD,GAAjB,CAGAmD,GAAO,EAEmC,mBAA/BtE,EAAQ+B,qBACjB/B,EAAQ+B,oBAAoBhC,EAAUoB,EAAUgD,EAAWnE,EAASC,GAGtE,IAAIK,EAAMd,KAAKe,eAAeR,EAASoB,GAAWgD,EAAWnE,EAASC,EAAI+B,UAAUmC,EAAWhD,IAC5Fb,EAAIP,WAAaqB,EAAOrB,SAASoB,KAAWC,EAAOrB,SAASoB,GAAYb,EAAIP,UAC/EqB,EAAOa,aAAa3B,EATpB,CAVA,CAoBF,CACIgE,GACFpD,EAAuBH,KAAKvB,KAAMO,EAAUI,EAAQH,EAASC,EAAKkB,EAAUC,EAEhF,CAEA,OAAOA,CAtCgC,CAuCzC,EAUAvB,EAAW2B,qBAAuB,SAAuCzB,EAAUI,EAAQH,EAASC,GAClG,GAAIT,KAAK6B,MAAMV,OAAOZ,GAAtB,CAEA,GAAII,EAAOkE,kBACT,OAAO,KAET,IAAIjD,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAC5D,IAAK,IAAIkB,KAAYpB,EACnBmB,EAAuBH,KAAKvB,KAAMO,EAAUI,EAAQH,EAASC,EAAKkB,EAAUC,GAE9E,OAAOA,CATgC,CAUzC,EAQAvB,EAAW8E,cAAgB,SAAgC5E,EAAUI,EAAQH,EAASC,GACpF,GAAKT,KAAK6B,MAAMV,OAAOZ,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAS5D,OARWY,OAAO+D,KAAK7E,GACZwD,QAAUpD,EAAOwE,eAC1BvD,EAAOK,SAAS,CACdC,KAAM,gBACNC,SAAUxB,EAAOwE,cACjB/C,QAAS,4CAA8CzB,EAAOwE,gBAG3DvD,CAViC,CAW1C,EAQAvB,EAAWgF,cAAgB,SAAgC9E,EAAUI,EAAQH,EAASC,GACpF,GAAKT,KAAK6B,MAAMV,OAAOZ,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAS5D,OARWY,OAAO+D,KAAK7E,GACZwD,QAAUpD,EAAO0E,eAC1BzD,EAAOK,SAAS,CACdC,KAAM,gBACNC,SAAUxB,EAAO0E,cACjBjD,QAAS,4CAA8CzB,EAAO0E,gBAG3DzD,CAViC,CAW1C,EAUAvB,EAAWiF,MAAQ,SAAwB/E,EAAUI,EAAQH,EAASC,GACpE,IAAImD,EAAO5D,KACX,GAAKA,KAAK6B,MAAM0D,MAAMhF,SACHwB,IAAfpB,EAAO2E,MAAX,CACA,IAAI1D,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAsB5D,OArBAF,EAASiF,MAAM,SAAUC,EAAOlC,GAC9B,GAAGZ,MAAMC,QAAQjC,EAAO2E,OACtB,IAAIA,OAA2BvD,IAAlBpB,EAAO2E,MAAM/B,GAAiB5C,EAAO+E,gBAAkB/E,EAAO2E,MAAM/B,QAE7E+B,EAAQ3E,EAAO2E,MAErB,QAAcvD,IAAVuD,EACF,OAAO,EAET,IAAc,IAAVA,EAKF,OAJA1D,EAAOK,SAAS,CACdC,KAAM,QACNE,QAAS,mCAEJ,EAET,IAAItB,EAAM8C,EAAK7C,eAAe0E,EAAOH,EAAO9E,EAASC,EAAI+B,UAAU8C,EAAO/B,IAG1E,OAFGzC,EAAIP,WAAaqB,EAAOrB,SAASgD,KAAI3B,EAAOrB,SAASgD,GAAKzC,EAAIP,UACjEqB,EAAOa,aAAa3B,IACb,CACT,GACOc,CAvB6B,CAwBtC,EAUAvB,EAAWsF,SAAW,SAA2BpF,EAAUI,EAAQH,EAASC,GAC1E,IAAImD,EAAO5D,KACX,GAAKA,KAAK6B,MAAM0D,MAAMhF,SACAwB,IAAlBpB,EAAOgF,SAAX,CACA,IAAK1F,EAAQoE,SAAS1D,EAAOgF,UAAW,MAAM,IAAIrB,MAAM,8CACxD,IAAI1C,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAY5D,OAPW,IAJCF,EAASsC,KAAK,SAAU4C,EAAOlC,GAEzC,OAA2B,IADjBK,EAAK7C,eAAe0E,EAAO9E,EAAOgF,SAAUnF,EAASC,EAAI+B,UAAU7B,EAAOgF,SAAUpC,IACnFS,OAAOD,MACpB,IAEEnC,EAAOK,SAAS,CACdC,KAAM,WACNC,SAAUxB,EAAOgF,SACjBvD,QAAS,+CAGNR,CAdgC,CAezC,EAQAvB,EAAWuF,QAAU,SAA0BrF,EAAUI,EAAQH,EAASC,GACxE,GAAKT,KAAK6B,MAAMgE,OAAOtF,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAkB5D,OAjBIE,EAAOmF,mBAAgD,IAA5BnF,EAAOmF,iBAC/BvF,EAAWI,EAAOiF,SACrBhE,EAAOK,SAAS,CACdC,KAAM,UACNC,SAAUxB,EAAOiF,QACjBxD,QAAS,wBAA0BzB,EAAOiF,UAIzCrF,GAAYI,EAAOiF,SACtBhE,EAAOK,SAAS,CACdC,KAAM,UACNC,SAAUxB,EAAOiF,QACjBxD,QAAS,oCAAsCzB,EAAOiF,UAIrDhE,CAnBiC,CAoB1C,EAQAvB,EAAW0F,QAAU,SAA0BxF,EAAUI,EAAQH,EAASC,GACxE,GAAKT,KAAK6B,MAAMgE,OAAOtF,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAkB5D,OAjBIE,EAAOqF,mBAAgD,IAA5BrF,EAAOqF,iBAC/BzF,EAAWI,EAAOoF,SACrBnE,EAAOK,SAAS,CACdC,KAAM,UACNC,SAAUxB,EAAOoF,QACjB3D,QAAS,qBAAuBzB,EAAOoF,UAItCxF,GAAYI,EAAOoF,SACtBnE,EAAOK,SAAS,CACdC,KAAM,UACNC,SAAUxB,EAAOoF,QACjB3D,QAAS,iCAAmCzB,EAAOoF,UAIlDnE,CAnBiC,CAoB1C,EAQAvB,EAAWyF,iBAAmB,SAAmCvF,EAAUI,EAAQH,EAASC,GAE1F,GAAsC,kBAA5BE,EAAOmF,kBACZ9F,KAAK6B,MAAMgE,OAAOtF,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAS5D,OARYF,EAAWI,EAAOmF,kBAE5BlE,EAAOK,SAAS,CACdC,KAAM,mBACNC,SAAUxB,EAAOmF,iBACjB1D,QAAS,iCAAmCzB,EAAOmF,mBAGhDlE,CAViC,CAW1C,EAQAvB,EAAW2F,iBAAmB,SAAmCzF,EAAUI,EAAQH,EAASC,GAE1F,GAAsC,kBAA5BE,EAAOqF,kBACZhG,KAAK6B,MAAMgE,OAAOtF,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAS5D,OARYF,EAAWI,EAAOqF,kBAE5BpE,EAAOK,SAAS,CACdC,KAAM,mBACNC,SAAUxB,EAAOqF,iBACjB5D,QAAS,8BAAgCzB,EAAOqF,mBAG7CpE,CAViC,CAW1C,EAUA,IAAIqE,EAAiC,SAAyC1F,EAAUI,EAAQH,EAASC,EAAKyF,EAAgBC,GAC5H,GAAKnG,KAAK6B,MAAMgE,OAAOtF,GAAvB,CAEA,IAAI6F,EAAqBzF,EAAOuF,GAChC,GAA0B,GAAtBE,EACF,MAAM,IAAIjG,EAAY+F,EAAiB,mBAGzC,IAAItE,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAExD4F,EAAmBpG,EAAQqG,iBAAiB/F,GAC5CgG,EAAkBtG,EAAQqG,iBAAiBF,GAE3CI,EAAcC,KAAKC,IAAIL,EAAmBE,GAC1CI,EAAaF,KAAKG,IAAI,GAAIJ,GAU9B,OARIC,KAAKI,MAAMtG,EAAWoG,GAAcF,KAAKI,MAAMT,EAAqBO,KAAgB,GACtF/E,EAAOK,SAAS,CACdC,KAAMgE,EACN/D,SAAWiE,EACXhE,QAAS+D,EAAe9D,KAAKC,UAAU8D,KAIpCxE,CAvBiC,CAwB1C,EAwMA,SAASkF,EAAY5D,EAAGK,EAAGwD,GACzB,IAAIC,EAAGC,EAAMF,EAAEhD,OACf,IAAKiD,EAAIzD,EAAI,EAAQyD,EAAIC,EAAKD,IAC5B,GAAI/G,EAAQiH,kBAAkBhE,EAAG6D,EAAEC,IACjC,OAAO,EAGX,OAAO,CACT,CAxMA3G,EAAW8G,WAAa,SAA6B5G,EAAUI,EAAQH,EAASC,GAC9E,OAAOwF,EAA+B1E,KAAKvB,KAAMO,EAAUI,EAAQH,EAASC,EAAK,aAAc,uCACjG,EAQAJ,EAAW+G,YAAc,SAA8B7G,EAAUI,EAAQH,EAASC,GAChF,OAAOwF,EAA+B1E,KAAKvB,KAAMO,EAAUI,EAAQH,EAASC,EAAK,cAAe,qCAClG,EAQAJ,EAAWgH,SAAW,SAA2B9G,EAAUI,EAAQH,EAASC,GAC1E,IAAImB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAkB5D,YAjBiBsB,IAAbxB,IAA8C,IAApBI,EAAO0G,SAEnCzF,EAAOK,SAAS,CACdC,KAAM,WACNE,QAAS,gBAEFpC,KAAK6B,MAAMV,OAAOZ,IAAaoC,MAAMC,QAAQjC,EAAO0G,WAC7D1G,EAAO0G,SAASxD,QAAQ,SAASyD,QACSvF,IAArCb,EAAsBX,EAAU+G,IACjC1F,EAAOK,SAAS,CACdC,KAAM,WACNC,SAAUmF,EACVlF,QAAS,qBAAuBC,KAAKC,UAAUgF,IAGrD,GAEK1F,CACT,EAQAvB,EAAW0E,QAAU,SAA0BxE,EAAUI,EAAQH,EAASC,GACxE,GAAKT,KAAK6B,MAAM0F,OAAOhH,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDsE,EAAUpE,EAAOoE,QACrB,IACE,IAAIC,EAAS,IAAIC,OAAOF,EAAS,IACnC,CAAE,MAAMG,GAGNF,EAAS,IAAIC,OAAOF,EACtB,CAQA,OAPKxE,EAASiH,MAAMxC,IAClBpD,EAAOK,SAAS,CACdC,KAAM,UACNC,SAAUxB,EAAOoE,QACjB3C,QAAS,0BAA4BC,KAAKC,UAAU3B,EAAOoE,QAAQ0C,cAGhE7F,CAjBiC,CAkB1C,EAuBAvB,EAAWqH,OAAS,SAAyBnH,EAAUI,EAAQH,EAASC,GACtE,QAAesB,IAAXxB,EAAJ,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAQ5D,OAPKmB,EAAO+F,eAAkB1H,EAAQ2H,SAASrH,EAAUI,EAAO+G,OAAQ1H,OACtE4B,EAAOK,SAAS,CACdC,KAAM,SACNC,SAAUxB,EAAO+G,OACjBtF,QAAS,2BAA6BC,KAAKC,UAAU3B,EAAO+G,QAAU,YAGnE9F,CATyB,CAUlC,EAQAvB,EAAWwH,UAAY,SAA4BtH,EAAUI,EAAQH,EAASC,GAC5E,GAAKT,KAAK6B,MAAM0F,OAAOhH,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDqH,EAAMvH,EAASiH,MAAM,oBASzB,OARajH,EAASwD,QAAU+D,EAAMA,EAAI/D,OAAS,IACnCpD,EAAOkH,WACrBjG,EAAOK,SAAS,CACdC,KAAM,YACNC,SAAUxB,EAAOkH,UACjBzF,QAAS,mCAAqCzB,EAAOkH,YAGlDjG,CAXiC,CAY1C,EAQAvB,EAAW0H,UAAY,SAA4BxH,EAAUI,EAAQH,EAASC,GAC5E,GAAKT,KAAK6B,MAAM0F,OAAOhH,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAExDqH,EAAMvH,EAASiH,MAAM,oBASzB,OARajH,EAASwD,QAAU+D,EAAMA,EAAI/D,OAAS,IACnCpD,EAAOoH,WACrBnG,EAAOK,SAAS,CACdC,KAAM,YACNC,SAAUxB,EAAOoH,UACjB3F,QAAS,mCAAqCzB,EAAOoH,YAGlDnG,CAZiC,CAa1C,EAQAvB,EAAW2H,SAAW,SAA2BzH,EAAUI,EAAQH,EAASC,GAC1E,GAAKT,KAAK6B,MAAM0D,MAAMhF,GAAtB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAQ5D,OAPMF,EAASwD,QAAUpD,EAAOqH,UAC9BpG,EAAOK,SAAS,CACdC,KAAM,WACNC,SAAUxB,EAAOqH,SACjB5F,QAAS,mCAAqCzB,EAAOqH,WAGlDpG,CATgC,CAUzC,EAQAvB,EAAW4H,SAAW,SAA2B1H,EAAUI,EAAQH,EAASC,GAC1E,GAAKT,KAAK6B,MAAM0D,MAAMhF,GAAtB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAQ5D,OAPMF,EAASwD,QAAUpD,EAAOsH,UAC9BrG,EAAOK,SAAS,CACdC,KAAM,WACNC,SAAUxB,EAAOsH,SACjB7F,QAAS,mCAAqCzB,EAAOsH,WAGlDrG,CATgC,CAUzC,EAyBAvB,EAAW6H,YAAc,SAA8B3H,EAAUI,EAAQH,EAASC,GAChF,IAAyB,IAArBE,EAAOuH,aACNlI,KAAK6B,MAAM0D,MAAMhF,GAAtB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAO5D,OANKF,EAASiF,MAAMsB,IAClBlF,EAAOK,SAAS,CACdC,KAAM,cACNE,QAAS,4BAGNR,CARgC,CASzC,EAUAvB,EAAW8H,aAAe,SAA+B5H,EAAUI,EAAQH,EAASC,GAClF,GAAKT,KAAK6B,MAAMV,OAAOZ,GAAvB,CACA,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAC5D,IAAK,IAAIkB,KAAYhB,EAAOwH,aAC1B,QAA2BpG,IAAvBxB,EAASoB,GAAb,CAGA,IAAIyG,EAAMzH,EAAOwH,aAAaxG,GAC1B0G,EAAe5H,EAAI+B,UAAU4F,EAAKzG,GAItC,GAHkB,iBAAPyG,IACTA,EAAM,CAACA,IAELzF,MAAMC,QAAQwF,GAChBA,EAAIvE,QAAQ,SAAUe,QACG7C,IAAnBxB,EAASqE,IACXhD,EAAOK,SAAS,CAGdC,KAAM,eACNC,SAAUkG,EAAaC,aACvBlG,QAAS,YAAcwC,EAAO,2BAA6ByD,EAAaC,cAG9E,OACK,CACL,IAAIxH,EAAMd,KAAKe,eAAeR,EAAU6H,EAAK5H,EAAS6H,GACnDzG,EAAOrB,WAAaO,EAAIP,WAAUqB,EAAOrB,SAAWO,EAAIP,UACvDO,GAAOA,EAAIkD,OAAOD,SACpBnC,EAAOK,SAAS,CACdC,KAAM,eACNC,SAAUkG,EAAaC,aACvBlG,QAAS,wCAA0CiG,EAAaC,eAElE1G,EAAOa,aAAa3B,GAExB,CA7BA,CA+BF,OAAOc,CApCiC,CAqC1C,EASAvB,EAAiB,KAAI,SAAuBE,EAAUI,EAAQH,EAASC,GACrE,QAAiBsB,IAAbxB,EACF,OAAO,KAET,IAAKoC,MAAMC,QAAQjC,EAAa,MAC9B,MAAM,IAAIR,EAAY,wBAAyBQ,GAEjD,IAAIiB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAQ5D,OAPKE,EAAa,KAAEkC,KAAK5C,EAAQiH,kBAAkBnE,KAAK,KAAMxC,KAC5DqB,EAAOK,SAAS,CACdC,KAAM,OACNC,SAAUxB,EAAa,KACvByB,QAAS,8BAAgCzB,EAAa,KAAEsC,IAAIsF,QAAQ7E,KAAK,OAGtE9B,CACT,EASAvB,EAAkB,MAAI,SAAuBE,EAAUI,EAAQH,EAASC,GACtE,QAAiBsB,IAAbxB,EACF,OAAO,KAET,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAQ5D,OAPKR,EAAQiH,kBAAkBvG,EAAc,MAAGJ,IAC9CqB,EAAOK,SAAS,CACdC,KAAM,QACNC,SAAUxB,EAAc,MACxByB,QAAS,6CAA+CzB,EAAc,QAGnEiB,CACT,EAUAvB,EAAWmI,IAAMnI,EAAWoI,SAAW,SAAsBlI,EAAUI,EAAQH,EAASC,GACtF,IAAImD,EAAO5D,KACX,QAAc+B,IAAXxB,EAAsB,OAAO,KAChC,IAAIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GACxDiI,EAAW/H,EAAO6H,KAAO7H,EAAO8H,SACpC,OAAIC,GACA/F,MAAMC,QAAQ8F,KAAWA,EAAS,CAACA,IACvCA,EAAS7E,QAAQ,SAAUnB,GACzB,GAAIkB,EAAKd,SAASvC,EAAUI,EAAQH,EAASC,EAAKiC,GAAO,CACvD,IACIiG,EADKjG,IAASA,EAAKU,KAAOV,EAAKS,KACdT,EACrBd,EAAOK,SAAS,CACdC,KAAM,MACNC,SAAUwG,EACVvG,QAAS,yBAA2BuG,GAExC,CACF,GACO/G,GAbc,IAcvB,EAEA/B,EAAOD,QAAUQ,C,gBC/8BDP,EAAOD,QAAQgJ,UAAY,EAA3B,KAEhB,uBACA,4BACA,uBACA,mBACA,OACA,Q,gBCPA,IAAIxI,EAAY,EAAQ,KACpBH,EAAU,EAAQ,KAClB4I,EAAa,SACb3I,EAAkBD,EAAQC,gBAC1B4I,EAAuB7I,EAAQ6I,qBAC/B3I,EAAcF,EAAQE,YACtB4I,EAAgB9I,EAAQ8I,cASxBH,EAAY,SAASA,IAGvB5I,KAAKgJ,cAAgB3H,OAAO4H,OAAOL,EAAUM,UAAUF,eACvDhJ,KAAKmJ,QAAU,CAAC,EAChBnJ,KAAKoJ,eAAiB,GAGtBpJ,KAAK6B,MAAQR,OAAO4H,OAAOpH,GAC3B7B,KAAKqJ,WAAahI,OAAO4H,OAAO7I,EAAUC,WAC5C,EAsHA,SAASiJ,EAAc3I,GACrB,IAAI4I,EAAyB,iBAAX5I,EAAuBA,EAASA,EAAO6I,KACzD,MAAgB,iBAALD,GAAsBA,CAEnC,CAvHAX,EAAUM,UAAUF,cAAgB,CAAC,EAGrCJ,EAAUM,UAAUC,QAAU,KAC9BP,EAAUM,UAAUrH,MAAQ,KAC5B+G,EAAUM,UAAUG,WAAa,KACjCT,EAAUM,UAAUE,eAAiB,KAQrCR,EAAUM,UAAUO,UAAY,SAAoB9I,EAAQ+I,GAC1D,IAAI9F,EAAO5D,KACX,IAAKW,EACH,OAAO,KAET,IAAIgJ,EAAOd,EAAWa,GAvCJ,IAuCyB/I,GACvCiJ,EAASF,GAAQ/I,EAAOyC,KAAOzC,EAAOwC,GAC1C,IAAI,IAAI0G,KAAOF,EAAKxG,GAClBnD,KAAKmJ,QAAQU,GAAOF,EAAKxG,GAAG0G,GAE9B,IAAI,IAAIA,KAAOF,EAAKJ,IAElBvJ,KAAKoJ,eAAeU,KAAKD,GAM3B,OAHA7J,KAAKoJ,eAAiBpJ,KAAKoJ,eAAejF,OAAO,SAAS0F,GACxD,YAAkC,IAApBjG,EAAKuF,QAAQU,EAC7B,GACO7J,KAAKmJ,QAAQS,EACtB,EAEAhB,EAAUM,UAAUa,kBAAoB,SAA2BC,EAASb,GAC1E,GAAIxG,MAAMC,QAAQuG,GAClB,IAAI,IAAI5F,EAAE,EAAGA,EAAE4F,EAAQpF,OAAQR,IAC7BvD,KAAKiK,aAAaD,EAASb,EAAQ5F,GAEvC,EAEAqF,EAAUM,UAAUgB,mBAAqB,SAA2BF,EAASb,GAC3E,GAAIA,GAA2B,iBAATA,EACtB,IAAI,IAAIgB,KAAKhB,EACXnJ,KAAKiK,aAAaD,EAASb,EAAQgB,GAEvC,EAQAvB,EAAUM,UAAUkB,WAAa,SAAqBjB,GACpDnJ,KAAKmJ,QAAUA,CACjB,EAMAP,EAAUM,UAAUmB,UAAY,SAAoBC,GAClD,OAAOtK,KAAKmJ,QAAQmB,EACtB,EAUA1B,EAAUM,UAAUqB,SAAW,SAAmBhK,EAAUI,EAAQH,EAASC,GAC3E,GAAsB,kBAAXE,GAA0C,iBAAXA,GAAmC,OAAXA,EAChE,MAAM,IAAIR,EAAY,gDAEnBK,IACHA,EAAU,CAAC,GAIb,IAAI2C,EAAKxC,EAAOyC,KAAOzC,EAAOwC,GAC9B,IAAIuG,EAAOzJ,EAAQuK,WAAWhK,EAAQkJ,KAAKvG,GAAI,IAC/C,IAAI1C,EAAI,EACNA,EAAM,IAAIsI,EAAcpI,EAAQH,EAAS,GAAIkJ,EAAMrI,OAAO4H,OAAOjJ,KAAKmJ,WAC7DA,QAAQO,KACfjJ,EAAI0I,QAAQO,GAAQ/I,GAEtB,IAAI8J,EAAQ5B,EAAWa,EAAM/I,GAC7B,IAAI,IAAI2G,KAAKmD,EAAMtH,GAAG,CACpB,IAAIuH,EAAMD,EAAMtH,GAAGmE,GACnB7G,EAAI0I,QAAQ7B,GAAKoD,CACnB,CACF,CAEE,IAIE9I,EALJ,GAAGpB,EAAQ6G,eAAuBtF,IAAXxB,EAGrB,OAFIqB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,IACrDwB,SAAS,iCACTL,EAGT,KADIA,EAAS5B,KAAKe,eAAeR,EAAUI,EAAQH,EAASC,IAE1D,MAAM,IAAI6D,MAAM,oBACZ,GAAG9D,EAAQK,UAAYe,EAAOoC,OAAOD,OACzC,MAAM,IAAI+E,EAAqBlH,GAEjC,OAAOA,CACT,EAqBAgH,EAAUM,UAAUnI,eAAiB,SAAyBR,EAAUI,EAAQH,EAASC,GACvF,IAAImB,EAAS,IAAI1B,EAAgBK,EAAUI,EAAQH,EAASC,GAG5D,GAAmB,kBAATE,GACI,IAATA,EAEDA,EAAS,CAAC,GACM,IAATA,IAEPA,EAAS,CAAC+B,KAAM,UAEd,IAAI/B,EAER,MAAM,IAAI2D,MAAM,uBAGlB,GAAI3D,EAAgB,QAClB,GAAIgC,MAAMC,QAAQjC,EAAgB,SAAI,CACpC,IAAIgK,EAAY,CAAChK,OAAQA,EAAQF,IAAKA,GACtCE,EAAgB,QAAEkD,QAAQ7D,KAAK4K,gBAAgB7H,KAAK/C,KAAM2K,IAC1DhK,EAASgK,EAAUhK,OACnBgK,EAAUhK,OAAS,KACnBgK,EAAUlK,IAAM,KAChBkK,EAAY,IACd,MACEhK,EAASV,EAAQ4K,UAAUlK,EAAQX,KAAK8K,aAAanK,EAAgB,QAAGF,IAK5E,IAAIsK,EAAezB,EAAc3I,GACjC,GAAIoK,EAAc,CAChB,IAAIC,EAAWhL,KAAKiL,QAAQtK,EAAQoK,EAActK,GAC9CyK,EAAS,IAAInC,EAAciC,EAASrG,UAAWnE,EAASC,EAAI0K,KAAMH,EAASD,aAActK,EAAI0I,SACjG,OAAOnJ,KAAKe,eAAeR,EAAUyK,EAASrG,UAAWnE,EAAS0K,EACpE,CAEA,IAAIE,EAAiB5K,GAAWA,EAAQ4K,gBAAkB,GAE1D,IAAK,IAAIhK,KAAOT,EACd,IAAKP,EAAUiL,iBAAiBjK,IAAQgK,EAAeE,QAAQlK,GAAO,EAAG,CACvE,IAAImK,EAAe,KACfC,EAAYxL,KAAKqJ,WAAWjI,GAChC,GAAIoK,EACFD,EAAeC,EAAUjK,KAAKvB,KAAMO,EAAUI,EAAQH,EAASC,QAC1D,IAAuC,IAAnCD,EAAQiL,uBAEjB,MAAM,IAAItL,EAAY,0BAA4BiB,EAAKT,GAErD4K,GACF3J,EAAOa,aAAa8I,EAExB,CAGF,GAA8B,mBAAnB/K,EAAQkL,QAAuB,CACxC,IAAIjG,EAAQjF,EAAQkL,QAAQnK,KAAKvB,KAAMO,EAAUI,EAAQH,EAASC,GAClEmB,EAAOrB,SAAWkF,CACpB,CACA,OAAO7D,CACT,EAQAgH,EAAUM,UAAU0B,gBAAkB,SAA0BD,EAAWgB,GACzEhB,EAAUhK,OAASV,EAAQ4K,UAAUF,EAAUhK,OAAQX,KAAK8K,aAAaa,EAAGhB,EAAUlK,KACxF,EAQAmI,EAAUM,UAAU4B,aAAe,SAAuBnK,EAAQF,GAChE,IAAI8I,EAAMD,EAAc3I,GACxB,OAAG4I,EACMvJ,KAAKiL,QAAQtK,EAAQ4I,EAAK9I,GAAKkE,UAEjChE,CACT,EAUAiI,EAAUM,UAAU+B,QAAU,SAAkBtK,EAAQoK,EAActK,GAGpE,GAFAsK,EAAetK,EAAIwK,QAAQF,GAEvBtK,EAAI0I,QAAQ4B,GACd,MAAO,CAACpG,UAAWlE,EAAI0I,QAAQ4B,GAAeA,aAAcA,GAG9D,IACIa,EADS,IAAIC,IAAId,EAAa,kBACZe,KACtB,IAAIC,EAAWH,GAAYA,EAAS7H,QAAUgH,EAAaiB,OAAO,EAAGjB,EAAahH,OAAS6H,EAAS7H,QACpG,IAAKgI,IAAatL,EAAI0I,QAAQ4C,GAC5B,MAAM,IAAI5L,EAAY,mBAAqB4K,EAAe,IAAKpK,GAEjE,IAAIgE,EAAY1E,EAAQgM,cAAcxL,EAAI0I,QAAQ4C,GAAWH,EAASI,OAAO,IAC7E,QAAejK,IAAZ4C,EACD,MAAM,IAAIxE,EAAY,kBAAoByL,EAAW,gBAAkBG,EAAW,IAAKpL,GAEzF,MAAO,CAACgE,UAAWA,EAAWoG,aAAcA,EAC9C,EAYAnC,EAAUM,UAAUpG,SAAW,SAAuBvC,EAAUI,EAAQH,EAASC,EAAKiC,GACpF,QAAUX,IAAPW,EAAH,CAEM,GAAU,OAAPA,EACP,MAAM,IAAIvC,EAAY,qCAExB,GAA+B,mBAApBH,KAAK6B,MAAMa,GACpB,OAAO1C,KAAK6B,MAAMa,GAAMnB,KAAKvB,KAAMO,GAErC,GAAImC,GAAuB,iBAARA,EAAkB,CACnC,IAAI5B,EAAMd,KAAKe,eAAeR,EAAUmC,EAAMlC,EAASC,GACvD,YAAesB,IAARjB,KAAuBA,GAAOA,EAAIkD,OAAOD,OAClD,CAEA,OAAO,CATP,CAUF,EAEA,IAAIlC,EAAQ+G,EAAUM,UAAUrH,MAAQ,CAAC,EACzCA,EAAM0F,OAAS,SAAqBhH,GAClC,MAA0B,iBAAZA,CAChB,EACAsB,EAAMgE,OAAS,SAAqBtF,GAElC,MAA0B,iBAAZA,GAAwB2L,SAAS3L,EACjD,EACAsB,EAAMsK,QAAU,SAAsB5L,GACpC,MAA2B,iBAAZA,GAAyBA,EAAW,GAAM,CAC3D,EACAsB,EAAMuK,QAAU,SAAsB7L,GACpC,MAA0B,kBAAZA,CAChB,EACAsB,EAAM0D,MAAQ,SAAoBhF,GAChC,OAAOoC,MAAMC,QAAQrC,EACvB,EACAsB,EAAY,KAAI,SAAmBtB,GACjC,OAAoB,OAAbA,CACT,EACAsB,EAAMwK,KAAO,SAAmB9L,GAC9B,OAAOA,aAAoB+L,IAC7B,EACAzK,EAAM0K,IAAM,SAAkBhM,GAC5B,OAAO,CACT,EACAsB,EAAMV,OAAS,SAAqBZ,GAElC,OAAOA,GAAiC,iBAAbA,IAA4BoC,MAAMC,QAAQrC,MAAgBA,aAAoB+L,KAC3G,EAEAzM,EAAOD,QAAUgJ,C,cC3UjB,IAAI4D,EAAkB5M,EAAQ4M,gBAAkB,SAA0BpK,EAAS7B,EAAUI,EAAQwK,EAAMjJ,EAAMC,GAY/G,GAXGQ,MAAMC,QAAQuI,IACfnL,KAAKmL,KAAOA,EACZnL,KAAK2B,SAAWwJ,EAAKsB,OAAO,SAASC,EAAKC,GACxC,OAAOD,EAAME,EAAWD,EAC1B,EAAG,kBACa5K,IAAToJ,IACPnL,KAAK2B,SAAWwJ,GAEd/I,IACFpC,KAAKoC,QAAUA,GAEbzB,EAAQ,CACV,IAAIwC,EAAKxC,EAAOyC,KAAOzC,EAAOwC,GAC9BnD,KAAKW,OAASwC,GAAMxC,CACtB,MACiBoB,IAAbxB,IACFP,KAAKO,SAAWA,GAElBP,KAAKkC,KAAOA,EACZlC,KAAKmC,SAAWA,EAChBnC,KAAK6M,MAAQ7M,KAAKyH,UACpB,EAEA+E,EAAgBtD,UAAUzB,SAAW,WACnC,OAAOzH,KAAK2B,SAAW,IAAM3B,KAAKoC,OACpC,EAEA,IAAIlC,EAAkBN,EAAQM,gBAAkB,SAAyBK,EAAUI,EAAQH,EAASC,GAClGT,KAAKO,SAAWA,EAChBP,KAAKW,OAASA,EACdX,KAAKQ,QAAUA,EACfR,KAAKmL,KAAO1K,EAAI0K,KAChBnL,KAAKsI,aAAe7H,EAAI6H,aACxBtI,KAAKgE,OAAS,GACdhE,KAAKY,WAAaJ,GAAWA,EAAQI,WACrCZ,KAAK8M,WAAatM,GAAWA,EAAQsM,WACrC9M,KAAKa,SAAWL,GAAWA,EAAQK,SACnCb,KAAK2H,cAAgBnH,IAAqC,IAA1BA,EAAQmH,aAC1C,EA8BA,SAASoF,EAAY7J,EAAEK,GACrB,OAAOA,EAAE,KAAKL,EAAEuE,WAAW,IAC7B,CAUA,SAASqB,EAAqBlH,GACU,mBAA5B0C,MAAM0I,mBACd1I,MAAM0I,kBAAkBhN,KAAM8I,GAEhC9I,KAAKO,SAAWqB,EAAOrB,SACvBP,KAAKW,OAASiB,EAAOjB,OACrBX,KAAKQ,QAAUoB,EAAOpB,QACtBR,KAAKgE,OAASpC,EAAOoC,MACvB,CAhDA9D,EAAgBgJ,UAAUjH,SAAW,SAAkBgL,GACrD,IAAIC,EACJ,GAAqB,iBAAVD,EACTC,EAAM,IAAIV,EAAgBS,EAAQjN,KAAKO,SAAUP,KAAKW,OAAQX,KAAKmL,UAC9D,CACL,IAAK8B,EAAQ,MAAM,IAAI3I,MAAM,wBAC7B,IAAK2I,EAAO7K,QAAS,MAAM,IAAIkC,MAAM,yBACrC,IAAK2I,EAAO/K,KAAM,MAAM,IAAIoC,MAAM,0BAClC4I,EAAM,IAAIV,EAAgBS,EAAO7K,QAASpC,KAAKO,SAAUP,KAAKW,OAAQX,KAAKmL,KAAM8B,EAAO/K,KAAM+K,EAAO9K,SACvG,CAGA,GADAnC,KAAKgE,OAAO8F,KAAKoD,GACblN,KAAK8M,WACP,MAAM,IAAIhE,EAAqB9I,MAC3B,GAAGA,KAAKY,WACZ,MAAMsM,EAER,OAAOA,CACT,EAEAhN,EAAgBgJ,UAAUzG,aAAe,SAAsB3B,GAC3C,iBAAPA,GAAoBA,GAAOA,EAAIqM,cACxCnN,KAAKiC,SAASnB,GACLA,GAAOA,EAAIkD,SACpBhE,KAAKgE,OAAShE,KAAKgE,OAAOoJ,OAAOtM,EAAIkD,QAEzC,EAKA9D,EAAgBgJ,UAAUzB,SAAW,SAAkB3G,GACrD,OAAOd,KAAKgE,OAAOf,IAAI8J,GAAYrJ,KAAK,GAC1C,EAEArC,OAAOgM,eAAenN,EAAgBgJ,UAAW,QAAS,CAAEoE,IAAK,WAC/D,OAAQtN,KAAKgE,OAAOD,MACtB,IAEAlE,EAAOD,QAAQkJ,qBAAuBA,EAUtCA,EAAqBI,UAAY,IAAI5E,MACrCwE,EAAqBI,UAAUqE,YAAczE,EAC7CA,EAAqBI,UAAUhH,KAAO,mBAOtC,IAAI/B,EAAcP,EAAQO,YAAc,SAASA,EAAa2D,EAAKnD,GACjEX,KAAKoC,QAAU0B,EACf9D,KAAKW,OAASA,EACd2D,MAAM/C,KAAKvB,KAAM8D,GACqB,mBAA5BQ,MAAM0I,mBACd1I,MAAM0I,kBAAkBhN,KAAMG,EAElC,EACAA,EAAY+I,UAAY7H,OAAO4H,OAAO3E,MAAM4E,UAC1C,CACEqE,YAAa,CAAC9H,MAAOtF,EAAaqN,YAAY,GAC9CtL,KAAM,CAACuD,MAAO,cAAe+H,YAAY,KAG7C,IAAIzE,EAAgBnJ,EAAQmJ,cAAgB,SAAwBpI,EAAQH,EAAS2K,EAAMzB,EAAMP,GAC/FnJ,KAAKW,OAASA,EACdX,KAAKQ,QAAUA,EACZmC,MAAMC,QAAQuI,IACfnL,KAAKmL,KAAOA,EACZnL,KAAKsI,aAAe6C,EAAKsB,OAAO,SAASC,EAAKC,GAC5C,OAAOD,EAAME,EAAWD,EAC1B,EAAG,aAEH3M,KAAKsI,aAAe6C,EAEtBnL,KAAK0J,KAAOA,EACZ1J,KAAKmJ,QAAUA,CACjB,EAEAJ,EAAcG,UAAU+B,QAAU,SAAkBwC,GAClD,MAAO,KAAOjD,EAAWxK,KAAK0J,KAAK+D,GAA5B,EACT,EAEA1E,EAAcG,UAAU1G,UAAY,SAAmB7B,EAAQ+M,GAC7D,IAAIvC,OAAuBpJ,IAAf2L,EAA4B1N,KAAKmL,KAAOnL,KAAKmL,KAAKiC,OAAO,CAACM,IAClEvK,EAAKxC,EAAOyC,KAAOzC,EAAOwC,GAC9B,IAAIuG,EAAO,KAAOc,EAAWxK,KAAK0J,KAAKvG,GAAI,IAAhC,GACX,IAAI1C,EAAM,IAAIsI,EAAcpI,EAAQX,KAAKQ,QAAS2K,EAAMzB,EAAMrI,OAAO4H,OAAOjJ,KAAKmJ,UAIjF,OAHGhG,IAAO1C,EAAI0I,QAAQO,KACpBjJ,EAAI0I,QAAQO,GAAQ/I,GAEfF,CACT,EAEA,IAAIkN,EAAiB/N,EAAQ+N,eAAiB,CAE5C,YAAa,8JACb,KAAQ,2DACR,KAAQ,oDACR,SAAY,+GAIZ,MAAS,ySACT,YAAa,8NAKb,aAAc,8FAEd,KAAQ,0jCAKR,IAAO,mCACP,gBAAiB,qxCACjB,IAAO,mCACP,gBAAiB,mhDACjB,KAAQ,kEAGR,eAAgB,oNAGhB,eAAgB,2CAChB,wBAAyB,kDAGzB,SAAY,gIACZ,YAAa,gIAEb,eAAgB,SAAUC,GACxB,MAAyB,iBAAVA,GAAuBC,WAAWD,KAAWE,SAASF,EAAO,MAAQG,MAAMH,EAC5F,EAGA,MAAS,SAAUA,GACjB,IAAIhM,GAAS,EACb,IACE,IAAIqD,OAAO2I,EACb,CAAE,MAAOI,GACPpM,GAAS,CACX,CACA,OAAOA,CACT,EAIA,MAAS,+DAET,MAAS,6YACT,MAAS,6BACT,MAAS,cACT,aAAgB,kBAGlB+L,EAAe3I,OAAS2I,EAAeM,MACvCN,EAAe5I,QAAU4I,EAAeM,MACxCN,EAAeO,KAAOP,EAAe,cAErC/N,EAAQgI,SAAW,SAAmBgG,EAAOlG,EAAQ8D,GACnD,GAAqB,iBAAVoC,QAAiD7L,IAA3B4L,EAAejG,GAAuB,CACrE,GAAIiG,EAAejG,aAAmBzC,OACpC,OAAO0I,EAAejG,GAAQ5C,KAAK8I,GAErC,GAAsC,mBAA3BD,EAAejG,GACxB,OAAOiG,EAAejG,GAAQkG,EAElC,MAAO,GAAIpC,GAAaA,EAAUxC,eACa,mBAApCwC,EAAUxC,cAActB,GACjC,OAAO8D,EAAUxC,cAActB,GAAQkG,GAEzC,OAAO,CACT,EAEA,IAAIhB,EAAahN,EAAQgN,WAAa,SAAqBxL,GAKzD,OAJAA,EAAMA,EAAIqG,YAIDD,MAAM,cAAiBpG,EAAIoG,MAAM,SAGtCpG,EAAIoG,MAAM,SACL,IAAMpG,EAAM,IAEd,IAAMiB,KAAKC,UAAUlB,GAAO,IAL1B,IAAMA,CAMjB,EAiCA,SAAS+M,EAAYV,EAAQW,EAAKJ,EAAGzK,GAClB,iBAANyK,EACTI,EAAI7K,GAAKsH,EAAU4C,EAAOlK,GAAIyK,IAEH,IAAvBP,EAAOnC,QAAQ0C,IACjBI,EAAItE,KAAKkE,EAGf,CAEA,SAASK,EAASC,EAAKF,EAAKhN,GAC1BgN,EAAIhN,GAAOkN,EAAIlN,EACjB,CAEA,SAASmN,EAAsBd,EAAQa,EAAKF,EAAKhN,GACvB,iBAAbkN,EAAIlN,IAAsBkN,EAAIlN,IAIlCqM,EAAOrM,GAGVgN,EAAIhN,GAAOyJ,EAAU4C,EAAOrM,GAAMkN,EAAIlN,IANxCgN,EAAIhN,GAAOkN,EAAIlN,EASnB,CAEA,SAASyJ,EAAW4C,EAAQa,GAC1B,IAAI/I,EAAQ5C,MAAMC,QAAQ0L,GACtBF,EAAM7I,GAAS,IAAM,CAAC,EAa1B,OAXIA,GACFkI,EAASA,GAAU,GACnBW,EAAMA,EAAIhB,OAAOK,GACjBa,EAAIzK,QAAQsK,EAAWpL,KAAK,KAAM0K,EAAQW,MAEtCX,GAA4B,iBAAXA,GACnBpM,OAAO+D,KAAKqI,GAAQ5J,QAAQwK,EAAQtL,KAAK,KAAM0K,EAAQW,IAEzD/M,OAAO+D,KAAKkJ,GAAKzK,QAAQ0K,EAAqBxL,KAAK,KAAM0K,EAAQa,EAAKF,KAGjEA,CACT,CAsBA,SAASI,EAAatL,GACpB,MAAO,IAAIuL,mBAAmBvL,GAAGwL,QAAQ,KAAK,MAChD,CAlGA9O,EAAQsH,kBAAoB,SAASA,EAAmBH,EAAG4H,GACzD,UAAW5H,UAAa4H,EACtB,OAAO,EAET,GAAIhM,MAAMC,QAAQmE,GAChB,QAAKpE,MAAMC,QAAQ+L,IAGf5H,EAAEhD,SAAW4K,EAAE5K,QAGZgD,EAAEvB,MAAM,SAAUtC,EAAGK,GAC1B,OAAO2D,EAAkBH,EAAExD,GAAIoL,EAAEpL,GACnC,GAEF,GAAiB,iBAANwD,EAAgB,CACzB,IAAKA,IAAM4H,EACT,OAAO5H,IAAM4H,EAEf,IAAIC,EAAQvN,OAAO+D,KAAK2B,GACpB8H,EAAQxN,OAAO+D,KAAKuJ,GACxB,OAAIC,EAAM7K,SAAW8K,EAAM9K,QAGpB6K,EAAMpJ,MAAM,SAAUtC,GAC3B,OAAOgE,EAAkBH,EAAE7D,GAAIyL,EAAEzL,GACnC,EACF,CACA,OAAO6D,IAAM4H,CACf,EA+CA9O,EAAOD,QAAQiL,UAAYA,EAS3BjL,EAAQqM,cAAgB,SAAuB6C,EAAGnD,GAGhD,IAFA,IACIoD,EADAC,EAAQrD,EAAEsD,MAAM,KAAKC,MAAM,GAEI,iBAApBH,EAAEC,EAAMG,UAAsB,CAC3C,IAAI7H,EAAI8H,mBAAmBL,EAAEL,QAAQ,KAAK,KAAKA,QAAQ,MAAM,MAC7D,KAAMpH,KAAKwH,GAAI,OACfA,EAAIA,EAAExH,EACR,CACA,OAAOwH,CACT,EAUAlP,EAAQyP,WAAa,SAAuBtI,GAG1C,OAAOA,EAAE9D,IAAIuL,GAAa9K,KAAK,GACjC,EAUA9D,EAAQ0G,iBAAmB,SAA0BT,GAEnD,IAAIyJ,EAAgB,EACpB,GAAIvB,MAAMlI,GAAS,OAAOyJ,EAEJ,iBAAXzJ,IACTA,EAAS0J,OAAO1J,IAGlB,IAAImJ,EAAQnJ,EAAO4B,WAAWwH,MAAM,KACpC,GAAqB,IAAjBD,EAAMjL,OAAc,CACtB,GAAoB,MAAhBiL,EAAM,GAAG,GACX,OAAOM,EAEPA,EAAgBC,OAAOP,EAAM,GAAGE,MAAM,GAE1C,CAEA,IAAIM,EAAeR,EAAM,GAAGC,MAAM,KAKlC,OAJ4B,IAAxBO,EAAazL,SACfuL,GAAiBE,EAAa,GAAGzL,QAG5BuL,CACT,EAEA1P,EAAQyE,SAAW,SAAkBoL,GACnC,MAAuB,iBAARA,GAAoBA,GAAwB,kBAARA,CACrD,EAUA,IAAIjF,EAAa5K,EAAQ4K,WAAa,SAAoBkF,EAAMC,GAC9D,MAAMC,EAAc,IAAI/D,IAAI8D,EAAI,IAAI9D,IAAI6D,EAAM,eAC9C,GAA6B,aAAzBE,EAAYC,SAAyB,CACvC,MAAM,SAAEC,EAAQ,OAAEC,EAAM,KAAEjE,GAAS8D,EACnC,OAAOE,EAAWC,EAASjE,CAC7B,CACA,OAAO8D,EAAYnI,UACrB,C,oBCnZIxH,EAAU,EAAQ,KAGtB,SAAS+P,EAAiBvF,EAAOlB,GAC/BvJ,KAAKmD,GAAKsH,EACVzK,KAAKuJ,IAAMA,CACb,CAQA1J,EAAOD,QAAQ,EAAO,SAAc8J,EAAM/I,GACxC,SAASkI,EAAWmB,EAASrJ,GAC3B,IAAIA,GAAyB,iBAARA,EAAkB,OAEvC,GAAGA,EAAO6I,KAAK,CACb,IAAIyG,EAAchQ,EAAQuK,WAAWR,EAAQrJ,EAAO6I,MAEpD,YADAD,EAAI0G,GAAe1G,EAAI0G,GAAe1G,EAAI0G,GAAa,EAAI,EAE7D,CACA,IAAI9M,EAAKxC,EAAOyC,KAAOzC,EAAOwC,GAC9B,IAAI+M,EAAejQ,EAAQuK,WAAWR,EAAQ7G,GAC9C,IAAIgN,EAAUhN,EAAK+M,EAAelG,EAClC,GAAImG,EAAS,CAGX,GADGA,EAAQ7E,QAAQ,KAAK,IAAG6E,GAAW,KACnC1F,EAAM0F,GAAS,CAChB,IAAIlQ,EAAQiH,kBAAkBuD,EAAM0F,GAAUxP,GAC5C,MAAM,IAAI2D,MAAM,WAAW6L,EAAQ,8CAErC,OAAO1F,EAAM0F,EACf,CACA1F,EAAM0F,GAAWxP,EAEa,KAA3BwP,EAAQA,EAAQpM,OAAO,KACxB0G,EAAM0F,EAAQC,UAAU,EAAGD,EAAQpM,OAAO,IAAMpD,EAEpD,CACA0P,EAAUF,EAAQ,SAAWxN,MAAMC,QAAQjC,EAAO2E,OAAO3E,EAAO2E,MAAM,CAAC3E,EAAO2E,QAC9E+K,EAAUF,EAAQ,WAAaxN,MAAMC,QAAQjC,EAAO2P,SAAS3P,EAAO2P,QAAQ,CAAC3P,EAAO2P,UACpFzH,EAAWsH,EAAQ,mBAAoBxP,EAAO+E,iBAC9C6K,EAAWJ,EAAQ,cAAexP,EAAOmB,YACzC+G,EAAWsH,EAAQ,wBAAyBxP,EAAOqB,sBACnDuO,EAAWJ,EAAQ,eAAgBxP,EAAO6P,aAC1CD,EAAWJ,EAAQ,qBAAsBxP,EAAOkE,mBAChD0L,EAAWJ,EAAQ,gBAAiBxP,EAAOwH,cAC3CkI,EAAUF,EAAQ,YAAaxP,EAAO8H,UACtC4H,EAAUF,EAAQ,SAAUxP,EAAOgD,OACnC0M,EAAUF,EAAQ,SAAUxP,EAAO0C,OACnCgN,EAAUF,EAAQ,SAAUxP,EAAOsD,OACnC4E,EAAWsH,EAAQ,OAAQxP,EAAO6H,IACpC,CACA,SAAS6H,EAAUrG,EAASb,GAC1B,GAAIxG,MAAMC,QAAQuG,GAClB,IAAI,IAAI5F,EAAE,EAAGA,EAAE4F,EAAQpF,OAAQR,IAC7BsF,EAAWmB,EAAQ,IAAIzG,EAAG4F,EAAQ5F,GAEtC,CACA,SAASgN,EAAWvG,EAASb,GAC3B,GAAIA,GAA2B,iBAATA,EACtB,IAAI,IAAIgB,KAAKhB,EACXN,EAAWmB,EAAQ,IAAIG,EAAGhB,EAAQgB,GAEtC,CAEA,IAAIM,EAAQ,CAAC,EACTlB,EAAM,CAAC,EAEX,OADAV,EAAWa,EAAM/I,GACV,IAAIqP,EAAiBvF,EAAOlB,EACrC,C,GCzEIkH,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB5O,IAAjB6O,EACH,OAAOA,EAAahR,QAGrB,IAAIC,EAAS4Q,EAAyBE,GAAY,CAGjD/Q,QAAS,CAAC,GAOX,OAHAiR,EAAoBF,GAAU9Q,EAAQA,EAAOD,QAAS8Q,GAG/C7Q,EAAOD,OACf,CCrBA8Q,EAAoBI,EAAI,CAAClR,EAASmR,KACjC,IAAI,IAAI3P,KAAO2P,EACXL,EAAoB5B,EAAEiC,EAAY3P,KAASsP,EAAoB5B,EAAElP,EAASwB,IAC5EC,OAAOgM,eAAezN,EAASwB,EAAK,CAAEoM,YAAY,EAAMF,IAAKyD,EAAW3P,MCJ3EsP,EAAoB5B,EAAI,CAACkC,EAAKpM,IAAUvD,OAAO6H,UAAU5H,eAAeC,KAAKyP,EAAKpM,GCClF8L,EAAoBO,EAAKrR,IACH,oBAAXsR,QAA0BA,OAAOC,aAC1C9P,OAAOgM,eAAezN,EAASsR,OAAOC,YAAa,CAAE1L,MAAO,WAE7DpE,OAAOgM,eAAezN,EAAS,aAAc,CAAE6F,OAAO,K,SCEhD,SAAS2L,EAAWC,EAAS,WAClC,MAAO,GAAGA,KAAU5K,KAAK6K,SAAS7J,SAAS,IAAI2I,UAAU,EAAG,IAC9D,CAKO,SAASmB,EACdC,EACAC,EACAxE,EACAzM,EAA2B,CAAC,GAE5B,MAAMkR,EAAQ,IAAIC,YAAYF,EAAW,CACvCxE,SACA2E,SAAS,EACTC,YAAY,KACTrR,IAGL,OAAOgR,EAAQM,cAAcJ,EAC/B,CAKO,SAASK,EAAaC,EAAa7O,GACxC,GAAIA,GAAM4I,SAASkG,eAAe9O,GAChC,OAGF,MAAM+O,EAAQnG,SAASoG,cAAc,SACjChP,IACF+O,EAAM/O,GAAKA,GAEb+O,EAAME,YAAcJ,EACpBjG,SAASsG,KAAKC,YAAYJ,EAC5B,CAKO,SAASK,EAAeC,GAC7B,MAAMC,EAAW1G,SAASoG,cAAc,YAExC,OADAM,EAASC,UAAYF,EAAKG,OACnBF,CACT,CAKO,SAASG,EACdpB,EACAhR,EAA0B,CAAEqS,KAAM,SAElC,OAAOrB,EAAQsB,YAActB,EAAQuB,aAAavS,EACpD,CAKO,SAASwS,EACdC,EACAC,GAEA,IAAIC,EAEJ,OAAO,YAA6BC,GAMlCC,aAAaF,GACbA,EAAUG,OAAOC,WANH,KACZF,aAAaF,GACbF,KAAQG,IAIyBF,EACrC,CACF,CAKO,SAASM,EAAiBhC,GAC/B,MAAMiC,EAAOjC,EAAQkC,wBACrB,OACED,EAAKE,KAAO,GACZF,EAAKG,MAAQ,GACbH,EAAKI,SACFP,OAAOQ,aAAe/H,SAASgI,gBAAgBC,eAClDP,EAAKQ,QAAUX,OAAOY,YAAcnI,SAASgI,gBAAgBI,YAEjE,CAKO,SAASC,EAAc5C,GAC5B,IAAI6C,EAAU7C,EAAQ8C,cACtB,KAAOD,GAAS,CACd,GAAsC,WAAlCA,EAAQE,QAAQC,cAClB,OAAOH,EAETA,EAAUA,EAAQC,a,CAEpB,OAAO,IACT,CAQO,SAASG,EACdjD,GAGA,MAAMkD,EAAgBlD,EAAQmD,aAAa,SAC3C,GAAID,GAAiB,CAAC,QAAS,OAAQ,QAAQE,SAASF,GACtD,OAAOA,EAIT,MAAMG,EAAYT,EAAc5C,GAChC,GAAIqD,EAAW,CACb,MAAMC,EAAcD,EAAUF,aAAa,SAC3C,GAAIG,GAAe,CAAC,QAAS,OAAQ,QAAQF,SAASE,GACpD,OAAOA,C,CAKX,MAAO,MACT,CAKO,SAASC,EACdvD,EACAwD,GAEAxD,EAAQyD,UAAUC,OAAO,cAAe,aAAc,cACtD1D,EAAQyD,UAAUE,IAAI,SAASH,IACjC,CAKO,SAASI,EAAoB5D,GAElCuD,EAAWvD,EADYiD,EAAkBjD,GAE3C,CAMO,SAAS6D,EACd7D,EACA8D,GAEA,MAAMC,EAAwB7D,IAE5B,IAAKF,EAAQgE,aAAa,SAAU,CAClC,MAAMC,EAAW/D,EAAMzE,OAAO+H,MAC9BD,EAAWvD,EAASiE,GAGhBH,GACFA,EAAcG,E,GAYpB,OANA1J,SAAS2J,iBACP,sBACAH,GAIK,KACLxJ,SAAS4J,oBACP,sBACAJ,GAGN,CAKO,SAASK,EACdC,EACAb,GAGA,MAAMtD,EAAQ,IAAIC,YAAY,sBAAuB,CACnD1E,OAAQ,CACN+H,QACAa,cAEFjE,SAAS,EACTC,YAAY,IAIdgE,EAAW/D,cAAcJ,GAGzB3F,SAAS+F,cAAcJ,EACzB,CAOO,SAASoE,EACdtE,EAGAuE,GAGA,OAAKvE,EAAQgE,aAAa,cAIxBhE,EAAQuD,WAAWgB,IAHnBX,EAAoB5D,GACb6D,EAAsB7D,GAKjC,CAOO,SAASwE,EACdxE,EAGAiE,EACAQ,GAGIA,EAAgB5B,UAClB4B,EAAgB5B,UAChB4B,EAAgB5B,aAAUtS,GAGxB0T,EAEFjE,EAAQuD,WAAWU,GACVjE,EAAQ0E,cAEjBd,EAAoB5D,GACpByE,EAAgB5B,QAAUgB,EAAsB7D,GAEpD,CAaO,SAAS2E,EACdzT,EACAN,EACA5B,EAA8B,CAAC,GAG/B,MAAM4V,EAAerK,SAASoG,cAAc,mBAqB5C,IAAIkE,EAEJ,GAtBAD,EAAa1T,KAAOA,EACpB0T,EAAahU,QAAUA,EAEnB5B,EAAQgD,QACV4S,EAAa5S,MAAQhD,EAAQgD,YAGPzB,IAApBvB,EAAQ2S,UACViD,EAAajD,QAAU3S,EAAQ2S,cAGLpR,IAAxBvB,EAAQ8V,cACVF,EAAaE,YAAc9V,EAAQ8V,kBAGVvU,IAAvBvB,EAAQ+V,aACVH,EAAaG,WAAa/V,EAAQ+V,YAMhC/V,EAAQ6V,UACV,GAAiC,iBAAtB7V,EAAQ6V,UAAwB,CAGvCA,EAFYtK,SAASyK,cAAchW,EAAQ6V,YAI/BtK,SAAS0K,I,MAGvBJ,EAAY7V,EAAQ6V,cAEjB,CAEL,MAAMK,EAAoB3K,SAASyK,cACjC,6BAEF,GAAIE,EACFL,EAAYK,MACP,CAEL,MAAMC,EAAmB5K,SAASoG,cAChC,6BAEFwE,EAAiBC,SAAW,YAC5B7K,SAAS0K,KAAKnE,YAAYqE,GAC1BN,EAAYM,C,EAQhB,OAHAN,EAAU/D,YAAY8D,GAGfA,EAAaS,OAAOrS,KAAK,KAE1B4R,EAAaU,YACfV,EAAaU,WAAWC,YAAYX,IAG1C,C,6YAKO,MAAMY,EAAQ,CAInBC,KAAM,CAAC7U,EAAiB5B,IACtB2V,EAAY,OAAQ/T,EAAS5B,GAK/B0W,QAAS,CAAC9U,EAAiB5B,IACzB2V,EAAY,UAAW/T,EAAS5B,GAKlC2W,QAAS,CAAC/U,EAAiB5B,IACzB2V,EAAY,UAAW/T,EAAS5B,GAKlC4W,MAAO,CAAChV,EAAiB5B,IACvB2V,EAAY,QAAS/T,EAAS5B,IChX3B,MAAM6W,UAAcC,YAIzB,6BAAWC,GACT,MAAO,CAAC,QACV,CAEA,WAAAhK,GACEiK,QARM,KAAAC,OAAgB,OAChB,KAAAC,oBAA8B,EA0e9B,KAAA1B,kBAAoB,KACN,SAAhBhW,KAAKyX,SACPzX,KAAK+U,WAAW,QAEhBa,EAAkB5V,KAAM,SAre5B,CAEQ,YAAA2X,GAKN,IAAK3X,KAAK0X,qBAAuB3L,SAASkG,eAAe,iBAAkB,CACzE,MAAM2F,EAAe7L,SAASoG,cAAc,SAC5CyF,EAAazU,GAAK,gBAClByU,EAAaxF,YAAc,i+ZAob3BrG,SAASsG,KAAKC,YAAYsF,GAC1B5X,KAAK0X,oBAAqB,C,CAE9B,CAEA,iBAAAG,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,WAIvBpR,KAAK2X,eAEL3X,KAAK+U,WAAW/U,KAAKyX,QAGD,SAAhBzX,KAAKyX,QACPzX,KAAK8X,iBAKPvE,WAAW,KACTqC,EAAkB5V,KAAMA,KAAKyX,SAC5B,EACL,CAEA,oBAAAM,GAEM/X,KAAKgY,gBACPhY,KAAKgY,eAAerC,oBAAoB,SAAU3V,KAAKgW,kBAE3D,CAWQ,cAAA8B,GACgB,oBAAXxE,QAA0BA,OAAO2E,aAC1CjY,KAAKgY,eAAiB1E,OAAO2E,WAAW,gCACxCjY,KAAKgY,eAAetC,iBAAiB,SAAU1V,KAAKgW,mBAExD,CAEA,wBAAAkC,CACEhW,EACAiW,EACAC,GAEID,IAAaC,GAGV,UADClW,IAEJlC,KAAKgV,MAAQoD,EAGnB,CAEA,SAAIpD,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACR,MAAM4S,EAAWrY,KAAKyX,OACtBzX,KAAKyX,OAAShS,EACdzF,KAAK+U,WAAWtP,GAEF,SAAVA,EACFzF,KAAK8X,iBACI9X,KAAKgY,iBACdhY,KAAKgY,eAAerC,oBAAoB,SAAU3V,KAAKgW,mBACvDhW,KAAKgY,oBAAiBjW,GAIpBsW,IAAa5S,GACfmQ,EAAkB5V,KAAMyF,EAE5B,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAKA,cAAAsD,CAAe3W,EAAkB8D,GAC/BzF,KAAKkS,MAAMqG,YAAY,KAAK5W,IAAY8D,EAC1C,CAKA,cAAA+S,CAAe7W,GACb,OAAO8W,iBAAiBzY,MAAM0Y,iBAAiB,KAAK/W,KAAYgR,MAClE,EAIGgG,eAAerL,IAAI,WACtBqL,eAAe7Y,OAAO,SAAUuX,GCviB3B,MAAMuB,UACHtB,YAQR,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,SAC/B,CAEA,WAAAhK,GACEiK,QAVM,KAAAC,OAAgB,OAChB,KAAAoB,UAAoB,EACpB,KAAAC,YAAsB,EAmJtB,KAAAC,wBAA0B/Y,KAAKgZ,kBAAkBjW,KAAK/C,MA1I5DA,KAAK2X,eACL3X,KAAKiZ,YACP,CAEQ,YAAAtB,GACa/E,EAAc5S,MAEtB0S,UAAY,uqDAsDzB,CAEQ,UAAAuG,GAENlN,SAAS2J,iBAAiB,QAAS1V,KAAKkZ,oBAAoBnW,KAAK/C,OAGjE+L,SAAS2J,iBAAiB,UAAW1V,KAAKmZ,cAAcpW,KAAK/C,OAG7DsT,OAAOoC,iBAAiB,SAAU1V,KAAKoZ,mBAAmBrW,KAAK/C,MACjE,CAEA,iBAAA6X,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,iBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAK7CA,KAAKsZ,sBACP,CAEA,oBAAAvB,GACE/X,KAAKuZ,wBAGDvZ,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,SACHA,KAAKuZ,wBACLvZ,KAAKsZ,uBACL,MACF,IAAK,WACc,OAAblB,GAAqBpY,KAAK6Y,UAC5B7Y,KAAKwZ,OAIb,CAIQ,oBAAAF,GACN,MAAMG,EAAiBzZ,KAAK2U,aAAa,UACpC8E,GAEW1N,SAAS2N,iBAAiBD,GAClC5V,QAAQ4J,IACdA,EAAOiI,iBAAiB,cAAe1V,KAAK+Y,0BAEhD,CAEQ,qBAAAQ,GACN,MAAME,EAAiBzZ,KAAK2U,aAAa,UACpC8E,GAEW1N,SAAS2N,iBAAiBD,GAClC5V,QAAQ4J,IACdA,EAAOkI,oBAAoB,cAAe3V,KAAK+Y,0BAEnD,CAEQ,iBAAAC,CAAkBtH,GACxB,GAAI1R,KAAK2Z,SAAU,OAEnB,MAAMC,EAAalI,EACnBkI,EAAWC,iBACXD,EAAWE,kBAEX,MAAMC,EAAUH,EAAWI,cACrBC,EAAoBL,EAAmBK,iBAI7Cja,KAAK6W,KACH+C,EAAWM,QACXN,EAAWO,QACXJ,EACAE,EAEJ,CAEQ,mBAAAf,CAAoBxH,G,MAC1B,IAAK1R,KAAK6Y,SAAU,OAGpB,GAAI7Y,KAAK8Y,WAEP,YADA9Y,KAAK8Y,YAAa,GAIpB,MAAMrL,EAASiE,EAAMjE,OAChBzN,KAAK2F,SAAS8H,KAA2B,QAAf,EAAAzN,KAAK8S,kBAAU,eAAEnN,SAAS8H,KACvDzN,KAAKwZ,MAET,CAEQ,aAAAL,CAAczH,GACpB,GAAK1R,KAAK6Y,SAEV,OAAQnH,EAAMtQ,KACZ,IAAK,SACHsQ,EAAMmI,iBACN7Z,KAAKwZ,OACL,MACF,IAAK,YACH9H,EAAMmI,iBACN7Z,KAAKoa,gBACL,MACF,IAAK,UACH1I,EAAMmI,iBACN7Z,KAAKqa,oBACL,MACF,IAAK,QACL,IAAK,IACH3I,EAAMmI,iBACN7Z,KAAKsa,sBAGX,CAEQ,kBAAAlB,GACFpZ,KAAK6Y,UACP7Y,KAAKwZ,MAET,CAEQ,aAAAY,GACN,MAAM9U,EAAQtF,KAAK0Z,iBAAiB,wCAC9Ba,EAAe5X,MAAM+M,KAAKpK,GAAOkV,UACrC7N,IAAO,MAAC,OAAAA,IAASZ,SAAS0O,gBAAgC,QAAf,EAAA9N,EAAKmG,kBAAU,eAAE2H,iBAI7DnV,EADiBiV,EAAejV,EAAMvB,OAAS,EAAIwW,EAAe,EAAI,GACrCG,OACpC,CAEQ,iBAAAL,GACN,MAAM/U,EAAQtF,KAAK0Z,iBAAiB,wCAC9Ba,EAAe5X,MAAM+M,KAAKpK,GAAOkV,UACrC7N,IAAO,MAAC,OAAAA,IAASZ,SAAS0O,gBAAgC,QAAf,EAAA9N,EAAKmG,kBAAU,eAAE2H,iBAI7DnV,EADiBiV,EAAe,EAAIA,EAAe,EAAIjV,EAAMvB,OAAS,GACrC2W,OACpC,CAEQ,mBAAAJ,GACN,MAAMK,EAAU5O,SAAS0O,cACrBE,GAA+B,yBAApBA,EAAQpG,SACpBoG,EAAgBC,OAErB,CAGA,SAAI5F,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EACdzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,YAAI4X,GACF,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAImE,CAASlU,GACPA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,WAAIC,GACF,OAAO/a,KAAK6Y,QACd,CAEA,UAAIpL,GACF,OAAOzN,KAAK2U,aAAa,SAC3B,CAEA,UAAIlH,CAAOhI,GACLA,EACFzF,KAAK6a,aAAa,SAAUpV,GAE5BzF,KAAK8a,gBAAgB,SAEzB,CAEA,IAAAjE,CACEmE,EACAC,EACAlB,EACAE,GAEA,GAAIja,KAAK2Z,SAAU,OAEnB3Z,KAAK6Y,UAAW,EAChB7Y,KAAK6a,aAAa,UAAW,IAG7B7a,KAAKkS,MAAM0B,KAAO,GAAGoH,MACrBhb,KAAKkS,MAAMyB,IAAM,GAAGsH,MAGpBjb,KAAKkb,iBAGLlb,KAAK8Y,YAAa,EAClBvF,WAAW,KACTvT,KAAK8Y,YAAa,GACjB,IAGH9Y,KAAK+U,WAAW/U,KAAKyX,QAGrB0D,sBAAsB,KACpB,MAAMC,EAAYpb,KAAKwW,cACrB,wCAEE4E,GACFA,EAAUV,UAKd,MAAMW,EAA8C,CAClDC,OAAQtb,KAAKmD,GACboY,KAAMvb,KACNgb,IACAC,IACAlB,QAASA,GAAW/Z,MAGlBia,IACFoB,EAAYpB,iBAAmBA,GAGjC1I,EACEvR,KACA,oBACAqb,EAEJ,CAEA,IAAA7B,GACOxZ,KAAK6Y,WAEV7Y,KAAK6Y,UAAW,EAChB7Y,KAAK8a,gBAAgB,WAGrBvJ,EACEvR,KACA,oBACA,CACEsb,OAAQtb,KAAKmD,GACboY,KAAMvb,OAGZ,CAEQ,cAAAkb,GACN,MAAMzH,EAAOzT,KAAK0T,wBACZ8H,EAAgBlI,OAAOY,WACvBuH,EAAiBnI,OAAOQ,YAE9B,IAAIF,EAAO9F,SAAS9N,KAAKkS,MAAM0B,MAC3BD,EAAM7F,SAAS9N,KAAKkS,MAAMyB,KAG1BC,EAAOH,EAAKiI,MAAQF,IACtB5H,EAAO4H,EAAgB/H,EAAKiI,MAAQ,IAElC9H,EAAO,KACTA,EAAO,IAILD,EAAMF,EAAKkI,OAASF,IACtB9H,EAAM8H,EAAiBhI,EAAKkI,OAAS,IAEnChI,EAAM,KACRA,EAAM,IAGR3T,KAAKkS,MAAM0B,KAAO,GAAGA,MACrB5T,KAAKkS,MAAMyB,IAAM,GAAGA,KACtB,CAEA,UAAAoB,CAAWC,GACThV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,GAGEhV,KAAK0Z,iBACtB,mDAES7V,QAAQ+X,IACwB,mBAA7BA,EAAc7G,YACvB6G,EAAc7G,WAAWC,IAGhC,EAIG2D,eAAerL,IAAI,oBACtBqL,eAAe7Y,OAAO,kBAAmB8Y,GCjbpC,MAAMiD,UACHvE,YAMR,6BAAWC,GACT,MAAO,CAAC,QAAS,OAAQ,QAAS,WAAY,QAAS,WACzD,CAEA,WAAAhK,GACEiK,QARM,KAAAC,OAAgB,OAStBzX,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,2zGA+HvB,MAAMoJ,EAAShJ,EAAW0D,cAAc,SACxCsF,EAAOpG,iBAAiB,QAAS1V,KAAK+b,YAAYhZ,KAAK/C,OACvD8b,EAAOpG,iBAAiB,UAAYhE,GAClC1R,KAAKmZ,cAAczH,GAEvB,CAEA,iBAAAmG,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,sBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAM7CA,KAAKgc,SAAW,EAChBhc,KAAK0V,iBAAiB,QAAS1V,KAAKic,YAAYlZ,KAAK/C,OAErDA,KAAKkc,eACP,CAEA,oBAAAnE,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,QACL,IAAK,OACL,IAAK,WACHA,KAAKkc,gBACL,MACF,IAAK,WACHlc,KAAKmc,sBAGX,CAEQ,aAAAD,G,MACN,IAAKlc,KAAK8S,WAAY,OAEtB,MAAMsJ,EAAcpc,KAAK8S,WAAW0D,cAAc,SAC5C6F,EAAerc,KAAK8S,WAAW0D,cAAc,UAC7C8F,EAAkBtc,KAAK8S,WAAW0D,cACtC,aAII+F,EAAOvc,KAAK2U,aAAa,QAC3B4H,GACFH,EAAYhK,YAAcmK,EAC1BH,EAAYlK,MAAMsK,QAAU,SAE5BJ,EAAYhK,YAAc,GAC1BgK,EAAYlK,MAAMsK,QAAU,QAI9B,MAAMC,EAAQzc,KAAK2U,aAAa,WAA4B,QAAhB,EAAA3U,KAAKoS,mBAAW,eAAEO,SAAU,GACxE0J,EAAajK,YAAcqK,EAG3B,MAAMC,EAAW1c,KAAK2U,aAAa,YAC/B+H,GACFJ,EAAgBlK,YAAcsK,EAC9BJ,EAAgBpK,MAAMsK,QAAU,UAEhCF,EAAgBlK,YAAc,GAC9BkK,EAAgBpK,MAAMsK,QAAU,OAEpC,CAEQ,mBAAAL,GACDnc,KAAK8S,aAEK9S,KAAK8S,WAAW0D,cAAc,SACtCmD,SAAW3Z,KAAK2Z,SACzB,CAEQ,WAAAoC,CAAYrK,GAClB,GAAI1R,KAAK2Z,SAAU,OAEnBjI,EAAMoI,kBAGN,MAAM6C,EAAc3c,KAAK4c,QAAQ,mBAGjCrL,EACEvR,KACA,0BACA,CACE6c,OAAQ7c,KAAKmD,GACbwJ,KAAM3M,KACNsb,QAAQqB,aAAW,EAAXA,EAAaxZ,KAAM,GAC3BoY,KAAMoB,EACNlX,MAAOzF,KAAKyF,QAKZkX,GAAoD,mBAA7BA,EAAoBnD,MAC5CmD,EAAoBnD,MAEzB,CAEQ,aAAAL,CAAczH,GAChB1R,KAAK2Z,UAGL,CAAC,YAAa,UAAW,UAAU/E,SAASlD,EAAMtQ,MAIpC,UAAdsQ,EAAMtQ,KAAiC,MAAdsQ,EAAMtQ,MACjCsQ,EAAMmI,iBACN7Z,KAAK+b,YAAYrK,GAErB,CAEQ,WAAAuK,GACDjc,KAAK8S,YAEK9S,KAAK8S,WAAW0D,cAAc,SACtCkE,OACT,CAGA,SAAI1F,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EACdzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,YAAI4X,GACF,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAImE,CAASlU,GACPA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,SAAI2B,GACF,OAAOzc,KAAK2U,aAAa,UAAY,EACvC,CAEA,SAAI8H,CAAMhX,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,QAAI8W,GACF,OAAOvc,KAAK2U,aAAa,SAAW,EACtC,CAEA,QAAI4H,CAAK9W,GACHA,EACFzF,KAAK6a,aAAa,OAAQpV,GAE1BzF,KAAK8a,gBAAgB,OAEzB,CAEA,SAAIrV,GACF,OAAOzF,KAAK2U,aAAa,UAAY3U,KAAKyc,KAC5C,CAEA,SAAIhX,CAAMA,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,YAAIiX,GACF,OAAO1c,KAAK2U,aAAa,aAAe,EAC1C,CAEA,YAAI+H,CAASjX,GACPA,EACFzF,KAAK6a,aAAa,WAAYpV,GAE9BzF,KAAK8a,gBAAgB,WAEzB,CAEA,KAAAF,GACO5a,KAAK2Z,UACR3Z,KAAK+b,YAAY,IAAIe,MAAM,SAE/B,CAEA,KAAApC,GACElD,MAAMkD,QACN1a,KAAKic,aACP,CAEA,UAAAlH,CAAWC,GACThV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,yBACtBqL,eAAe7Y,OAAO,uBAAwB+b,GChZzC,MAAMkB,UACHzF,YAMR,6BAAWC,GACT,MAAO,CAAC,QACV,CAEA,WAAAhK,GACEiK,QARM,KAAAC,OAAgB,OAStBzX,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,81BAgCzB,CAEA,iBAAAmF,GAEO7X,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEID,IAAaC,GAGV,UADClW,IAIAkW,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAInD,CAGA,SAAIgV,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EACdzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,YAAI4X,GACF,OAAO,CACT,CAEA,YAAIA,CAASqD,GAEb,CAEA,UAAAjI,CAAWC,GACThV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,8BACtBqL,eAAe7Y,OAAO,4BAA6Bid,GClI9C,MAAME,UACH3F,YASR,6BAAWC,GACT,MAAO,CAAC,QAAS,UAAW,cAAe,QAAS,OACtD,CAEA,WAAAhK,GACEiK,QAXM,KAAAC,OAAgB,OAChB,KAAAyF,cAA0C,KAC1C,KAAAC,gBAAkD,KAClD,KAAAC,eAAkD,KASxDpd,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,qyJAwLvB1S,KAAKkd,cAAgBpK,EAAW0D,cAAc,UAC9C,MAAMsF,EAAShJ,EAAW0D,cAAc,kBAGpCxW,KAAKkd,gBACPld,KAAKkd,cAAcxH,iBAAiB,QAAS1V,KAAKqd,YAAYta,KAAK/C,OACnEA,KAAKkd,cAAcxH,iBACjB,SACA1V,KAAKsd,aAAava,KAAK/C,QAIvB8b,GACFA,EAAOpG,iBAAiB,QAAS,IAAM1V,KAAKud,QAEhD,CAEA,iBAAA1F,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,iBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAM7CA,KAAK+U,WAAW/U,KAAKyX,QACrBzX,KAAKkc,eACP,CAEA,oBAAAnE,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACL,IAAK,UACL,IAAK,cACL,IAAK,OACHlC,KAAKkc,gBACL,MACF,IAAK,QAGC9D,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAInD,CAEQ,aAAAkc,G,YACN,MAAMsB,EAA8B,QAAf,EAAAxd,KAAK8S,kBAAU,eAAE0D,cAAc,iBAC9CiH,EAAgC,QAAf,EAAAzd,KAAK8S,kBAAU,eAAE0D,cAAc,mBAChDkH,EAA+B,QAAf,EAAA1d,KAAK8S,kBAAU,eAAE0D,cAAc,kBAC/C4F,EAA6B,QAAf,EAAApc,KAAK8S,kBAAU,eAAE0D,cAAc,gBAgBnD,GAdIgH,IACFA,EAAapL,YACXpS,KAAK2U,aAAa,UAAY3U,KAAK2d,mBAGnCF,IACFA,EAAerL,YACbpS,KAAK2U,aAAa,YAAc,6BAGhC+I,IACFA,EAActL,YAAcpS,KAAK2U,aAAa,gBAAkB,MAG9DyH,EAAa,CACf,MAAM1Z,EAAO1C,KAAK2U,aAAa,SAAW,OAC1CyH,EAAYwB,UAAY,oBAAoBlb,IAC5C0Z,EAAYhK,YAAcpS,KAAK6d,eAAenb,E,CAElD,CAEQ,eAAAib,GAEN,OADa3d,KAAK2U,aAAa,SAAW,QAExC,IAAK,UACH,MAAO,UACT,IAAK,UACH,MAAO,UACT,IAAK,QACH,MAAO,QACT,QACE,MAAO,cAEb,CAEQ,cAAAkJ,CAAenb,GACrB,OAAQA,GACN,IAAK,UACH,MAAO,IACT,IAAK,UACH,MAAO,KACT,IAAK,QACH,MAAO,IACT,QACE,MAAO,KAEb,CAEQ,WAAA2a,GACFrd,KAAKmd,kBACPnd,KAAKmd,kBACLnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,qBAAsB,CAC9C8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,MAEZ,CAEQ,YAAAsd,CAAa5L,GACAH,EAAoBvR,KAAM,sBAAuB,CAClE8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAMRA,KAAKud,QAFL7L,EAAMmI,gBAIV,CAEQ,KAAA0D,G,MACFvd,KAAKmd,kBACPnd,KAAKmd,kBACLnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,uBAAwB,CAChD8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAGQ,QAAlB,EAAAA,KAAKkd,qBAAa,SAAEK,OACtB,CAGA,SAAIvI,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,SAAIyB,GACF,OAAOxD,KAAK2U,aAAa,UAAY3U,KAAK2d,iBAC5C,CAEA,SAAIna,CAAMiC,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,WAAIrD,GACF,OAAOpC,KAAK2U,aAAa,YAAc,2BACzC,CAEA,WAAIvS,CAAQqD,GACVzF,KAAK6a,aAAa,UAAWpV,EAC/B,CAEA,cAAIuY,GACF,OAAOhe,KAAK2U,aAAa,gBAAkB,IAC7C,CAEA,cAAIqJ,CAAWvY,GACbzF,KAAK6a,aAAa,cAAepV,EACnC,CAEA,QAAI/C,GACF,OAAQ1C,KAAK2U,aAAa,SAAW,MACvC,CAEA,QAAIjS,CAAK+C,GACPzF,KAAK6a,aAAa,OAAQpV,EAC5B,CAEA,QAAIwY,G,MACF,OAAyB,QAAlB,EAAAje,KAAKkd,qBAAa,eAAEe,QAAQ,CACrC,CAKO,IAAApH,GACL,OAAO,IAAIqH,QAAQ,CAACjT,EAASkT,K,QACvBne,KAAKmd,kBAEY,QAAnB,EAAAnd,KAAKod,sBAAc,mBACjB,IAAI9Y,MAAM,gDAIdtE,KAAKmd,gBAAkBlS,EACvBjL,KAAKod,eAAiBe,EAEtB5M,EAAoBvR,KAAM,oBAAqB,CAC7C8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAGQ,QAAlB,EAAAA,KAAKkd,qBAAa,SAAEkB,aAExB,CAEO,UAAArJ,CAAWC,GAChBhV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,aACtBqL,eAAe7Y,OAAO,WAAYmd,GC9c7B,MAAMoB,UACH/G,YASR,6BAAWC,GACT,MAAO,CACL,QACA,UACA,eACA,cACA,QACA,SAEJ,CAEA,WAAAhK,GACEiK,QAlBM,KAAAC,OAAgB,OAChB,KAAAyF,cAA0C,KAC1C,KAAAC,gBAAqD,KACrD,KAAAC,eAAkD,KAgBxDpd,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,0kKAuLvB1S,KAAKkd,cAAgBpK,EAAW0D,cAAc,UAC9C,MAAM8H,EAAgBxL,EAAW0D,cAAc,mBACzC+H,EAAezL,EAAW0D,cAAc,kBAG1CxW,KAAKkd,gBACPld,KAAKkd,cAAcxH,iBAAiB,QAAS1V,KAAKqd,YAAYta,KAAK/C,OACnEA,KAAKkd,cAAcxH,iBACjB,SACA1V,KAAKsd,aAAava,KAAK/C,QAIvBse,GACFA,EAAc5I,iBAAiB,QAAS,IAAM1V,KAAKwe,WAGjDD,GACFA,EAAa7I,iBAAiB,QAAS,IAAM1V,KAAKye,SAEtD,CAEA,iBAAA5G,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,mBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAM7CA,KAAK+U,WAAW/U,KAAKyX,QACrBzX,KAAKkc,eACP,CAEA,oBAAAnE,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACL,IAAK,UACL,IAAK,eACL,IAAK,cACHlC,KAAKkc,gBACL,MACF,IAAK,QAGC9D,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAOnD,CAEQ,aAAAkc,G,YACN,MAAMsB,EAA8B,QAAf,EAAAxd,KAAK8S,kBAAU,eAAE0D,cAAc,iBAC9CiH,EAAgC,QAAf,EAAAzd,KAAK8S,kBAAU,eAAE0D,cAAc,mBAChD8H,EAA+B,QAAf,EAAAte,KAAK8S,kBAAU,eAAE0D,cAAc,mBAC/C+H,EAA8B,QAAf,EAAAve,KAAK8S,kBAAU,eAAE0D,cAAc,kBAEhDgH,IACFA,EAAapL,YAAcpS,KAAK2U,aAAa,UAAY,WAGvD8I,IACFA,EAAerL,YACbpS,KAAK2U,aAAa,YAAc,iBAGhC2J,IACFA,EAAclM,YAAcpS,KAAK2U,aAAa,iBAAmB,MAG/D4J,IACFA,EAAanM,YAAcpS,KAAK2U,aAAa,gBAAkB,SAEnE,CAEQ,WAAA0I,GAEFrd,KAAKmd,kBACPnd,KAAKmd,iBAAgB,GACrBnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,uBAAwB,CAChD8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACR0e,WAAW,GAEf,CAEQ,YAAApB,CAAa5L,GACAH,EAAoBvR,KAAM,wBAAyB,CACpE8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAMRA,KAAKye,SAFL/M,EAAMmI,gBAIV,CAEQ,OAAA2E,G,MACFxe,KAAKmd,kBACPnd,KAAKmd,iBAAgB,GACrBnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,yBAA0B,CAClD8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACR0e,WAAW,IAGK,QAAlB,EAAA1e,KAAKkd,qBAAa,SAAEK,MAAM,YAC5B,CAEQ,MAAAkB,G,MACFze,KAAKmd,kBACPnd,KAAKmd,iBAAgB,GACrBnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,wBAAyB,CACjD8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACR0e,WAAW,IAGK,QAAlB,EAAA1e,KAAKkd,qBAAa,SAAEK,MAAM,YAC5B,CAGA,SAAIvI,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,SAAIyB,GACF,OAAOxD,KAAK2U,aAAa,UAAY,SACvC,CAEA,SAAInR,CAAMiC,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,WAAIrD,GACF,OAAOpC,KAAK2U,aAAa,YAAc,eACzC,CAEA,WAAIvS,CAAQqD,GACVzF,KAAK6a,aAAa,UAAWpV,EAC/B,CAEA,eAAIkZ,GACF,OAAO3e,KAAK2U,aAAa,iBAAmB,IAC9C,CAEA,eAAIgK,CAAYlZ,GACdzF,KAAK6a,aAAa,eAAgBpV,EACpC,CAEA,cAAImZ,GACF,OAAO5e,KAAK2U,aAAa,gBAAkB,QAC7C,CAEA,cAAIiK,CAAWnZ,GACbzF,KAAK6a,aAAa,cAAepV,EACnC,CAEA,UAAIoZ,GACF,OAAO7e,KAAKwV,aAAa,SAC3B,CAEA,UAAIqJ,CAAOpZ,GACLA,EACFzF,KAAK6a,aAAa,SAAU,IAE5B7a,KAAK8a,gBAAgB,SAEzB,CAEA,QAAImD,G,MACF,OAAyB,QAAlB,EAAAje,KAAKkd,qBAAa,eAAEe,QAAQ,CACrC,CAKO,IAAApH,GACL,OAAO,IAAIqH,QAAQ,CAACjT,EAASkT,K,QACvBne,KAAKmd,kBAEY,QAAnB,EAAAnd,KAAKod,sBAAc,mBACjB,IAAI9Y,MAAM,gDAIdtE,KAAKmd,gBAAkBlS,EACvBjL,KAAKod,eAAiBe,EAEtB5M,EAAoBvR,KAAM,sBAAuB,CAC/C8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAGQ,QAAlB,EAAAA,KAAKkd,qBAAa,SAAEkB,aAExB,CAEO,UAAArJ,CAAWC,GAChBhV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,eACtBqL,eAAe7Y,OAAO,aAAcue,GC7d/B,MAAMS,UACHxH,YAOR,6BAAWC,GACT,MAAO,CAAC,QAAS,QAAS,QAAS,WAAY,QAAS,SAC1D,CAEA,WAAAhK,GACEiK,QATM,KAAAC,OAAgB,OAChB,KAAAyF,cAA0C,KAShDld,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,8iIAsJvB1S,KAAKkd,cAAgBpK,EAAW0D,cAAc,UAC9C,MAAMuI,EAAcjM,EAAW0D,cAAc,iBAGzCxW,KAAKkd,gBACPld,KAAKkd,cAAcxH,iBAAiB,QAAS1V,KAAKqd,YAAYta,KAAK/C,OACnEA,KAAKkd,cAAcxH,iBACjB,SACA1V,KAAKsd,aAAava,KAAK/C,QAIvB+e,GACFA,EAAYrJ,iBAAiB,QAAS,IAAM1V,KAAKud,QAErD,CAEA,iBAAA1F,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,WAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAM7CA,KAAK+U,WAAW/U,KAAKyX,OACvB,CAEA,oBAAAM,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACHlC,KAAKgf,cACL,MACF,IAAK,QAGC5G,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,QAEH,MACF,IAAK,WACHA,KAAKif,iBACL,MACF,IAAK,QAGL,IAAK,SACHjf,KAAKkf,aAGX,CAEQ,WAAAF,G,MACN,MAAMxB,EAA8B,QAAf,EAAAxd,KAAK8S,kBAAU,eAAE0D,cAAc,iBAChDgH,IACFA,EAAapL,YAAcpS,KAAK2U,aAAa,UAAY,GAE7D,CAEQ,cAAAsK,G,MACN,MAAMF,EAA6B,QAAf,EAAA/e,KAAK8S,kBAAU,eAAE0D,cACnC,iBAEF,GAAIuI,EAAa,CACf,MAAMI,EAA6C,UAAlCnf,KAAK2U,aAAa,YACnCoK,EAAYpF,UAAYwF,EACxBJ,EAAY7M,MAAMsK,QAAU2C,EAAW,OAAS,M,CAEpD,CAEQ,UAAAD,GACN,GAAIlf,KAAKkd,cAAe,CACtB,MAAMxB,EAAQ1b,KAAK2U,aAAa,SAC1BgH,EAAS3b,KAAK2U,aAAa,UAE7B+G,IACF1b,KAAKkd,cAAchL,MAAMwJ,MACvBA,EAAM9G,SAAS,OAAS8G,EAAM9G,SAAS,MAAQ8G,EAAM9G,SAAS,MAC1D8G,EACA,GAAGA,OAGPC,IACF3b,KAAKkd,cAAchL,MAAMyJ,OACvBA,EAAO/G,SAAS,OAAS+G,EAAO/G,SAAS,MAAQ+G,EAAO/G,SAAS,MAC7D+G,EACA,GAAGA,M,CAGf,CAEQ,WAAA0B,G,MACN9L,EAAoBvR,KAAM,eAAgB,CACxC8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACRof,YAA+B,QAAlB,EAAApf,KAAKkd,qBAAa,eAAEkC,aAErC,CAEQ,YAAA9B,CAAa5L,GACAH,EAAoBvR,KAAM,gBAAiB,CAC5D8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,QAIR0R,EAAMmI,gBAEV,CAGA,SAAI7E,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,SAAIyB,GACF,OAAOxD,KAAK2U,aAAa,UAAY,EACvC,CAEA,SAAInR,CAAMiC,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,SAAI4Z,GACF,OAAOrf,KAAKwV,aAAa,QAC3B,CAEA,SAAI6J,CAAM5Z,GACJA,EACFzF,KAAK6a,aAAa,QAAS,IAE3B7a,KAAK8a,gBAAgB,QAEzB,CAEA,YAAIqE,GACF,MAAyC,UAAlCnf,KAAK2U,aAAa,WAC3B,CAEA,YAAIwK,CAAS1Z,GACXzF,KAAK6a,aAAa,WAAYpV,EAAMgC,WACtC,CAEA,QAAIwW,G,MACF,OAAyB,QAAlB,EAAAje,KAAKkd,qBAAa,eAAEe,QAAQ,CACrC,CAEA,eAAImB,G,MACF,OAAyB,QAAlB,EAAApf,KAAKkd,qBAAa,eAAEkC,cAAe,EAC5C,CAEA,eAAIA,CAAY3Z,GACVzF,KAAKkd,gBACPld,KAAKkd,cAAckC,YAAc3Z,EAErC,CAEO,IAAAoR,GACA7W,KAAKkd,gBAEV3L,EAAoBvR,KAAM,cAAe,CACvC8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAGVA,KAAKkd,cAAcrG,OACrB,CAEO,SAAAuH,GACApe,KAAKkd,gBAEV3L,EAAoBvR,KAAM,cAAe,CACvC8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACRqf,OAAO,IAGTrf,KAAKkd,cAAckB,YACrB,CAEO,KAAAb,CAAM6B,GACNpf,KAAKkd,qBAEUnb,IAAhBqd,IACFpf,KAAKkd,cAAckC,YAAcA,GAGnCpf,KAAKkd,cAAcK,QACrB,CAEO,UAAAxI,CAAWC,GAChBhV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,cACtBqL,eAAe7Y,OAAO,YAAagf,GC5Z9B,MAAMQ,UACHhI,YASR,6BAAWC,GACT,MAAO,CACL,QACA,UACA,cACA,gBACA,eACA,cACA,QACA,WACA,YACA,UACA,aACA,aAEJ,CAEA,WAAAhK,GACEiK,QAxBM,KAAAC,OAAgB,OAChB,KAAAyF,cAA0C,KAC1C,KAAAC,gBAA2D,KAC3D,KAAAC,eAAkD,KAsBxDpd,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,0xMAsOvB1S,KAAKkd,cAAgBpK,EAAW0D,cAAc,UAC9C,MAAM8H,EAAgBxL,EAAW0D,cAAc,mBACzC+H,EAAezL,EAAW0D,cAAc,kBACxC5I,EAAQkF,EAAW0D,cAAc,iBAGnCxW,KAAKkd,gBACPld,KAAKkd,cAAcxH,iBAAiB,QAAS1V,KAAKqd,YAAYta,KAAK/C,OACnEA,KAAKkd,cAAcxH,iBACjB,SACA1V,KAAKsd,aAAava,KAAK/C,QAIvBse,GACFA,EAAc5I,iBAAiB,QAAS,IAAM1V,KAAKwe,WAGjDD,GACFA,EAAa7I,iBAAiB,QAAS,IAAM1V,KAAKye,UAGhD7Q,IACFA,EAAM8H,iBAAiB,QAAS1V,KAAKuf,YAAYxc,KAAK/C,OACtD4N,EAAM8H,iBAAiB,UAAW1V,KAAKwf,cAAczc,KAAK/C,OAE9D,CAEA,iBAAA6X,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,kBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAM7CA,KAAK+U,WAAW/U,KAAKyX,QACrBzX,KAAKkc,eACP,CAEA,oBAAAnE,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACL,IAAK,UACL,IAAK,cACL,IAAK,gBACL,IAAK,eACL,IAAK,cACL,IAAK,WACL,IAAK,YACL,IAAK,UACL,IAAK,aACL,IAAK,aACHlC,KAAKkc,gBACL,MACF,IAAK,QAGC9D,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAInD,CAEQ,aAAAkc,G,kBACN,MAAMsB,EAA8B,QAAf,EAAAxd,KAAK8S,kBAAU,eAAE0D,cAAc,iBAC9CiH,EAAgC,QAAf,EAAAzd,KAAK8S,kBAAU,eAAE0D,cAAc,mBAChD8H,EAA+B,QAAf,EAAAte,KAAK8S,kBAAU,eAAE0D,cAAc,mBAC/C+H,EAA8B,QAAf,EAAAve,KAAK8S,kBAAU,eAAE0D,cAAc,kBAC9CiJ,EAA8B,QAAf,EAAAzf,KAAK8S,kBAAU,eAAE0D,cACpC,iBAOF,GAJIgH,IACFA,EAAapL,YAAcpS,KAAK2U,aAAa,UAAY,kBAGvD8I,EAAgB,CAClB,MAAMrb,EAAUpC,KAAK2U,aAAa,YAAc,GAChD8I,EAAerL,YAAchQ,C,CAW/B,GARIkc,IACFA,EAAclM,YAAcpS,KAAK2U,aAAa,iBAAmB,MAG/D4J,IACFA,EAAanM,YAAcpS,KAAK2U,aAAa,gBAAkB,UAG7D8K,EAAc,CAEhB,MAAMC,EAAY1f,KAAKwV,aAAa,aAC9BmK,EAAcF,EAAalL,QAAQC,cAEzC,GAAIkL,GAA6B,UAAhBC,EAAyB,CAExC,MAAMC,EAAW7T,SAASoG,cAAc,YACxCyN,EAAShC,UAAY,+BACrBgC,EAAS/E,aAAa,OAAQ,SACP,QAAvB,EAAA4E,EAAa3I,kBAAU,SAAE+I,aAAaD,EAAUH,GAChDzf,KAAK8f,kBAAkBF,E,MAClB,GAAKF,GAA6B,aAAhBC,EASvB3f,KAAK8f,kBAAkBL,OAT4B,CAEnD,MAAM7R,EAAQ7B,SAASoG,cAAc,SACrCvE,EAAMgQ,UAAY,eAClBhQ,EAAMiN,aAAa,OAAQ,SAC3BjN,EAAMlL,KAAO,OACU,QAAvB,EAAA+c,EAAa3I,kBAAU,SAAE+I,aAAajS,EAAO6R,GAC7Czf,KAAK8f,kBAAkBlS,E,EAK7B,CAEQ,iBAAAkS,CACNtO,GAEA,MAAMuO,EAAc/f,KAAK2U,aAAa,gBAAkB,GAClDqL,EAAehgB,KAAK2U,aAAa,kBAAoB,GACrD5P,EAAU/E,KAAK2U,aAAa,WAC5B9M,EAAY7H,KAAK2U,aAAa,cAC9B5M,EAAY/H,KAAK2U,aAAa,cAEpCnD,EAAQuO,YAAcA,EACtBvO,EAAQ/L,MAAQua,EAEZjb,GAAWyM,aAAmByO,mBAChCzO,EAAQzM,QAAUA,GAGhB8C,IACF2J,EAAQ3J,UAAYiG,SAASjG,EAAW,KAGtCE,IACFyJ,EAAQzJ,UAAY+F,SAAS/F,EAAW,KAI1CyJ,EAAQkE,iBAAiB,QAAS1V,KAAKuf,YAAYxc,KAAK/C,OACxDwR,EAAQkE,iBAAiB,UAAYhE,GACnC1R,KAAKwf,cAAc9N,GAEvB,CAEQ,WAAA6N,GACNvf,KAAKkgB,eACP,CAEQ,aAAAV,CAAc9N,GAEJ,UAAdA,EAAMtQ,KACLsQ,EAAMyO,UACNngB,KAAKwV,aAAa,aAII,WAAd9D,EAAMtQ,MACfsQ,EAAMmI,iBACN7Z,KAAKye,WAJL/M,EAAMmI,iBACN7Z,KAAKwe,UAKT,CAEQ,aAAA0B,G,UACN,MAAMtS,EAAuB,QAAf,EAAA5N,KAAK8S,kBAAU,eAAE0D,cAAc,iBAGvCrQ,EAA8B,QAAf,EAAAnG,KAAK8S,kBAAU,eAAE0D,cAAc,kBAC9C8H,EAA+B,QAAf,EAAAte,KAAK8S,kBAAU,eAAE0D,cACrC,mBAGF,IAAK5I,IAAUzH,IAAiBmY,EAAe,OAAO,EAEtD,IAAI8B,GAAU,EACVhJ,EAAQ,GAEZ,MAAM3R,EAAQmI,EAAMnI,MACd4B,EAAWrH,KAAKwV,aAAa,YAC7BzQ,EAAU/E,KAAK2U,aAAa,WAC5B9M,EAAY7H,KAAK2U,aAAa,cAC9B5M,EAAY/H,KAAK2U,aAAa,cA+BpC,OA5BItN,IAAa5B,EAAMkN,SACrByN,GAAU,EACVhJ,EAAQ,0BAINgJ,GAAWrb,GAAWU,IAAU,IAAIR,OAAOF,GAASD,KAAKW,KAC3D2a,GAAU,EACVhJ,EAAQ,kBAINgJ,GAAWvY,GAAapC,EAAM1B,OAAS+J,SAASjG,EAAW,MAC7DuY,GAAU,EACVhJ,EAAQ,qBAAqBvP,gBAG3BuY,GAAWrY,GAAatC,EAAM1B,OAAS+J,SAAS/F,EAAW,MAC7DqY,GAAU,EACVhJ,EAAQ,qBAAqBrP,gBAI/B6F,EAAMqH,UAAUoL,OAAO,SAAUD,GACjCja,EAAaiM,YAAcgF,EAC3BjR,EAAa8O,UAAUoL,OAAO,WAAYD,GAC1C9B,EAAc3E,UAAYyG,EAEnBA,CACT,CAEQ,WAAA/C,GACFrd,KAAKmd,kBACPnd,KAAKmd,gBAAgB,MACrBnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,sBAAuB,CAC/C8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACRyF,MAAO,MAEX,CAEQ,YAAA6X,CAAa5L,GACAH,EAAoBvR,KAAM,uBAAwB,CACnE8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAMRA,KAAKye,SAFL/M,EAAMmI,gBAIV,CAEQ,OAAA2E,G,QACN,IAAKxe,KAAKkgB,gBAAiB,OAE3B,MAAMtS,EAAuB,QAAf,EAAA5N,KAAK8S,kBAAU,eAAE0D,cAAc,iBAGvC/Q,GAAQmI,aAAK,EAALA,EAAOnI,QAAS,GAE1BzF,KAAKmd,kBACPnd,KAAKmd,gBAAgB1X,GACrBzF,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,wBAAyB,CACjD8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACRyF,UAGgB,QAAlB,EAAAzF,KAAKkd,qBAAa,SAAEK,MAAM9X,EAC5B,CAEQ,MAAAgZ,G,MACFze,KAAKmd,kBACPnd,KAAKmd,gBAAgB,MACrBnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,MAGxB7L,EAAoBvR,KAAM,uBAAwB,CAChD8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,KACRyF,MAAO,OAGS,QAAlB,EAAAzF,KAAKkd,qBAAa,SAAEK,OACtB,CAGA,SAAIvI,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,SAAIyB,GACF,OAAOxD,KAAK2U,aAAa,UAAY,gBACvC,CAEA,SAAInR,CAAMiC,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,WAAIrD,GACF,OAAOpC,KAAK2U,aAAa,YAAc,EACzC,CAEA,WAAIvS,CAAQqD,GACVzF,KAAK6a,aAAa,UAAWpV,EAC/B,CAEA,eAAIsa,GACF,OAAO/f,KAAK2U,aAAa,gBAAkB,EAC7C,CAEA,eAAIoL,CAAYta,GACdzF,KAAK6a,aAAa,cAAepV,EACnC,CAEA,gBAAIua,GACF,OAAOhgB,KAAK2U,aAAa,kBAAoB,EAC/C,CAEA,gBAAIqL,CAAava,GACfzF,KAAK6a,aAAa,gBAAiBpV,EACrC,CAEA,eAAIkZ,GACF,OAAO3e,KAAK2U,aAAa,iBAAmB,IAC9C,CAEA,eAAIgK,CAAYlZ,GACdzF,KAAK6a,aAAa,eAAgBpV,EACpC,CAEA,cAAImZ,GACF,OAAO5e,KAAK2U,aAAa,gBAAkB,QAC7C,CAEA,cAAIiK,CAAWnZ,GACbzF,KAAK6a,aAAa,cAAepV,EACnC,CAEA,YAAI4B,GACF,OAAOrH,KAAKwV,aAAa,WAC3B,CAEA,YAAInO,CAAS5B,GACPA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,aAAI4E,GACF,OAAO1f,KAAKwV,aAAa,YAC3B,CAEA,aAAIkK,CAAUja,GACRA,EACFzF,KAAK6a,aAAa,YAAa,IAE/B7a,KAAK8a,gBAAgB,YAEzB,CAEA,SAAIrV,G,MACF,MAAMmI,EAAuB,QAAf,EAAA5N,KAAK8S,kBAAU,eAAE0D,cAAc,iBAG7C,OAAO5I,aAAK,EAALA,EAAOnI,QAAS,EACzB,CAEA,SAAIA,CAAMA,G,MACR,MAAMmI,EAAuB,QAAf,EAAA5N,KAAK8S,kBAAU,eAAE0D,cAAc,iBAGzC5I,IACFA,EAAMnI,MAAQA,EACdzF,KAAKkgB,gBAET,CAEA,QAAIjC,G,MACF,OAAyB,QAAlB,EAAAje,KAAKkd,qBAAa,eAAEe,QAAQ,CACrC,CAKO,IAAApH,GACL,OAAO,IAAIqH,QAAQ,CAACjT,EAASkT,K,QACvBne,KAAKmd,kBAEY,QAAnB,EAAAnd,KAAKod,sBAAc,mBACjB,IAAI9Y,MAAM,gDAIdtE,KAAKmd,gBAAkBlS,EACvBjL,KAAKod,eAAiBe,EAEtB5M,EAAoBvR,KAAM,qBAAsB,CAC9C8d,SAAU9d,KAAKmD,GACf4a,OAAQ/d,OAGQ,QAAlB,EAAAA,KAAKkd,qBAAa,SAAEkB,YAGpB7K,WAAW,K,MACT,MAAM3F,EAAuB,QAAf,EAAA5N,KAAK8S,kBAAU,eAAE0D,cAAc,iBAG7C5I,SAAAA,EAAO8M,QACP9M,SAAAA,EAAO0S,UACN,MAEP,CAEO,UAAAvL,CAAWC,GAChBhV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,cACtBqL,eAAe7Y,OAAO,YAAawf,G,aCjtB9B,MAAMiB,UACHjJ,YAcR,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,WAAY,UAAW,eACtD,CAEA,WAAAhK,GACEiK,QAhBM,KAAAC,OAAgB,OAEhB,KAAAuF,OAA8B,CAAC,EAC/B,KAAAwD,YAAmC,CAAC,EACpC,KAAAC,QAAiC,KACjC,KAAAC,WAAqB,EACrB,KAAAC,UAAoB,EACpB,KAAAC,aAA8B,KAC9B,KAAAC,kBAA+C,GAC/C,KAAAC,WAAwB,IAAI,EAAAlY,UAQlC5I,KAAK2X,eAEL3X,KAAK4gB,aAAe5gB,KAAK2U,aAAa,eACxC,CAEQ,YAAAgD,GACa/E,EAAc5S,MAEtB0S,UAAY,y5NA4PzB,CAEQ,eAAAqO,GACN,MAAMnd,EAAO5D,KAEbA,KAAKwgB,YAAc,IAAIQ,MAAMhhB,KAAKgd,OAAQ,CACxC,GAAAiE,CACExT,EACArM,EACAqE,GAEA,GAAmB,iBAARrE,EAAkB,CAC3B,MAAM+W,EAAW1K,EAAOrM,GACxBqM,EAAOrM,GAAOqE,EAGd7B,EAAKsd,oBAAoB9f,EAAK+W,EAAU1S,EAAO,CAACrE,IAGhDwC,EAAKud,SAGLvd,EAAKwd,cAAchgB,E,CAErB,OAAO,CACT,EAEA,cAAAigB,CACE5T,EACArM,GAEA,GAAmB,iBAARA,GAAoBA,KAAOqM,EAAQ,CAC5C,MAAM0K,EAAW1K,EAAOrM,UACjBqM,EAAOrM,GAGdwC,EAAKsd,oBAAoB9f,EAAK+W,OAAUpW,EAAW,CAACX,IAGpDwC,EAAKud,Q,CAEP,OAAO,CACT,GAEJ,CAEA,iBAAAtJ,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,oBAGvBpR,KAAK+gB,kBACL/gB,KAAKmhB,SAGAnhB,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,WACHA,KAAK0gB,UAAyB,OAAbtI,EACjBpY,KAAKmhB,SACL,MACF,IAAK,UACHnhB,KAAK2gB,SAAwB,OAAbvI,EAChB,MACF,IAAK,eACHpY,KAAK4gB,aAAexI,EACpBpY,KAAKmhB,SAGX,CAEA,UAAApM,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAEQ,MAAAmM,GACN,MAAMrO,EAAa9S,KAAK8S,WAElBwO,GADYxO,EAAW0D,cAAc,uBAC3B1D,EAAW0D,cAAc,sBAGnC+K,EAASzO,EAAW0D,cAAc,oBACxC,GAA0B,OAAtBxW,KAAK4gB,aAAuB,CAE9B,MAAMY,EACkB,KAAtBxhB,KAAK4gB,aAAsB,aAAe5gB,KAAK4gB,aACjDW,EAAOnP,YAAcoP,EACrBD,EAAOrP,MAAMsK,QAAU,O,MAGvB+E,EAAOrP,MAAMsK,QAAU,OAGe,IAApCnb,OAAO+D,KAAKpF,KAAKgd,QAAQjZ,OAM7Bud,EAAQ5O,UAAY1S,KAAKyhB,eALvBH,EAAQ5O,UACN,yDAKN,CAEQ,YAAA+O,G,QACN,MAAMC,EAAmB,GAEzB,IAAK,MAAOtgB,EAAKqE,KAAUpE,OAAOsgB,QAAQ3hB,KAAKgd,QAAS,CACtD,MAAM4E,EAAsC,QAAxB,EAAY,QAAZ,EAAA5hB,KAAKygB,eAAO,eAAE3e,kBAAU,eAAGV,GAC/CsgB,EAAO5X,KAAK9J,KAAK6hB,YAAYzgB,EAAKqE,EAAOmc,G,CAG3C,OAAOF,EAAOhe,KAAK,GACrB,CAEQ,WAAAme,CAAYzgB,EAAaqE,EAAY9E,GAI3C,GAFmB,iBAAV8E,GAAgC,OAAVA,IAAmB9C,MAAMC,QAAQ6C,GAG9D,OAAOzF,KAAK8hB,kBAAkB1gB,EAAKqE,EAAO9E,GAG5C,MAAM8b,GAAQ9b,aAAM,EAANA,EAAQ6C,QAASxD,KAAK+hB,YAAY3gB,GAC1C4gB,EAAcrhB,aAAM,EAANA,EAAQqhB,YACtB5K,EAAQpX,KAAK6gB,kBAAkBoB,KAAKjU,GAAKA,EAAE5M,MAAQA,GACnD8gB,EAAYliB,KAAKmiB,aAAa1c,EAAO9E,GACrCyhB,EAAU,SAAShhB,IAEzB,MAAO,4EAE+BghB,MAAY3F,2DAE1Czc,KAAKqiB,YAAYD,EAAShhB,EAAKqE,EAAO9E,EAAQuhB,iBAE9CF,EACI,kCAAkCA,UAClC,iBAEJ5K,EAAQ,4BAA4BA,EAAMhV,gBAAkB,wCAItE,CAEQ,iBAAA0f,CACN1gB,EACAqE,EACA9E,GAMA,MAAO,kNAJOA,aAAM,EAANA,EAAQ6C,QAASxD,KAAK+hB,YAAY3gB,8EAWxCpB,KAAKsiB,mBAAmB7c,EAAO9E,aAAM,EAANA,EAAQmB,iDAIjD,CAEQ,kBAAAwgB,CACN7c,EACA3D,GAEA,MAAM4f,EAAmB,GAEzB,IAAK,MAAOtgB,EAAKqO,KAAQpO,OAAOsgB,QAAQlc,GAAQ,CAC9C,MAAMmc,EAAc9f,aAAU,EAAVA,EAAaV,IAEd,iBAARqO,GAA4B,OAARA,GAAgB9M,MAAMC,QAAQ6M,KAC3DiS,EAAO5X,KAAK9J,KAAK6hB,YAAYzgB,EAAKqO,EAAKmS,G,CAI3C,OAAOF,EAAOhe,KAAK,GACrB,CAEQ,WAAA2e,CACNlf,EACA/B,EACAqE,EACA9E,EACAuhB,EAAoB,Q,MAEpB,MAAMvI,EAAW3Z,KAAK2Z,UAAY3Z,KAAK0gB,UAEjC6B,EADWviB,KAAK6gB,kBAAkBhe,KAAKmL,GAAKA,EAAE5M,MAAQA,GAC9B,SAAW,GAEzC,OAAQ8gB,GACN,IAAK,WACH,MAAO,8BAA8B/e,0BAA2Bof,MAC9D9c,EAAQ,UAAY,MAEpBkU,EAAW,WAAa,qDACyBvY,sBAErD,IAAK,SACH,MAAMohB,OACgBzgB,KAApBpB,aAAM,EAANA,EAAQiF,SAAwB,QAAQjF,EAAOiF,WAAa,GACxDc,OACgB3E,KAApBpB,aAAM,EAANA,EAAQoF,SAAwB,QAAQpF,EAAOoF,WAAa,GACxD0c,EACa,aAAjB9hB,aAAM,EAANA,EAAQ+B,MACJ,YACA/B,aAAM,EAANA,EAAQwG,YACR,SAASxG,EAAOwG,cAChB,GACN,MAAO,4BAA4BhE,0BAA2Bof,aAC5D9c,GAAS,OACN+c,KAAO9b,KAAO+b,KACjB9I,EAAW,WAAa,oDACwBvY,4BAEpD,IAAK,QACH,MAAMshB,OAA+B3gB,KAApBpB,aAAM,EAANA,EAAQiF,SAAwBjF,EAAOiF,QAAU,EAC5D+c,OAA+B5gB,KAApBpB,aAAM,EAANA,EAAQoF,SAAwBpF,EAAOoF,QAAU,IAC5D6c,EACa,aAAjBjiB,aAAM,EAANA,EAAQ+B,MACJ,KACA/B,aAAM,EAANA,EAAQwG,YACRxG,EAAOwG,WAAWM,WAClB,IACN,MAAO,kFAEuBtE,0BAA2Bof,aACvD9c,GAASid,WACDA,WAAkBC,YAAmBC,MAC7CjJ,EAAW,WAAa,oDACwBvY,0HAClBqE,GAASid,uCAI3C,IAAK,QAEH,MAAO,2BAA2Bvf,0BAA2Bof,aAD1C9c,GAAS,cAE1BkU,EAAW,WAAa,qDACyBvY,oBAErD,IAAK,OACH,MAAO,0BAA0B+B,0BAA2Bof,aAC1D9c,GAAS,OAETkU,EAAW,WAAa,qDACyBvY,oBAErD,IAAK,OACH,MAAO,0BAA0B+B,0BAA2Bof,aAC1D9c,GAAS,OAETkU,EAAW,WAAa,qDACyBvY,oBAErD,IAAK,iBACH,MAAO,oCAAoC+B,0BAA2Bof,aACpE9c,GAAS,OAETkU,EAAW,WAAa,qDACyBvY,oBAErD,IAAK,QACH,MAAMyhB,GAAeliB,aAAM,EAANA,EAAQoE,UAAW,GACxC,MAAO,2BAA2B5B,0BAA2Bof,aAC3D9c,GAAS,OACNod,EAAe,YAAYA,KAAkB,MAChDlJ,EAAW,WAAa,oDACwBvY,oBAEpD,IAAK,MACH,MAAO,yBAAyB+B,0BAA2Bof,aACzD9c,GAAS,OAETkU,EAAW,WAAa,oDACwBvY,oBAEpD,IAAK,MACH,MAAM0hB,GAAaniB,aAAM,EAANA,EAAQoE,UAAW,GACtC,MAAO,yBAAyB5B,0BAA2Bof,aACzD9c,GAAS,OACNqd,EAAa,YAAYA,KAAgB,MAC5CnJ,EAAW,WAAa,oDACwBvY,oBAEpD,IAAK,SACH,MAAMZ,GACQ,QAAZ,EAAAG,aAAM,EAANA,EAAQoiB,YAAI,eACR9f,IACC+f,GACC,kBAAkBA,MAChBA,IAAWvd,EAAQ,WAAa,MAC9BzF,KAAKijB,iBAAiBD,eAE7Btf,KAAK,MAAO,GACjB,MAAO,eAAeP,0BAA2Bof,MAC/C5I,EAAW,WAAa,qDACyBvY,oBAAsBZ,aAE3E,IAAK,WAKH,MAAO,iBAAiB2C,0BAA2Bof,aAJtC5hB,aAAM,EAANA,EAAQoH,YAAapH,EAAOoH,UAAY,IAAM,IAAM,SAC/CpH,aAAM,EAANA,EAAQoH,WACtB,cAAcpH,EAAOoH,aACrB,MAEF4R,EAAW,WAAa,oDACwBvY,oBAChDqE,GAAS,gBAGb,QACE,MAAMV,GAAUpE,aAAM,EAANA,EAAQoE,SAAU,YAAYpE,EAAOoE,WAAa,GAC5Dme,GAAgBviB,aAAM,EAANA,EAAQoH,WAC1B,cAAcpH,EAAOoH,aACrB,GACEF,GAAYlH,aAAM,EAANA,EAAQkH,WACtB,cAAclH,EAAOkH,aACrB,GAGJ,OAAIlH,aAAM,EAANA,EAAQoH,YAAapH,EAAOoH,UAAY,IACnC/H,KAAKqiB,YAAYlf,EAAI/B,EAAKqE,EAAO9E,EAAQ,YAG3C,0BAA0BwC,0BAA2Bof,aAC1D9c,GAAS,OACNV,KAAWme,KAAiBrb,KAC/B8R,EAAW,WAAa,oDACwBvY,oBAExD,CAEQ,gBAAA6hB,CAAiBD,GACvB,MAAsB,iBAAXA,EAEFA,EACJtU,QAAQ,WAAY,OACpBA,QAAQ,KAAM,KACdA,QAAQ,KAAMyU,GAAOA,EAAIC,eACzBzQ,OAEEpK,OAAOya,EAChB,CAEQ,YAAAb,CAAa1c,EAAY9E,GAE/B,IAAIA,aAAM,EAANA,EAAQoiB,OAAQpgB,MAAMC,QAAQjC,EAAOoiB,MACvC,MAAO,SAIT,GAAIpiB,aAAM,EAANA,EAAQ+G,OACV,OAAQ/G,EAAO+G,QACb,IAAK,QACH,MAAO,QACT,IAAK,MACL,IAAK,MACH,MAAO,MACT,IAAK,OACH,MAAO,OACT,IAAK,OACH,MAAO,OACT,IAAK,YACH,MAAO,iBACT,IAAK,QACH,MAAO,QACT,IAAK,MACL,IAAK,YACH,MAAO,MAKb,GAAqB,YAAjB/G,aAAM,EAANA,EAAQ+B,OAAsC,aAAjB/B,aAAM,EAANA,EAAQ+B,MACvC,YAAuBX,IAAnBpB,EAAOiF,cAA4C7D,IAAnBpB,EAAOoF,SAE3BpF,EAAOoF,QAAUpF,EAAOiF,SACzB,KAAuB,YAAhBjF,EAAO+B,KAClB,QAGJ,SAIT,cAAe+C,GACb,IAAK,UACH,MAAO,WACT,IAAK,SAEH,YAAwB1D,KAApBpB,aAAM,EAANA,EAAQiF,eAA6C7D,KAApBpB,aAAM,EAANA,EAAQoF,UAC7BpF,EAAOoF,QAAUpF,EAAOiF,SACzB,KAAO2J,OAAO8T,UAAU5d,GAC5B,QAGJ,SACT,QAEE,GAAqB,iBAAVA,EAAoB,CAC7B,GAAIA,EAAMmP,SAAS,MAAQnP,EAAMmP,SAAS,KACxC,MAAO,QAET,GAAInP,EAAM6d,WAAW,SAAW7d,EAAM6d,WAAW,QAC/C,MAAO,MAET,GAAI7d,EAAM+B,MAAM,qBACd,MAAO,QAET,GAAI/B,EAAM+B,MAAM,uBACd,MAAO,OAET,GAAI/B,EAAM+B,MAAM,0BACd,MAAO,OAET,GAAI/B,EAAM+B,MAAM,gBACd,MAAO,K,CAGX,MAAO,OAEb,CAEQ,WAAAua,CAAY3gB,GAClB,OAAOA,EACJsN,QAAQ,WAAY,OACpBA,QAAQ,KAAMyU,GAAOA,EAAIC,eACzBzQ,MACL,CAEQ,mBAAAuO,CACN9f,EACA+W,EACAC,EACAjN,GAEAoG,EAAoBvR,KAAM,kBAAmB,CAC3CoB,MACA+W,WACAC,WACAjN,OACAiV,QAASpgB,KAAKogB,WAElB,CAEQ,aAAAgB,CAAchgB,G,QAEpBpB,KAAK6gB,kBAAoB7gB,KAAK6gB,kBAAkB1c,OAAO6J,GAAKA,EAAE5M,MAAQA,GAEtE,MAAMqE,EAAQzF,KAAKgd,OAAO5b,GACpBT,EAAiC,QAAxB,EAAY,QAAZ,EAAAX,KAAKygB,eAAO,eAAE3e,kBAAU,eAAGV,GAE1C,IAAKT,EAAQ,OAGb,MAAMqD,EAAShE,KAAKujB,cAAcniB,EAAKqE,EAAO9E,EAAQ,CAACS,IACvDpB,KAAK6gB,kBAAkB/W,QAAQ9F,GAG/BuN,EAAoBvR,KAAM,sBAAuB,CAC/CogB,QAA2C,IAAlCpgB,KAAK6gB,kBAAkB9c,OAChCC,OAAQhE,KAAK6gB,mBAEjB,CAEQ,aAAA0C,CACNniB,EACAqE,EACA9E,EACAwK,G,MAEA,MAAMnH,EAAoC,GAG1C,GAAIhE,KAAKygB,QAAS,CAEhB,MAAM+C,EAAa,CAAE,CAACpiB,GAAMqE,GACtBge,EAAa,CACjB/gB,KAAM,SACNZ,WAAY,CAAE,CAACV,GAAMT,GACrB0G,UAA+B,QAArB,EAAArH,KAAKygB,QAAQpZ,gBAAQ,eAAEuN,SAASxT,IAAO,CAACA,GAAO,IAGrDQ,EAAS5B,KAAK8gB,WAAWvW,SAASiZ,EAAYC,GAEpD,IAAK7hB,EAAOZ,MACV,IAAK,MAAMoW,KAASxV,EAAOoC,OAAQ,CAEjC,IAAI5B,EAAUpC,KAAK0jB,sBAAsBtM,EAAOzW,GAEhDqD,EAAO8F,KAAK,CACV1I,MACA+J,OACA/I,W,EAMR,OAAO4B,CACT,CAEQ,qBAAA0f,CAAsBtM,EAAYzW,G,MACxC,MAAM,KAAEuB,EAAI,QAAEE,EAAO,SAAED,GAAaiV,EAEpC,OAAQlV,GACN,IAAK,WACH,MAAO,yBAET,IAAK,OACH,MAAMyhB,EAAexhB,EACrB,OAAQwhB,GACN,IAAK,SACH,MAAO,eACT,IAAK,SACH,MAAO,mBACT,IAAK,UACH,MAAO,yBACT,IAAK,UACH,MAAO,wBACT,QACE,MAAO,aAAaA,IAG1B,IAAK,UACH,MAAO,oBAAoBxhB,IAE7B,IAAK,UACH,MAAO,wBAAwBA,IAEjC,IAAK,YACH,MAAO,oBAAoBA,oBAE7B,IAAK,YACH,MAAO,wBAAwBA,oBAEjC,IAAK,UAEH,GAAIxB,aAAM,EAANA,EAAQ+G,OACV,OAAQ/G,EAAO+G,QACb,IAAK,QACH,MAAO,gCACT,IAAK,MACL,IAAK,MACH,MAAO,sBACT,IAAK,OACH,MAAO,oCACT,IAAK,OACH,MAAO,+BACT,IAAK,QACH,MAAO,wCACT,QACE,MAAO,qCAGb,MAAO,sCAET,IAAK,OAEH,MAAO,oBADyB,QAAZ,EAAA/G,aAAM,EAANA,EAAQoiB,YAAI,eAAErf,KAAK,QAAS,iBAGlD,IAAK,aACH,MAAO,yBAAyBvB,IAElC,QAEE,OACEC,EACGsM,QAAQ,qBAAsB,IAC9BA,QAAQ,MAAO,IACfiE,QAAU,gBAGrB,CAGO,WAAAiR,CAAYxiB,EAAaqE,GAC9BzF,KAAKwgB,YAAYpf,GAAOqE,CAC1B,CAEO,QAAAoe,GACL,MAAO,IAAK7jB,KAAKgd,OACnB,CAEO,QAAA8G,CAASre,GACdzF,KAAKgd,OAAS,IAAKvX,GACnBzF,KAAK+gB,kBACL/gB,KAAKmhB,SACLnhB,KAAKuK,UACP,CAEO,SAAAwZ,CAAUpjB,GACfX,KAAKygB,QAAU9f,EACfX,KAAKmhB,SACLnhB,KAAKuK,UACP,CAEO,QAAAA,G,MAGL,GAFAvK,KAAK6gB,kBAAoB,IAEpB7gB,KAAKygB,QACR,MAAO,CAAEL,SAAS,EAAMpc,OAAQ,IAIlC,MAAMpC,EAAS5B,KAAK8gB,WAAWvW,SAASvK,KAAKgd,OAAQhd,KAAKygB,SAE1D,IAAK7e,EAAOZ,MACV,IAAK,MAAMoW,KAASxV,EAAOoC,OAAQ,CAEjC,MAAMsE,EAAe8O,EAAMzV,SAAS+M,QAAQ,YAAa,IAAIO,MAAM,KAC7D7N,EAAMkH,EAAa,IAAM,OACzBsZ,EAAqC,QAAvB,EAAA5hB,KAAKygB,QAAQ3e,kBAAU,eAAGV,GAExCgB,EAAUpC,KAAK0jB,sBAAsBtM,EAAOwK,GAElD5hB,KAAK6gB,kBAAkB/W,KAAK,CAC1B1I,MACA+J,KAAM7C,EACNlG,W,CAKN,MAAM4hB,EAAmB,CACvB5D,QAA2C,IAAlCpgB,KAAK6gB,kBAAkB9c,OAChCC,OAAQhE,KAAK6gB,mBAIf,OADAtP,EAAoBvR,KAAM,sBAAuBgkB,GAC1CA,CACT,CAEO,OAAA5D,GACL,OAAyC,IAAlCpgB,KAAK6gB,kBAAkB9c,MAChC,CAEO,UAAAkgB,CAAW7iB,G,MAChB,MAAMwM,EAAuB,QAAf,EAAA5N,KAAK8S,kBAAU,eAAE0D,cAC7B,UAAUpV,KAEZwM,SAAAA,EAAO8M,OACT,CAGA,SAAI1F,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,YAAIkU,GACF,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAImE,CAASlU,GACPA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,YAAIoJ,GACF,OAAOlkB,KAAK0gB,SACd,CAEA,YAAIwD,CAASze,GACXzF,KAAK0gB,UAAYjb,EACbA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,WAAIqJ,GACF,OAAOnkB,KAAK2gB,QACd,CAEA,WAAIwD,CAAQ1e,GACVzF,KAAK2gB,SAAWlb,EACZA,EACFzF,KAAK6a,aAAa,UAAW,IAE7B7a,KAAK8a,gBAAgB,UAEzB,CAEA,SAAIrV,GACF,OAAOzF,KAAK6jB,UACd,CAEA,SAAIpe,CAAMA,GACRzF,KAAK8jB,SAASre,EAChB,CAEA,UAAI9E,GACF,OAAOX,KAAKygB,OACd,CAEA,UAAI9f,CAAO8E,GACLA,EACFzF,KAAK+jB,UAAUte,IAEfzF,KAAKygB,QAAU,KACfzgB,KAAKmhB,SAET,CAEA,eAAIiD,GACF,OAAOpkB,KAAK4gB,YACd,CAEA,eAAIwD,CAAY3e,GACdzF,KAAK4gB,aAAenb,EACN,OAAVA,EACFzF,KAAK6a,aAAa,eAAgBpV,GAElCzF,KAAK8a,gBAAgB,eAEzB,EAIGnC,eAAerL,IAAI,uBACtBqL,eAAe7Y,OAAO,qBAAsBygB,GC3hCvC,MAAM8D,UAAiB/M,YAU5B,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,YAAa,eAC5C,CAEA,WAAAhK,GACEiK,QAdM,KAAAC,OAAgB,OAEhB,KAAA6M,OAAyB,GACzB,KAAAC,SAA6B,GAC7B,KAAAC,UAA0B,OAC1B,KAAAC,cAAwB,EACxB,KAAAC,eAA8B,IAAIC,IAClC,KAAAC,oBAA8B,EAQpC5kB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,suOAqPvB1S,KAAK6kB,oBACP,CAEQ,kBAAAA,G,MACN,MAAMvf,EAAuB,QAAf,EAAAtF,KAAK8S,kBAAU,eAAE0D,cAAc,mBACxClR,IAELA,EAAMoQ,iBAAiB,QAAS1V,KAAK8kB,gBAAgB/hB,KAAK/C,OAC1DsF,EAAMoQ,iBAAiB,WAAY1V,KAAK+kB,sBAAsBhiB,KAAK/C,OACrE,CAEQ,eAAA8kB,CAAgBpT,GACtB,MACMsT,EADStT,EAAMjE,OACMmP,QAAQ,kBAEnC,IAAKoI,GAAeA,EAAY/P,UAAUtP,SAAS,YACjD,OAGF,MAAMkX,EAASmI,EAAYC,QAAQpI,OACnC,IAAKA,EAAQ,OAEb,MAAMlQ,EAAO3M,KAAKskB,OAAOrC,KAAK1e,GAAKA,EAAEJ,KAAO0Z,GAC5C,IAAKlQ,EAAM,OAEX,MAAMiN,EAAalI,GACb,QAAEwT,EAAO,SAAE/E,EAAQ,OAAEgF,GAAWvL,EAGtC5Z,KAAKolB,oBAAoBvI,EAAQqI,EAAS/E,GAG1C5O,EACEvR,KACA,sBACA,CACEqlB,WAAYrlB,KAAKmD,GACjBmiB,SAAUtlB,KACV2M,OACAkQ,SACAqI,UACA/E,WACAgF,UAGN,CAEQ,qBAAAJ,CAAsBrT,GAC5B,MACMsT,EADStT,EAAMjE,OACMmP,QAAQ,kBAEnC,IAAKoI,GAAeA,EAAY/P,UAAUtP,SAAS,YACjD,OAGF,MAAMkX,EAASmI,EAAYC,QAAQpI,OACnC,IAAKA,EAAQ,OAEb,MAAMlQ,EAAO3M,KAAKskB,OAAOrC,KAAK1e,GAAKA,EAAEJ,KAAO0Z,GACvClQ,GAGL4E,EACEvR,KACA,6BACA,CACEqlB,WAAYrlB,KAAKmD,GACjBmiB,SAAUtlB,KACV2M,OACAkQ,UAGN,CAEQ,mBAAAuI,CACNvI,EACAqI,EACA/E,GAEA,MAAMoF,EAAYvlB,KAAKskB,OAAO9J,UAAUjX,GAAKA,EAAEJ,KAAO0Z,GACtD,IAAmB,IAAf0I,EAAkB,OAEtB,MAAMC,EAAoB,IAAIb,IAAI3kB,KAAK0kB,gBAEvC,GAAI1kB,KAAKykB,cAAgBtE,IAAyC,IAA7BngB,KAAK4kB,mBAA2B,CAEnE,MAAMa,EAAQhf,KAAK+b,IAAIxiB,KAAK4kB,mBAAoBW,GAC1CG,EAAMjf,KAAKC,IAAI1G,KAAK4kB,mBAAoBW,GAEzCL,GACHllB,KAAK0kB,eAAeiB,QAGtB,IAAK,IAAIpiB,EAAIkiB,EAAOliB,GAAKmiB,EAAKniB,IAC5BvD,KAAK0kB,eAAevP,IAAInV,KAAKskB,OAAO/gB,GAAGJ,G,MAEhCnD,KAAKykB,cAAgBS,EAE1BllB,KAAK0kB,eAAekB,IAAI/I,GAC1B7c,KAAK0kB,eAAemB,OAAOhJ,GAE3B7c,KAAK0kB,eAAevP,IAAI0H,IAI1B7c,KAAK0kB,eAAeiB,QACpB3lB,KAAK0kB,eAAevP,IAAI0H,IAG1B7c,KAAK4kB,mBAAqBW,EAC1BvlB,KAAK8lB,qBACL9lB,KAAK+lB,wBAAwBP,EAC/B,CAEQ,uBAAAO,CAAwBP,GAC9B,MAAMQ,EAAgBhmB,KAAKskB,OAAOngB,OAAOwI,GACvC3M,KAAK0kB,eAAekB,IAAIjZ,EAAKxJ,KAEzB8iB,EAAajmB,KAAKskB,OAAOngB,OAC7BwI,GACE3M,KAAK0kB,eAAekB,IAAIjZ,EAAKxJ,MAAQqiB,EAAkBI,IAAIjZ,EAAKxJ,KAE9D+iB,EAAelmB,KAAKskB,OAAOngB,OAC/BwI,IACG3M,KAAK0kB,eAAekB,IAAIjZ,EAAKxJ,KAAOqiB,EAAkBI,IAAIjZ,EAAKxJ,KAGpEoO,EACEvR,KACA,4BACA,CACEqlB,WAAYrlB,KAAKmD,GACjBmiB,SAAUtlB,KACVgmB,gBACAG,YAAaxjB,MAAM+M,KAAK1P,KAAK0kB,gBAC7BuB,aACAC,gBAGN,CAEQ,MAAA/E,GACDnhB,KAAK8S,aAEV9S,KAAKomB,eACLpmB,KAAKqmB,gBACP,CAEQ,YAAAD,G,MACN,GAAuB,YAAnBpmB,KAAKwkB,WAAoD,IAAzBxkB,KAAKukB,SAASxgB,OAChD,OAGF,MAAMuiB,EAA2B,QAAf,EAAAtmB,KAAK8S,kBAAU,eAAE0D,cAAc,wBAC5C8P,IAELA,EAAU5T,UAAY,GAEtB1S,KAAKukB,SAAS1gB,QAAQ0iB,IACpB,MAAMC,EAAOza,SAASoG,cAAc,OACpCqU,EAAK5I,UAAY,uBACjB4I,EAAKpU,YAAcmU,EAAO9J,MAC1B+J,EAAKvB,QAAQwB,SAAWF,EAAOpjB,GAE3BojB,EAAO7K,QACmB,iBAAjB6K,EAAO7K,MAChB8K,EAAKtU,MAAMwU,KAAO,OAAOH,EAAO7K,UAEhC8K,EAAKtU,MAAMwU,KAAO,OAAOH,EAAO7K,SAIpC4K,EAAUhU,YAAYkU,KAE1B,CAEQ,aAAAH,G,MACN,MAAMM,EAAgC,QAAf,EAAA3mB,KAAK8S,kBAAU,eAAE0D,cAAc,mBACtD,GAAKmQ,EAAL,CAIA,GAFAA,EAAejU,UAAY,GAEA,IAAvB1S,KAAKskB,OAAOvgB,OAAc,CAC5B,MAAM6iB,EAAa7a,SAASoG,cAAc,OAI1C,OAHAyU,EAAWhJ,UAAY,cACvBgJ,EAAWxU,YAAc,2BACzBuU,EAAerU,YAAYsU,E,CAI7B5mB,KAAKskB,OAAOzgB,QAAQ8I,IAClB,MAAMqY,EAAchlB,KAAK6mB,kBAAkBla,GAC3Cga,EAAerU,YAAY0S,IAdF,CAgB7B,CAEQ,iBAAA6B,CAAkBla,GACxB,MAAMqY,EAAcjZ,SAASoG,cAAc,OAY3C,GAXA6S,EAAYpH,UAAY,gBACxBoH,EAAYC,QAAQpI,OAASlQ,EAAKxJ,GAE9BwJ,EAAKgN,UACPqL,EAAY/P,UAAUE,IAAI,YAGxBnV,KAAK0kB,eAAekB,IAAIjZ,EAAKxJ,KAC/B6hB,EAAY/P,UAAUE,IAAI,YAGL,YAAnBnV,KAAKwkB,WAA2BxkB,KAAKukB,SAASxgB,OAAS,EACzD/D,KAAKukB,SAAS1gB,QAAQ0iB,IACpB,MAAMC,EAAOza,SAASoG,cAAc,OACpCqU,EAAK5I,UAAY,qBAEb2I,EAAO7K,QACmB,iBAAjB6K,EAAO7K,MAChB8K,EAAKtU,MAAMwU,KAAO,OAAOH,EAAO7K,UAEhC8K,EAAKtU,MAAMwU,KAAO,OAAOH,EAAO7K,SAIpC,IAAIjW,EAAQ,GACM,UAAd8gB,EAAOpjB,GACTsC,EAAQkH,EAAK8P,MACU,SAAd8J,EAAOpjB,GAChBsC,EAAQkH,EAAK4P,MAAQ,GACZ5P,EAAKma,WAAiC/kB,IAAzB4K,EAAKma,KAAKP,EAAOpjB,MACvCsC,EAAQkH,EAAKma,KAAKP,EAAOpjB,KAGvBojB,EAAOQ,SACTP,EAAK9T,UAAY6T,EAAOQ,SAASpa,EAAMlH,GAEvC+gB,EAAKpU,YAAc7J,OAAO9C,GAG5Buf,EAAY1S,YAAYkU,SAErB,CAEL,GAAI7Z,EAAK4P,KAAM,CACb,MAAMH,EAAcrQ,SAASoG,cAAc,QAC3CiK,EAAYwB,UAAY,qBACxBxB,EAAYhK,YAAczF,EAAK4P,KAC/ByI,EAAY1S,YAAY8J,E,CAG1B,MAAMC,EAAetQ,SAASoG,cAAc,QAC5CkK,EAAauB,UAAY,sBACzBvB,EAAajK,YAAczF,EAAK8P,MAChCuI,EAAY1S,YAAY+J,E,CAG1B,OAAO2I,CACT,CAEQ,kBAAAc,GACD9lB,KAAK8S,YAEW9S,KAAK8S,WAAW4G,iBAAiB,kBACzC7V,QAAQ2N,IACnB,MAAMqL,EAAUrL,EAAwByT,QAAQpI,OAC5CA,GACFrL,EAAQyD,UAAUoL,OAAO,WAAYrgB,KAAK0kB,eAAekB,IAAI/I,KAGnE,CAEA,iBAAAhF,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,aAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAK7CA,KAAKmhB,QACP,CAEA,oBAAApJ,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACCkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cACdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,YACHA,KAAKgnB,SAAY5O,GAA6B,OAC9C,MACF,IAAK,eACHpY,KAAKinB,YAA2B,OAAb7O,EAGzB,CAGA,SAAIpD,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EACVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAWtP,EAClB,CAEA,SAAIH,GACF,MAAO,IAAItF,KAAKskB,OAClB,CAEA,SAAIhf,CAAMG,GACRzF,KAAKskB,OAAS,IAAI7e,GAClBzF,KAAK0kB,eAAeiB,QACpB3lB,KAAK4kB,oBAAsB,EACvB5kB,KAAKkW,aACPlW,KAAKmhB,QAET,CAEA,WAAI+F,GACF,MAAO,IAAIlnB,KAAKukB,SAClB,CAEA,WAAI2C,CAAQzhB,GACVzF,KAAKukB,SAAW,IAAI9e,GAChBzF,KAAKkW,aACPlW,KAAKmhB,QAET,CAEA,YAAI6F,GACF,OAAOhnB,KAAKwkB,SACd,CAEA,YAAIwC,CAASvhB,GACXzF,KAAKwkB,UAAY/e,EACjBzF,KAAK6a,aAAa,YAAapV,GAC3BzF,KAAKkW,aACPlW,KAAKmhB,QAET,CAEA,eAAI8F,GACF,OAAOjnB,KAAKykB,YACd,CAEA,eAAIwC,CAAYxhB,GACdzF,KAAKykB,aAAehf,EAChBA,EACFzF,KAAK6a,aAAa,eAAgB,IAElC7a,KAAK8a,gBAAgB,eAEzB,CAEA,iBAAIkL,GACF,OAAOhmB,KAAKskB,OAAOngB,OAAOwI,GAAQ3M,KAAK0kB,eAAekB,IAAIjZ,EAAKxJ,IACjE,CAEA,eAAIgjB,GACF,OAAOxjB,MAAM+M,KAAK1P,KAAK0kB,eACzB,CAGA,UAAA3P,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAEA,UAAAmS,CAAWtK,GACJ7c,KAAKykB,cACRzkB,KAAK0kB,eAAeiB,QAEtB3lB,KAAK0kB,eAAevP,IAAI0H,GACxB7c,KAAK8lB,oBACP,CAEA,YAAAsB,CAAavK,GACX7c,KAAK0kB,eAAemB,OAAOhJ,GAC3B7c,KAAK8lB,oBACP,CAEA,SAAAuB,GACOrnB,KAAKykB,eAEVzkB,KAAKskB,OAAOzgB,QAAQ8I,IACbA,EAAKgN,UACR3Z,KAAK0kB,eAAevP,IAAIxI,EAAKxJ,MAGjCnD,KAAK8lB,qBACP,CAEA,WAAAwB,GACEtnB,KAAK0kB,eAAeiB,QACpB3lB,KAAK8lB,oBACP,CAEA,mBAAAyB,CAAoB1K,GACd7c,KAAK0kB,eAAekB,IAAI/I,GAC1B7c,KAAKonB,aAAavK,GAElB7c,KAAKmnB,WAAWtK,EAEpB,CAEA,gBAAA2K,CAAiBC,GACf,MAAMjC,EAAoB,IAAIb,IAAI3kB,KAAK0kB,gBACvC1kB,KAAK0kB,eAAeiB,QAEpB8B,EAAQ5jB,QAAQV,IACVnD,KAAKskB,OAAOrC,KAAKtV,GAAQA,EAAKxJ,KAAOA,IACvCnD,KAAK0kB,eAAevP,IAAIhS,KAI5BnD,KAAK8lB,qBACL9lB,KAAK+lB,wBAAwBP,EAC/B,CAEA,YAAAkC,CAAa7K,G,MACX,MAAMmI,EAA6B,QAAf,EAAAhlB,KAAK8S,kBAAU,eAAE0D,cACnC,kBAAkBqG,OAEhBmI,GACFA,EAAY2C,eAAe,CAAEC,SAAU,SAAUC,MAAO,WAE5D,CAEA,OAAAC,CAAQjL,GACN,OAAO7c,KAAKskB,OAAOrC,KAAKtV,GAAQA,EAAKxJ,KAAO0Z,EAC9C,CAEA,OAAAkL,CAAQpb,GACN3M,KAAKskB,OAAOxa,KAAK6C,GACb3M,KAAKkW,aACPlW,KAAKmhB,QAET,CAEA,UAAA6G,CAAWnL,GACT,MAAMoL,EAAQjoB,KAAKskB,OAAO9J,UAAU7N,GAAQA,EAAKxJ,KAAO0Z,GACxD,OAAe,IAAXoL,IACFjoB,KAAKskB,OAAO4D,OAAOD,EAAO,GAC1BjoB,KAAK0kB,eAAemB,OAAOhJ,GACvB7c,KAAKkW,aACPlW,KAAKmhB,UAEA,EAGX,CAEA,UAAAgH,CAAWtL,EAAgBuL,GACzB,MAAMzb,EAAO3M,KAAKskB,OAAOrC,KAAK1e,GAAKA,EAAEJ,KAAO0Z,GAC5C,QAAIlQ,IACFtL,OAAOgnB,OAAO1b,EAAMyb,GAChBpoB,KAAKkW,aACPlW,KAAKmhB,UAEA,EAGX,CAEA,OAAAmH,GACEtoB,KAAKmhB,QACP,EAIGxI,eAAerL,IAAI,iBACtBqL,eAAe7Y,OAAO,eAAgBukB,GCtwBjC,MAAMkE,UACHjR,YAUR,6BAAWC,GACT,MAAO,CACL,OACA,QACA,UACA,UACA,cACA,aACA,QAEJ,CAEA,WAAAhK,GACEiK,QApBM,KAAAC,OAAgB,OAChB,KAAA+Q,WAA4B,KAC5B,KAAA3P,UAAoB,EACpB,KAAAsE,gBAAuC,KACvC,KAAAC,eAAkD,KAiBxDpd,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,i6KA4LvB1S,KAAKyoB,sBACLzoB,KAAKkc,eACP,CAEQ,mBAAAuM,G,QACN,MAAM1J,EAA6B,QAAf,EAAA/e,KAAK8S,kBAAU,eAAE0D,cAAc,uBAC7CJ,EAA8B,QAAf,EAAApW,KAAK8S,kBAAU,eAAE0D,cAAc,iBAEhDuI,GACFA,EAAYrJ,iBAAiB,QAAS1V,KAAK0oB,iBAAiB3lB,KAAK/C,OAG/DoW,GACFA,EAAaV,iBACX,QACA1V,KAAK2oB,wBAAwB5lB,KAAK/C,MAGxC,CAEQ,gBAAA0oB,CAAiBhX,GACvBA,EAAMoI,kBACN9Z,KAAK4oB,SACP,CAEQ,uBAAAD,GACNpX,EAAoBvR,KAAM,qBAAsB,CAC9C6oB,eAAgB7oB,KAAKmD,GACrBiT,aAAcpW,KACd0C,KAAM1C,KAAK0C,MAEf,CAEQ,aAAAwZ,GACN,MAAMpJ,EAAa9S,KAAK8S,WACxB,IAAKA,EAAY,OAEjB,MAAMsJ,EAActJ,EAAW0D,cAAc,sBACvCgH,EAAe1K,EAAW0D,cAAc,uBACxCiH,EAAiB3K,EAAW0D,cAAc,yBAOhD,GALI4F,IACFA,EAAYwB,UAAY,0BAA0B5d,KAAK0C,OACvD0Z,EAAYhK,YAAcpS,KAAK6d,eAAe7d,KAAK0C,OAGjD8a,EAAc,CAChB,MAAMha,EAAQxD,KAAKwD,MACfA,GACFga,EAAapL,YAAc5O,EAC1Bga,EAA6BtL,MAAMsK,QAAU,SAE7CgB,EAA6BtL,MAAMsK,QAAU,M,CAI9CiB,IACFA,EAAerL,YAAcpS,KAAKoC,QAEtC,CAEQ,cAAAyb,CAAenb,GACrB,OAAQA,GACN,IAAK,UACH,MAAO,IACT,IAAK,UACH,MAAO,IACT,IAAK,QACH,MAAO,IAET,QACE,MAAO,IAEb,CAEQ,YAAAomB,G,MACN9oB,KAAKqT,eAEL,MAAMF,EAAUnT,KAAKmT,QACrB,GAAIA,GAAW,GAAKnT,KAAKuW,WAAY,OAErC,MAAMwS,EAA6B,QAAf,EAAA/oB,KAAK8S,kBAAU,eAAE0D,cACnC,0BAEEuS,IACFA,EAAY7W,MAAMwJ,MAAQ,OAC1BqN,EAAY7W,MAAM8W,mBAAqB,GAAG7V,MAG1CgI,sBAAsB,KACpB4N,EAAY7W,MAAMwJ,MAAQ,QAI9B1b,KAAKwoB,WAAalV,OAAOC,WAAW,KAClCvT,KAAKwZ,QACJrG,EACL,CAEQ,YAAAE,GACkB,OAApBrT,KAAKwoB,aACPlV,OAAOD,aAAarT,KAAKwoB,YACzBxoB,KAAKwoB,WAAa,KAEtB,CAEA,iBAAA3Q,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,iBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GACE/X,KAAKqT,eAGDrT,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,OACL,IAAK,QACL,IAAK,UACHlC,KAAKkc,gBACL,MACF,IAAK,QAGC9D,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,UACL,IAAK,aACCA,KAAK6Y,UACP7Y,KAAK8oB,eAIb,CAGA,SAAI9T,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,QAAIW,GACF,OAAQ1C,KAAK2U,aAAa,SAAgC,MAC5D,CAEA,QAAIjS,CAAK+C,GACPzF,KAAK6a,aAAa,OAAQpV,EAC5B,CAEA,SAAIjC,GACF,OAAOxD,KAAK2U,aAAa,UAAY,EACvC,CAEA,SAAInR,CAAMiC,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,WAAIrD,GACF,OAAOpC,KAAK2U,aAAa,YAAc,iCACzC,CAEA,WAAIvS,CAAQqD,GACVzF,KAAK6a,aAAa,UAAWpV,EAC/B,CAEA,WAAI0N,GACF,OAAOrF,SAAS9N,KAAK2U,aAAa,YAAc,OAAQ,GAC1D,CAEA,WAAIxB,CAAQ1N,GACVzF,KAAK6a,aAAa,UAAWpV,EAAMgC,WACrC,CAEA,eAAI6O,GACF,MAA4C,UAArCtW,KAAK2U,aAAa,cAC3B,CAEA,eAAI2B,CAAY7Q,GACdzF,KAAK6a,aAAa,cAAepV,EAAMgC,WACzC,CAEA,cAAI8O,GACF,OAAOvW,KAAKwV,aAAa,aAC3B,CAEA,cAAIe,CAAW9Q,GACTA,EACFzF,KAAK6a,aAAa,aAAc,IAEhC7a,KAAK8a,gBAAgB,aAEzB,CAEA,WAAIC,GACF,OAAO/a,KAAK6Y,QACd,CAKO,IAAAhC,GACL,OAAO,IAAIqH,QAAQ,CAACjT,EAASkT,K,MACvBne,KAAKmd,kBAEY,QAAnB,EAAAnd,KAAKod,sBAAc,mBACjB,IAAI9Y,MAAM,sDAIdtE,KAAKmd,gBAAkBlS,EACvBjL,KAAKod,eAAiBe,EAEtBne,KAAK6Y,UAAW,EAChB7Y,KAAKiV,UAAUE,IAAI,WAEnB5D,EAAoBvR,KAAM,oBAAqB,CAC7C6oB,eAAgB7oB,KAAKmD,GACrBiT,aAAcpW,KACd0C,KAAM1C,KAAK0C,OAGb1C,KAAK8oB,gBAET,CAKO,IAAAtP,GACAxZ,KAAK6Y,WAEV7Y,KAAK6Y,UAAW,EAChB7Y,KAAKiV,UAAUC,OAAO,WACtBlV,KAAKqT,eAEL9B,EAAoBvR,KAAM,oBAAqB,CAC7C6oB,eAAgB7oB,KAAKmD,GACrBiT,aAAcpW,KACd0C,KAAM1C,KAAK0C,OAIb6Q,WAAW,KACLvT,KAAKmd,kBACPnd,KAAKmd,kBACLnd,KAAKmd,gBAAkB,KACvBnd,KAAKod,eAAiB,OAEvB,KACL,CAKO,OAAAwL,GACLrX,EAAoBvR,KAAM,uBAAwB,CAChD6oB,eAAgB7oB,KAAKmD,GACrBiT,aAAcpW,KACd0C,KAAM1C,KAAK0C,OAGb1C,KAAKwZ,MACP,CAEO,UAAAzE,CAAWC,GAChBhV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,oBACtBqL,eAAe7Y,OAAO,kBAAmByoB,GC7gBpC,MAAMU,UACH3R,YAOR,6BAAWC,GACT,MAAO,CACL,WACA,oBACA,kBACA,UACA,QAEJ,CAEA,WAAAhK,GACEiK,QAfM,KAAAC,OAAgB,OAChB,KAAAyR,UAAqC,KAe3ClpB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,i9HAqJvB1S,KAAKmpB,uBACP,CAEQ,qBAAAA,GACNnpB,KAAKkpB,UAAY,IAAIE,iBAAiBC,IACpCA,EAAUxlB,QAAQylB,IACM,cAAlBA,EAAS5mB,OACX1C,KAAKupB,sBACLvpB,KAAKwpB,mCAKXxpB,KAAKkpB,UAAUO,QAAQzpB,KAAM,CAC3B0pB,WAAW,EACXC,SAAS,GAEb,CAEQ,mBAAAJ,GACN,MAAMK,EAAgB5pB,KAAK0Z,iBAAiB,mBACtCmQ,EAAmB7pB,KAAK6pB,iBAE9B,GAAIA,EAAmB,GAAKD,EAAc7lB,OAAS8lB,EAAkB,CAEnE,MAAMC,EAASF,EAAc7lB,OAAS8lB,EACtC,IAAK,IAAItmB,EAAI,EAAGA,EAAIumB,EAAQvmB,IAAK,CAC/B,MAAM6S,EAAewT,EAAcrmB,GACC,mBAAzB6S,EAAawS,QACtBxS,EAAawS,UAEbxS,EAAalB,Q,EAMnB3D,EAAoBvR,KAAM,gCAAiC,CACzD+pB,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,KACX4W,SAAU5W,KAAK4W,SACf1S,MAAO0lB,EAAc7lB,QAEzB,CAEQ,2BAAAylB,GACN,MAAMI,EAAgB5pB,KAAK0Z,iBAAiB,mBAE5CkQ,EAAc/lB,QAAQ,CAACuS,EAAc6R,KAGjB,SAAhBjoB,KAAKyX,QACuC,mBAApCrB,EAAqBrB,aAE5BqB,EAAqBpB,MAAQhV,KAAKyX,QAIpCrB,EAA6BlE,MAAM8X,QAClC,IACAJ,EAAc7lB,OACdkkB,GACAxgB,YAEN,CAEA,iBAAAoQ,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,2BAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAK7CA,KAAKwpB,6BACP,CAEA,oBAAAzR,GACM/X,KAAKkpB,YACPlpB,KAAKkpB,UAAUe,aACfjqB,KAAKkpB,UAAY,MAIflpB,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,WACL,IAAK,kBACL,IAAK,UAEH,MACF,IAAK,oBACHlC,KAAKupB,sBACL,MACF,IAAK,QAGCnR,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7CA,KAAKwpB,8BAGX,CAGA,SAAIxU,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,YAAI6U,GACF,OACG5W,KAAK2U,aAAa,aAAwC,WAE/D,CAEA,YAAIiC,CAASnR,GACXzF,KAAK6a,aAAa,WAAYpV,EAChC,CAEA,oBAAIokB,GACF,OAAO/b,SAAS9N,KAAK2U,aAAa,sBAAwB,IAAK,GACjE,CAEA,oBAAIkV,CAAiBpkB,GACnBzF,KAAK6a,aAAa,oBAAqBpV,EAAMgC,WAC/C,CAEA,kBAAIyiB,GACF,OAAQlqB,KAAK2U,aAAa,oBAAyC,MACrE,CAEA,kBAAIuV,CAAezkB,GACjBzF,KAAK6a,aAAa,kBAAmBpV,EACvC,CAEA,WAAI0kB,GACF,OACGnqB,KAAK2U,aAAa,YAA+C,QAEtE,CAEA,WAAIwV,CAAQ1kB,GACVzF,KAAK6a,aAAa,UAAWpV,EAC/B,CAKO,eAAA2kB,CAAgBhU,GACrBpW,KAAKsS,YAAY8D,EACnB,CAKO,kBAAAiU,CAAmBjU,GACpBpW,KAAK2F,SAASyQ,IAChBpW,KAAK+W,YAAYX,EAErB,CAKO,KAAAuP,GACiB3lB,KAAK0Z,iBAAiB,mBAC9B7V,QAAQuS,IACpB,MAAMkU,EAAsBlU,EACe,mBAAhCkU,EAAoB1B,QAC7B0B,EAAoB1B,UAEpBxS,EAAalB,UAGnB,CAKO,oBAAAqV,GACL,OAAOvqB,KAAK0Z,iBAAiB,mBAAmB3V,MAClD,CAEO,UAAAgR,CAAWC,GAChBhV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,GACjBhV,KAAKwpB,6BACP,EAIG7Q,eAAerL,IAAI,8BACtBqL,eAAe7Y,OACb,4BACAmpB,GCzZG,MAAMuB,UACHlT,YA4BR,6BAAWC,GACT,MAAO,CACL,QACA,WACA,YACA,cACA,cACA,eACA,aACA,gBACA,YACA,YACA,aACA,aAEJ,CAEA,WAAAhK,GACEiK,QA3CM,KAAAC,OAAgB,OAChB,KAAAgT,YAAsB,EACtB,KAAAC,aAAiC,WAIjC,KAAAC,aAAuB,EACvB,KAAAC,cAAwB,EACxB,KAAAC,YAAsB,EACtB,KAAAC,eAAyB,EACzB,KAAAC,UAAoB,IACpB,KAAAC,UAAoB,IACpB,KAAAC,WAAqB,IACrB,KAAAC,WAAqB,IAGrB,KAAAC,WAAqB,EACrB,KAAAC,YAA0D,KAC1D,KAAAC,eAA2C,CAAErQ,EAAG,EAAGC,EAAG,GACtD,KAAAqQ,WAAgD,CACtD5P,MAAO,EACPC,OAAQ,GAEF,KAAA4P,YAAwD,KAqB9DvrB,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,ytMAgORI,EAAW0D,cAAc,iBACjCd,iBAAiB,QAAS1V,KAAKwrB,aAAazoB,KAAK/C,OAGxDA,KAAK0V,iBAAiB,YAAa1V,KAAKyrB,gBAAgB1oB,KAAK/C,OAC7DA,KAAK0V,iBAAiB,YAAa1V,KAAK0rB,gBAAgB3oB,KAAK/C,OAC7DA,KAAK0V,iBAAiB,UAAW1V,KAAK2rB,cAAc5oB,KAAK/C,OACzDA,KAAK0V,iBAAiB,aAAc1V,KAAK4rB,iBAAiB7oB,KAAK/C,MACjE,CAEA,iBAAA6X,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,sBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,YACH,MAAM6rB,EAAe7rB,KAAKyqB,WAC1BzqB,KAAKyqB,WAA0B,OAAbrS,EAClBpY,KAAK8rB,sBAAsBD,GAC3B,MACF,IAAK,cACH7rB,KAAK0qB,aAAgBtS,GAAiC,WACtD,MACF,IAAK,cACHpY,KAAK2qB,YAA2B,OAAbvS,EACnB,MACF,IAAK,eACHpY,KAAK4qB,aAA4B,OAAbxS,EACpB,MACF,IAAK,aACHpY,KAAK6qB,WAA0B,OAAbzS,EAClB,MACF,IAAK,gBACHpY,KAAK8qB,cAA6B,OAAb1S,EACrB,MACF,IAAK,YACHpY,KAAK+qB,UAAYld,WAAWuK,IAAa,IACzC,MACF,IAAK,YACHpY,KAAKgrB,UAAYnd,WAAWuK,IAAa,IACzC,MACF,IAAK,aACHpY,KAAKirB,WAAapd,WAAWuK,IAAa,IAC1C,MACF,IAAK,aACHpY,KAAKkrB,WAAard,WAAWuK,IAAa,IAGhD,CAEQ,YAAAoT,GACNxrB,KAAK+rB,WAAa/rB,KAAK+rB,UAGvBxa,EAAoBvR,KAAM,2BAA4B,CACpDgsB,QAAShsB,KAAKmD,GACd8oB,MAAOjsB,KACP+rB,UAAW/rB,KAAK+rB,UAChBG,YAAalsB,KAAKksB,aAEtB,CAEQ,qBAAAJ,CAAsBD,GACxB7rB,KAAKyqB,aAAeoB,EAEtB7rB,KAAKurB,YAAc,CACjB7P,MAAO1b,KAAKmsB,YACZxQ,OAAQ3b,KAAKosB,eAELpsB,KAAKyqB,YAAcoB,GAAgB7rB,KAAKurB,aAElDpQ,sBAAsB,KAChBnb,KAAKurB,cACPvrB,KAAKkS,MAAMwJ,MAAQ,GAAG1b,KAAKurB,YAAY7P,UACvC1b,KAAKkS,MAAMyJ,OAAS,GAAG3b,KAAKurB,YAAY5P,aAIhD,CAEQ,eAAA8P,CAAgB/Z,GACtB,GAAI1R,KAAKyqB,WAAY,OAErB,MAAM4B,EAAarsB,KAAKssB,cAAc5a,GACjC2a,IAEL3a,EAAMmI,iBACNnI,EAAMoI,kBAEN9Z,KAAKmrB,WAAY,EACjBnrB,KAAKorB,YAAciB,EACnBrsB,KAAKqrB,eAAiB,CAAErQ,EAAGtJ,EAAMwI,QAASe,EAAGvJ,EAAMyI,SACnDna,KAAKsrB,WAAa,CAChB5P,MAAO1b,KAAKmsB,YACZxQ,OAAQ3b,KAAKosB,cAGfpsB,KAAKiV,UAAUE,IAAI,YACnBpJ,SAAS0K,KAAKvE,MAAMqa,OAASvsB,KAAKwsB,iBAAiBH,GAGnDtgB,SAAS2J,iBACP,YACA1V,KAAKysB,wBAAwB1pB,KAAK/C,OAEpC+L,SAAS2J,iBAAiB,UAAW1V,KAAK0sB,sBAAsB3pB,KAAK/C,OAGrEuR,EACEvR,KACA,iCACA,CACEgsB,QAAShsB,KAAKmD,GACd8oB,MAAOjsB,KACP2sB,WAAY3sB,KAAKsrB,WAAW5P,MAC5BkR,YAAa5sB,KAAKsrB,WAAW3P,OAC7BkR,KAAMR,IAGZ,CAEQ,eAAAX,CAAgBha,GACtB,GAAI1R,KAAKmrB,WAAanrB,KAAKyqB,WAAY,OAEvC,MAAM4B,EAAarsB,KAAKssB,cAAc5a,GAEpC1R,KAAKkS,MAAMqa,OADTF,EACkBrsB,KAAKwsB,iBAAiBH,GAEtB,EAExB,CAEQ,aAAAV,CAAcja,GACf1R,KAAKmrB,WACVnrB,KAAK8sB,UAAUpb,EACjB,CAEQ,gBAAAka,CAAiBla,GAClB1R,KAAKmrB,YACRnrB,KAAKkS,MAAMqa,OAAS,GAExB,CAEQ,uBAAAE,CAAwB/a,GAC9B,IAAK1R,KAAKmrB,YAAcnrB,KAAKorB,YAAa,OAE1C1Z,EAAMmI,iBAEN,MAAMkT,EAASrb,EAAMwI,QAAUla,KAAKqrB,eAAerQ,EAC7CgS,EAAStb,EAAMyI,QAAUna,KAAKqrB,eAAepQ,EAEnD,IAAIgS,EAAWjtB,KAAKsrB,WAAW5P,MAC3BwR,EAAYltB,KAAKsrB,WAAW3P,OAEhC,OAAQ3b,KAAKorB,aACX,IAAK,OACH6B,EAAWxmB,KAAKC,IACd1G,KAAK+qB,UACLtkB,KAAK+b,IAAIxiB,KAAKgrB,UAAWhrB,KAAKsrB,WAAW5P,MAAQqR,IAEnD,MACF,IAAK,QACHE,EAAWxmB,KAAKC,IACd1G,KAAK+qB,UACLtkB,KAAK+b,IAAIxiB,KAAKgrB,UAAWhrB,KAAKsrB,WAAW5P,MAAQqR,IAEnD,MACF,IAAK,MACHG,EAAYzmB,KAAKC,IACf1G,KAAKirB,WACLxkB,KAAK+b,IAAIxiB,KAAKkrB,WAAYlrB,KAAKsrB,WAAW3P,OAASqR,IAErD,MACF,IAAK,SACHE,EAAYzmB,KAAKC,IACf1G,KAAKirB,WACLxkB,KAAK+b,IAAIxiB,KAAKkrB,WAAYlrB,KAAKsrB,WAAW3P,OAASqR,IAM/B,eAAtBhtB,KAAK0qB,aAEkB,SAArB1qB,KAAKorB,aAA+C,UAArBprB,KAAKorB,cACtCprB,KAAKkS,MAAMwJ,MAAQ,GAAGuR,OAIC,QAArBjtB,KAAKorB,aAA8C,WAArBprB,KAAKorB,cACrCprB,KAAKkS,MAAMyJ,OAAS,GAAGuR,OAK3B3b,EACEvR,KACA,2BACA,CACEgsB,QAAShsB,KAAKmD,GACd8oB,MAAOjsB,KACP0b,MAAOuR,EACPtR,OAAQuR,EACRL,KAAM7sB,KAAKorB,aAGjB,CAEQ,qBAAAsB,CAAsBhb,GACvB1R,KAAKmrB,WACVnrB,KAAK8sB,UAAUpb,EACjB,CAEQ,SAAAob,CAAUpb,GAChB,IAAK1R,KAAKmrB,YAAcnrB,KAAKorB,YAAa,OAE1C,MAAM+B,EAAantB,KAAKmsB,YAClBiB,EAAcptB,KAAKosB,aACnBS,EAAO7sB,KAAKorB,YAElBprB,KAAKmrB,WAAY,EACjBnrB,KAAKorB,YAAc,KACnBprB,KAAKiV,UAAUC,OAAO,YACtBnJ,SAAS0K,KAAKvE,MAAMqa,OAAS,GAG7BxgB,SAAS4J,oBACP,YACA3V,KAAKysB,wBAAwB1pB,KAAK/C,OAEpC+L,SAAS4J,oBACP,UACA3V,KAAK0sB,sBAAsB3pB,KAAK/C,OAIlCA,KAAKurB,YAAc,CAAE7P,MAAOyR,EAAYxR,OAAQyR,GAGhD7b,EACEvR,KACA,+BACA,CACEgsB,QAAShsB,KAAKmD,GACd8oB,MAAOjsB,KACPmtB,aACAC,cACAP,QAGN,CAEQ,aAAAP,CACN5a,GAEA,MAAM+B,EAAOzT,KAAK0T,wBACZsH,EAAItJ,EAAMwI,QAAUzG,EAAKG,KACzBqH,EAAIvJ,EAAMyI,QAAU1G,EAAKE,IAI/B,GAA0B,aAAtB3T,KAAK0qB,aAA6B,CAEpC,GAAI1qB,KAAK6qB,YAAc5P,GALR,EAMb,MAAO,MAET,GAAIjb,KAAK8qB,eAAiB7P,GAAKxH,EAAKkI,OARrB,EASb,MAAO,Q,KAEJ,CAEL,GAAI3b,KAAK2qB,aAAe3P,GAbT,EAcb,MAAO,OAET,GAAIhb,KAAK4qB,cAAgB5P,GAAKvH,EAAKiI,MAhBpB,EAiBb,MAAO,O,CAIX,OAAO,IACT,CAEQ,gBAAA8Q,CAAiBK,GACvB,OAAQA,GACN,IAAK,OACL,IAAK,QACH,MAAO,YACT,IAAK,MACL,IAAK,SACH,MAAO,YAEb,CAGA,SAAI7X,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,aAAIsmB,GACF,OAAO/rB,KAAKyqB,UACd,CAEA,aAAIsB,CAAUtmB,GACZzF,KAAKyqB,WAAahlB,EACdA,EACFzF,KAAK6a,aAAa,YAAa,IAE/B7a,KAAK8a,gBAAgB,YAEzB,CAEA,eAAIoR,GACF,OAAOlsB,KAAK0qB,YACd,CAEA,eAAIwB,CAAYzmB,GACdzF,KAAK0qB,aAAejlB,EACpBzF,KAAK6a,aAAa,cAAepV,EACnC,CAEA,MAAA4a,GACErgB,KAAK+rB,WAAa/rB,KAAK+rB,SACzB,CAEA,MAAAsB,GACErtB,KAAK+rB,WAAY,CACnB,CAEA,QAAAuB,GACEttB,KAAK+rB,WAAY,CACnB,CAEA,UAAAhX,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAGA,cAAIuY,GACF,OAAOvtB,KAAK2qB,WACd,CAEA,cAAI4C,CAAW9nB,GACbzF,KAAK2qB,YAAcllB,EACnBzF,KAAKwtB,gBAAgB,cAAe/nB,EACtC,CAEA,eAAIgoB,GACF,OAAOztB,KAAK4qB,YACd,CAEA,eAAI6C,CAAYhoB,GACdzF,KAAK4qB,aAAenlB,EACpBzF,KAAKwtB,gBAAgB,eAAgB/nB,EACvC,CAEA,aAAIioB,GACF,OAAO1tB,KAAK6qB,UACd,CAEA,aAAI6C,CAAUjoB,GACZzF,KAAK6qB,WAAaplB,EAClBzF,KAAKwtB,gBAAgB,aAAc/nB,EACrC,CAEA,gBAAIkoB,GACF,OAAO3tB,KAAK8qB,aACd,CAEA,gBAAI6C,CAAaloB,GACfzF,KAAK8qB,cAAgBrlB,EACrBzF,KAAKwtB,gBAAgB,gBAAiB/nB,EACxC,CAEA,YAAImoB,GACF,OAAO5tB,KAAK+qB,SACd,CAEA,YAAI6C,CAASnoB,GACXzF,KAAK+qB,UAAYtlB,EACjBzF,KAAK6a,aAAa,YAAapV,EAAMgC,WACvC,CAEA,YAAIomB,GACF,OAAO7tB,KAAKgrB,SACd,CAEA,YAAI6C,CAASpoB,GACXzF,KAAKgrB,UAAYvlB,EACjBzF,KAAK6a,aAAa,YAAapV,EAAMgC,WACvC,CAEA,aAAIqmB,GACF,OAAO9tB,KAAKirB,UACd,CAEA,aAAI6C,CAAUroB,GACZzF,KAAKirB,WAAaxlB,EAClBzF,KAAK6a,aAAa,aAAcpV,EAAMgC,WACxC,CAEA,aAAIsmB,GACF,OAAO/tB,KAAKkrB,UACd,CAEA,aAAI6C,CAAUtoB,GACZzF,KAAKkrB,WAAazlB,EAClBzF,KAAK6a,aAAa,aAAcpV,EAAMgC,WACxC,EAIGkR,eAAerL,IAAI,yBACtBqL,eAAe7Y,OAAO,uBAAwB0qB,GC3uBzC,MAAMwD,UAAmB1W,YAQ9B,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,OAAQ,WAAY,WAAY,YAC/D,CAEA,WAAAhK,GACEiK,QAZM,KAAAC,OAAgB,OAChB,KAAAwW,MAAgB,GAChB,KAAAC,SAAmB,GACnB,KAAAC,SAAmB,GACnB,KAAAC,YAAsB,EAS5BpuB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,4jCA4CvB1S,KAAK0V,iBAAiB,SAAU1V,KAAKquB,aAAatrB,KAAK/C,MACzD,CAEA,iBAAA6X,GAEO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,gBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAEClC,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAKyX,OAAUW,GAAsB,OACrCpY,KAAK+U,WAAW/U,KAAKyX,QACrB,MACF,IAAK,OACHzX,KAAKiuB,MAAQpgB,WAAWuK,GAAY,MACpCpY,KAAKkf,aACL,MACF,IAAK,WACHlf,KAAKkuB,SAAWrgB,WAAWuK,GAAY,MACvC,MACF,IAAK,WACHpY,KAAKmuB,SAAWtgB,WAAWuK,GAAY,MACvC,MACF,IAAK,YACHpY,KAAKouB,WAA0B,UAAbhW,EAClB,MACF,IAAK,WACHpY,KAAKwtB,gBAAgB,WAAyB,OAAbpV,GAGvC,CAEQ,YAAAiW,GAENruB,KAAKkf,YACP,CAEQ,UAAAA,GAGR,CAGA,SAAIlK,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAE3BmQ,EAAkB5V,KAAMyF,EAC1B,CAEA,QAAI6oB,GACF,OAAOtuB,KAAKiuB,KACd,CAEA,QAAIK,CAAK7oB,GACPzF,KAAK6a,aAAa,OAAQpV,EAAMgC,WAClC,CAEA,WAAI8mB,GACF,OAAOvuB,KAAKkuB,QACd,CAEA,WAAIK,CAAQ9oB,GACVzF,KAAK6a,aAAa,WAAYpV,EAAMgC,WACtC,CAEA,WAAI+mB,GACF,OAAOxuB,KAAKmuB,QACd,CAEA,WAAIK,CAAQ/oB,GACVzF,KAAK6a,aAAa,WAAYpV,EAAMgC,WACtC,CAEA,aAAIgnB,GACF,OAAOzuB,KAAKouB,UACd,CAEA,aAAIK,CAAUhpB,GACZzF,KAAK6a,aAAa,YAAapV,EAAMgC,WACvC,CAEA,YAAIkS,GACF,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAImE,CAASlU,GACXzF,KAAKwtB,gBAAgB,WAAY/nB,EACnC,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAGA,cAAA0Z,GACE,MAAMrY,EAAYrW,KAAKsU,cACvB,IAAK+B,EAAW,OAAOrW,KAAKiuB,MAI5B,GAF6D,aAA1C5X,EAAU1B,aAAa,eAE1B,CACd,MAAMga,EAAkBtY,EAAUrC,aAElC,OADmBhU,KAAKgU,aACH2a,EAAmB,G,CACnC,CACL,MAAMC,EAAiBvY,EAAUlC,YAEjC,OADkBnU,KAAKmU,YACHya,EAAkB,G,CAE1C,EAIGjW,eAAerL,IAAI,mBACtBqL,eAAe7Y,OAAO,iBAAkBkuB,GC3MnC,MAAMa,UACHvX,YAeR,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,cAC/B,CAEA,WAAAhK,GACEiK,QAjBM,KAAAC,OAAgB,OAChB,KAAAiT,aAAsC,aACtC,KAAAS,WAAqB,EACrB,KAAA2D,aAAmC,KACnC,KAAAzD,eAAyB,EACzB,KAAAC,WAAqB,EACrB,KAAAyD,oBAA8B,EAC9B,KAAAC,qBAA+B,EAG/B,KAAAC,gBAAkBjc,EAAShT,KAAKquB,aAAatrB,KAAK/C,MAAO,IAQ/DA,KAAK2X,eACL3X,KAAKiZ,YACP,CAEQ,YAAAtB,GACa/E,EAAc5S,MAEtB0S,UAAY,89DAuEzB,CAEQ,UAAAuG,GAENjZ,KAAK0V,iBAAiB,YAAa1V,KAAKyrB,gBAAgB1oB,KAAK/C,OAC7DA,KAAK0V,iBAAiB,YAAa1V,KAAK0rB,gBAAgB3oB,KAAK/C,OAC7DA,KAAK0V,iBAAiB,UAAW1V,KAAK2rB,cAAc5oB,KAAK/C,OACzDA,KAAK0V,iBAAiB,aAAc1V,KAAK4rB,iBAAiB7oB,KAAK/C,OAG/DsT,OAAOoC,iBAAiB,SAAU1V,KAAKivB,gBAIzC,CAEA,iBAAApX,GAEO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,0BAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAM7CuT,WAAW,KACTvT,KAAKkvB,gBACLlvB,KAAKmvB,oBACJ,EACL,CAEA,oBAAApX,GACEzE,OAAOqC,oBAAoB,SAAU3V,KAAKivB,iBAEtCjvB,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAEClC,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAKyX,OAAUW,GAAsB,OACrCpY,KAAK+U,WAAW/U,KAAKyX,QACrB,MACF,IAAK,cACHzX,KAAK0qB,aAAgBtS,GAAsC,aAC3DpY,KAAKkvB,gBACLlvB,KAAKmvB,mBACL,MACF,IAAK,WACHnvB,KAAKwtB,gBAAgB,WAAyB,OAAbpV,GAGvC,CAEQ,aAAA8W,GAGR,CAEQ,gBAAAC,GAEN,IAAInvB,KAAKgvB,oBAAT,CACAhvB,KAAKgvB,qBAAsB,EAE3B,IACE,MAAMI,EAASpvB,KAAKqvB,YACpB,GAAsB,IAAlBD,EAAOrrB,OAAc,OAGzB,MAAMurB,EAAgBtvB,KAAK0T,wBACrB6b,EAAazhB,SACjB2K,iBAAiBzY,MAAM0Y,iBAAiB,kBAAoB,KAGxD8W,GADeJ,EAAOrrB,OAAS,GACGwrB,EAElCE,EACkB,eAAtBzvB,KAAK0qB,aACD4E,EAAc5T,MAAQ8T,EACtBF,EAAc3T,OAAS6T,EAG7B,IAAIE,EAAe,EACfC,EAAc,EAElBP,EAAOvrB,QAAQooB,IACb,MAAMqC,EAAOzgB,WAAWoe,EAAMtX,aAAa,SAAW,KAClD2Z,EAAO,EACToB,GAAgBpB,EAEhBqB,MAIJ,MAAMC,EAAsBnpB,KAAKC,IAAI,EAAG,IAAMgpB,GACxCG,EACJF,EAAc,EAAIC,EAAsBD,EAAc,EAGxDP,EAAOvrB,QAAQooB,IACb,IAAIqC,EAAOzgB,WAAWoe,EAAMtX,aAAa,SAAW,KAChD2Z,GAAQ,IACVA,EAAOuB,EAEa5D,EAAMtX,aAAa,UACnB2Z,EAAK7mB,YACvBwkB,EAAMpR,aAAa,OAAQyT,EAAK7mB,aAIpC,MAAMqoB,EAAcxB,EAAO,IAAOmB,EAER,eAAtBzvB,KAAK0qB,cACPuB,EAAM/Z,MAAMwJ,MAAQ,GAAGoU,MACvB7D,EAAM/Z,MAAMyJ,OAAS,OACrBsQ,EAAM/Z,MAAM6d,UAAY,GAAGD,QAE3B7D,EAAM/Z,MAAMyJ,OAAS,GAAGmU,MACxB7D,EAAM/Z,MAAMwJ,MAAQ,OACpBuQ,EAAM/Z,MAAM6d,UAAY,GAAGD,Q,SAI/B9vB,KAAKgvB,qBAAsB,C,CA9DO,CAgEtC,CAEQ,eAAAvD,CAAgB/Z,GACtB,MAAM0d,EAASpvB,KAAKqvB,YACpB,GAAID,EAAOrrB,OAAS,EAAG,OAGvB,IAAIisB,GAAc,EACdC,EAAmC,KACnCC,EAAgC,KAEpC,MAAMX,EAAazhB,SACjB2K,iBAAiBzY,MAAM0Y,iBAAiB,kBAAoB,KAG9D,IAAK,IAAInV,EAAI,EAAGA,EAAI6rB,EAAOrrB,OAAS,EAAGR,IAAK,CAC1C,MACMkQ,EADQ2b,EAAO7rB,GACFmQ,wBACb4b,EAAgBtvB,KAAK0T,wBAErByc,EAAYze,EAAMwI,QAAUoV,EAAc1b,KAC1Cwc,EAAY1e,EAAMyI,QAAUmV,EAAc3b,IAEhD,IAAI0c,GAAW,EAEf,GAA0B,eAAtBrwB,KAAK0qB,aAA+B,CAEtC,MAAM4F,EAAc7c,EAAKQ,MAAQqb,EAAc1b,KAAO2b,EAChDgB,EAAY9c,EAAKQ,MAAQqb,EAAc1b,KAC7Cyc,EAAWF,GAAaG,GAAeH,GAAaI,C,KAC/C,CAEL,MAAMD,EAAc7c,EAAKI,OAASyb,EAAc3b,IAAM4b,EAChDgB,EAAY9c,EAAKI,OAASyb,EAAc3b,IAC9C0c,EAAWD,GAAaE,GAAeF,GAAaG,C,CAGtD,GAAIF,EAAU,CACZL,EAAazsB,EACb0sB,EAAeb,EAAO7rB,GACtB2sB,EAAYd,EAAO7rB,EAAI,GACvB,K,GAIgB,IAAhBysB,GAAsBC,GAAiBC,IAE3Cxe,EAAMmI,iBAEN7Z,KAAKmrB,WAAY,EACjBnrB,KAAK8uB,aAAemB,EACpBjwB,KAAKqrB,eACmB,eAAtBrrB,KAAK0qB,aAAgChZ,EAAMwI,QAAUxI,EAAMyI,QAC7Dna,KAAKsrB,WAAazd,WAAWoiB,EAAatb,aAAa,SAAW,MAClE3U,KAAK+uB,oBAAsBlhB,WACzBqiB,EAAUvb,aAAa,SAAW,MAGpC3U,KAAKiV,UAAUE,IAAI,YAGnBnV,KAAKkS,MAAMqa,OACa,eAAtBvsB,KAAK0qB,aAAgC,aAAe,aAGtDnZ,EACEvR,KACA,2BACA,CACE+pB,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,KACXgsB,QAASiE,EAAa9sB,GACtB8oB,MAAOgE,EACPO,UAAWxwB,KAAKsrB,aAGtB,CAEQ,eAAAI,CAAgBha,GAEtB,GAAI1R,KAAKmrB,WAAanrB,KAAK8uB,aAAc,CACvCpd,EAAMmI,iBAEN,MAEM4W,GADkB,eAAtBzwB,KAAK0qB,aAAgChZ,EAAMwI,QAAUxI,EAAMyI,SAC7Bna,KAAKqrB,eAE/BiE,EAAgBtvB,KAAK0T,wBAMrBgd,EAAmBD,GAJD,eAAtBzwB,KAAK0qB,aACD4E,EAAc5T,MACd4T,EAAc3T,QAE8B,IAE5CyT,EAASpvB,KAAKqvB,YACd9U,EAAe6U,EAAO9jB,QAAQtL,KAAK8uB,cACnCoB,EAAYd,EAAO7U,EAAe,GAExC,IAAK2V,EAAW,OAEhB,MAAMS,EAAiBlqB,KAAKC,IAC1BmH,WAAW7N,KAAK8uB,aAAana,aAAa,aAAe,MACzDlO,KAAK+b,IACH3U,WAAW7N,KAAK8uB,aAAana,aAAa,aAAe,MACzD3U,KAAKsrB,WAAaoF,IAIhBE,EAAcnqB,KAAKC,IACvBmH,WAAWqiB,EAAUvb,aAAa,aAAe,MACjDlO,KAAK+b,IACH3U,WAAWqiB,EAAUvb,aAAa,aAAe,MACjD3U,KAAK+uB,oBAAsB2B,IAK/B1wB,KAAK8uB,aAAajU,aAAa,OAAQ8V,EAAelpB,YACtDyoB,EAAUrV,aAAa,OAAQ+V,EAAYnpB,YAE3CzH,KAAKmvB,mBAGL5d,EACEvR,KACA,qBACA,CACE+pB,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,KACXgsB,QAAShsB,KAAK8uB,aAAa3rB,GAC3B8oB,MAAOjsB,KAAK8uB,aACZR,KAAMqC,EACNpC,QAAS1gB,WACP7N,KAAK8uB,aAAana,aAAa,aAAe,MAEhD6Z,QAAS3gB,WACP7N,KAAK8uB,aAAana,aAAa,aAAe,O,MAMpD3U,KAAK6wB,kBAAkBnf,EAE3B,CAEQ,iBAAAmf,CAAkBnf,GACxB,MAAM0d,EAASpvB,KAAKqvB,YACpB,GAAID,EAAOrrB,OAAS,EAElB,YADA/D,KAAKkS,MAAMqa,OAAS,IAItB,MAAMgD,EAAazhB,SACjB2K,iBAAiBzY,MAAM0Y,iBAAiB,kBAAoB,KAG9D,IAAIoY,GAAa,EAEjB,IAAK,IAAIvtB,EAAI,EAAGA,EAAI6rB,EAAOrrB,OAAS,EAAGR,IAAK,CAC1C,MACMkQ,EADQ2b,EAAO7rB,GACFmQ,wBACb4b,EAAgBtvB,KAAK0T,wBAErByc,EAAYze,EAAMwI,QAAUoV,EAAc1b,KAC1Cwc,EAAY1e,EAAMyI,QAAUmV,EAAc3b,IAEhD,GAA0B,eAAtB3T,KAAK0qB,aAA+B,CAEtC,MAAM4F,EAAc7c,EAAKQ,MAAQqb,EAAc1b,KAAO2b,EAChDgB,EAAY9c,EAAKQ,MAAQqb,EAAc1b,KAC7C,GAAIuc,GAAaG,GAAeH,GAAaI,EAAW,CACtDO,GAAa,EACb,K,MAEG,CAEL,MAAMR,EAAc7c,EAAKI,OAASyb,EAAc3b,IAAM4b,EAChDgB,EAAY9c,EAAKI,OAASyb,EAAc3b,IAC9C,GAAIyc,GAAaE,GAAeF,GAAaG,EAAW,CACtDO,GAAa,EACb,K,GAOJ9wB,KAAKkS,MAAMqa,OADTuE,EAEsB,eAAtB9wB,KAAK0qB,aAAgC,aAAe,aAElC,EAExB,CAEQ,aAAAiB,CAAcja,GACpB,IAAK1R,KAAKmrB,UAAW,OAErBzZ,EAAMmI,iBAEN,MAAMkX,EAAY/wB,KAAK8uB,aACnBjhB,WAAW7N,KAAK8uB,aAAana,aAAa,SAAW,MACrD,EAGA3U,KAAK8uB,cACPvd,EACEvR,KACA,yBACA,CACE+pB,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,KACXgsB,QAAShsB,KAAK8uB,aAAa3rB,GAC3B8oB,MAAOjsB,KAAK8uB,aACZiC,cAKN/wB,KAAKmrB,WAAY,EACjBnrB,KAAK8uB,aAAe,KACpB9uB,KAAKiV,UAAUC,OAAO,YAGtBlV,KAAK6wB,kBAAkBnf,EACzB,CAEQ,gBAAAka,CAAiBla,GAEnB1R,KAAKmrB,WACPnrB,KAAK2rB,cAAcja,GAIrB1R,KAAKkS,MAAMqa,OAAS,EACtB,CAEQ,YAAA8B,GACNruB,KAAKmvB,kBACP,CAEQ,SAAAE,GACN,OAAO1sB,MAAM+M,KAAK1P,KAAK0Z,iBAAiB,kBAC1C,CAGA,SAAI1E,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,GAE3BmQ,EAAkB5V,KAAMyF,EAC1B,CAEA,eAAIymB,GACF,OAAOlsB,KAAK0qB,YACd,CAEA,eAAIwB,CAAYzmB,GACdzF,KAAK6a,aAAa,cAAepV,EACnC,CAEA,YAAIkU,GACF,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAImE,CAASlU,GACXzF,KAAKwtB,gBAAgB,WAAY/nB,EACnC,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAGA,WAAAgc,CAAYhF,EAAiBsC,GAC3B,MAAMrC,EAAQjsB,KAAKwW,cAAc,IAAIwV,KACjCC,GAAyC,mBAAhCA,EAAM1X,QAAQC,gBACzByX,EAAMpR,aAAa,OAAQyT,EAAK7mB,YAChCzH,KAAKmvB,mBAET,CAGA,aAAA8B,GACE,MAAM7B,EAASpvB,KAAKqvB,YACd6B,EAAuC,CAAC,EAQ9C,OANA9B,EAAOvrB,QAAQooB,IACTA,EAAM9oB,KACR+tB,EAAMjF,EAAM9oB,IAAM0K,WAAWoe,EAAMtX,aAAa,SAAW,QAIxDuc,CACT,CAGA,eAAAC,GACE,MAAM/B,EAASpvB,KAAKqvB,YACd+B,EAAY,IAAMhC,EAAOrrB,OAE/BqrB,EAAOvrB,QAAQooB,IACbA,EAAMpR,aAAa,OAAQuW,EAAU3pB,cAGvCzH,KAAKmvB,kBACP,EAIGxW,eAAerL,IAAI,6BACtBqL,eAAe7Y,OAAO,2BAA4B+uB,GCnjB7C,MAAMwC,UAAkB/Z,YAK7B,6BAAWC,GACT,MAAO,CAAC,QAAS,WACnB,CAEA,WAAAhK,GACEiK,QATM,KAAAC,OAAgB,OAUtBzX,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,qyHAoIzB,CAEA,iBAAAmF,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,eAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAInB/B,KAAKsxB,2BACPhe,OAAOD,aAAarT,KAAKsxB,0BACzBtxB,KAAKsxB,8BAA2BvvB,EAEpC,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEID,IAAaC,GAGV,UADClW,IAIAkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAInD,CAEA,SAAIgV,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAQA,WAAAuc,CACEnvB,EACAM,EAA0B,OAC1B8uB,EAAmB,KAEnB,MAAM1e,EAAa9S,KAAK8S,WAClB2e,EAAY3e,EAAWb,eAAe,qBACtCyf,EAAS5e,EAAWb,eAAe,gBAGrCjS,KAAKsxB,0BACPje,aAAarT,KAAKsxB,0BAIpBI,EAAOtf,YAAchQ,EACrBqvB,EAAU7T,UAAY,qBAAqBlb,IAG3CyY,sBAAsB,KACpBsW,EAAUxc,UAAUE,IAAI,UAI1B5D,EAAkDvR,KAAM,iBAAkB,CACxEoC,UACAM,OACA8uB,WACAG,WAAW,IAITH,EAAW,IACbxxB,KAAKsxB,yBAA2Bhe,OAAOC,WAAW,KAChDvT,KAAK4xB,eACJJ,GAEP,CAKA,WAAAI,GACqB5xB,KAAK8S,WACKb,eAAe,qBAElCgD,UAAUC,OAAO,QAEvBlV,KAAKsxB,2BACPje,aAAarT,KAAKsxB,0BAClBtxB,KAAKsxB,8BAA2BvvB,EAEpC,CAMA,iBAAA8vB,CAAkBC,GAChB,MAAMC,EAAO/xB,KAAKwW,cAAc,UAAUsb,OAC1C,OAAKC,EAEEpvB,MAAM+M,KAAKqiB,EAAKC,UAFL,EAGpB,CAMA,YAAAC,CAAaH,GACG9xB,KAAK6xB,kBAAkBC,GAC/BjuB,QAAQ8I,GAAQA,EAAKuI,SAC7B,EAIGyD,eAAerL,IAAI,kBACtBqL,eAAe7Y,OAAO,gBAAiBuxB,GC/SlC,MAAMa,UAAmB5a,YAQ9B,6BAAWC,GACT,MAAO,CAAC,QAAS,OAAQ,QAAS,QAAS,YAAa,WAC1D,CAEA,WAAAhK,GACEiK,QAZM,KAAAC,OAAgB,OAChB,KAAA0a,MAAwB,OACxB,KAAAnV,OAA0B,GAC1B,KAAAoV,OAAiB,GACjB,KAAAC,YAAsB,EAS5BryB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,+3HAiJvB1S,KAAK0V,iBAAiB,QAAS1V,KAAK+b,YAAYhZ,KAAK/C,MACvD,CAEA,iBAAA6X,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,gBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAK7CA,KAAKsyB,eACP,CAEA,oBAAAva,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,OACHA,KAAKmyB,MAAQ/Z,EACbpY,KAAKsyB,gBACL,MACF,IAAK,QACHtyB,KAAKgd,OAAS5E,EACdpY,KAAKsyB,gBACL,MACF,IAAK,QACHtyB,KAAKoyB,OAASha,EACdpY,KAAKsyB,gBACL,MACF,IAAK,YACHtyB,KAAKqyB,WAA0B,OAAbja,EAGxB,CAEQ,WAAA2D,CAAYrK,GACb1R,KAAKqyB,aAAcryB,KAAKwV,aAAa,aAE1CjE,EACEvR,KACA,oBACA,CACE6c,OAAQ7c,KAAKmD,GACbwJ,KAAM3M,KACNuyB,SAAUvyB,KAAKmyB,MACf1sB,MAAOzF,KAAKgd,QAGlB,CAEQ,aAAAsV,GACN,IAAKtyB,KAAK8S,WAAY,OAEtB,MAAM0f,EAASxyB,KAAK8S,WAAWb,eAAe,QACxCwgB,EAAUzyB,KAAK8S,WAAWb,eAAe,SACzCygB,EAAU1yB,KAAK8S,WAAWb,eAAe,SACzC0gB,EACJ3yB,KAAK8S,WAAWb,eAAe,sBAC3B2gB,EAAe5yB,KAAK8S,WAAWb,eAAe,iBAC9C4gB,EAAe7yB,KAAK8S,WAAWb,eAAe,iBAOpD,OAJAwgB,EAAQrgB,YAAcpS,KAAKoyB,OAC3BK,EAAQvgB,MAAMsK,QAAUxc,KAAKoyB,OAAS,SAAW,OAGzCpyB,KAAKmyB,OACX,IAAK,WACHnyB,KAAK8yB,sBACHH,EACAC,EACAC,GAEFH,EAAQxgB,MAAMsK,QAAU,OACxBgW,EAAOtgB,MAAMsK,QAAU,OACvB,MAEF,IAAK,OACHgW,EAAOpgB,YAAc,KACrBogB,EAAOtgB,MAAMsK,QAAU,SACvBkW,EAAQtgB,YAAc7J,OAAOvI,KAAKgd,QAClC0V,EAAQxgB,MAAMsK,QAAUxc,KAAKgd,OAAS,SAAW,OACjD2V,EAAkBzgB,MAAMsK,QAAU,OAClC,MAEF,IAAK,YACHgW,EAAOpgB,YAAc,IACrBogB,EAAOtgB,MAAMsK,QAAU,SACvBkW,EAAQtgB,YAAc7J,OAAOvI,KAAKgd,QAClC0V,EAAQxgB,MAAMsK,QAAUxc,KAAKgd,OAAS,SAAW,OACjD2V,EAAkBzgB,MAAMsK,QAAU,OAClC,MAEF,IAAK,UACHgW,EAAOpgB,YAAc,IACrBogB,EAAOtgB,MAAMsK,QAAU,SACvBkW,EAAQtgB,YAAc7J,OAAOvI,KAAKgd,QAClC0V,EAAQxgB,MAAMsK,QAAUxc,KAAKgd,OAAS,SAAW,OACjD2V,EAAkBzgB,MAAMsK,QAAU,OAClC,MAGF,QACEgW,EAAOtgB,MAAMsK,QAAU,OACvBkW,EAAQtgB,YAAc7J,OAAOvI,KAAKgd,QAClC0V,EAAQxgB,MAAMsK,QAAUxc,KAAKgd,OAAS,SAAW,OACjD2V,EAAkBzgB,MAAMsK,QAAU,OAGxC,CAEQ,qBAAAsW,CACNzc,EACA0c,EACAC,GAEA3c,EAAUnE,MAAMsK,QAAU,OAE1B,MAAMyW,EACmB,iBAAhBjzB,KAAKgd,OACRhd,KAAKgd,OACLnP,WAAWtF,OAAOvI,KAAKgd,UAAY,EACnCkW,EAAazsB,KAAKC,IAAI,EAAGD,KAAK+b,IAAI,IAAgB,IAAXyQ,IAE7CF,EAAK7gB,MAAMwJ,MAAQ,GAAGwX,KACtBF,EAAK5gB,YAAc,GAAG3L,KAAKI,MAAMqsB,KACnC,CAEA,SAAIle,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,QAAI/C,GACF,OAAO1C,KAAKmyB,KACd,CAEA,QAAIzvB,CAAK+C,GACPzF,KAAKmyB,MAAQ1sB,EACbzF,KAAK6a,aAAa,OAAQpV,EAC5B,CAEA,SAAIA,GACF,OAAOzF,KAAKgd,MACd,CAEA,SAAIvX,CAAM2S,GACR,MAAMD,EAAWnY,KAAKgd,OACtBhd,KAAKgd,OAAS5E,EACdpY,KAAK6a,aAAa,QAAStS,OAAO6P,IAGlC7G,EACEvR,KACA,qBACA,CACE6c,OAAQ7c,KAAKmD,GACbwJ,KAAM3M,KACNmY,WACAC,YAGN,CAEA,SAAIqE,GACF,OAAOzc,KAAKoyB,MACd,CAEA,SAAI3V,CAAMhX,GACRzF,KAAKoyB,OAAS3sB,EACdzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,aAAI0tB,GACF,OAAOnzB,KAAKqyB,UACd,CAEA,aAAIc,CAAU1tB,GACZzF,KAAKqyB,WAAa5sB,EACdA,EACFzF,KAAK6a,aAAa,YAAa,IAE/B7a,KAAK8a,gBAAgB,YAEzB,CAEA,UAAA/F,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAMA,WAAAoe,CAAYC,GACS,aAAfrzB,KAAKmyB,QACPnyB,KAAKyF,MAAQgB,KAAKC,IAAI,EAAGD,KAAK+b,IAAI,EAAG6Q,IAEzC,CAMA,OAAAC,CAAQ/W,GACN,GAAIvc,KAAK8S,WAAY,CACnB,MAAM0f,EAASxyB,KAAK8S,WAAWb,eAAe,QAC9CugB,EAAOpgB,YAAcmK,EACrBiW,EAAOtgB,MAAMsK,QAAU,Q,CAE3B,EAIG7D,eAAerL,IAAI,mBACtBqL,eAAe7Y,OAAO,iBAAkBoyB,GCvanC,MAAMqB,UACHjc,YAOR,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,WAC/B,CAEA,WAAAhK,GACEiK,QATM,KAAAC,OAAgB,OAChB,KAAA+b,UAAmC,OASzCxzB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,6/CAiEzB,CAEA,iBAAAmF,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,mBAIlBpR,KAAKwV,aAAa,cACrBxV,KAAK4W,SAAW5W,KAAKwzB,WAIlBxzB,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,WACHA,KAAKwzB,UAAYpb,EAGvB,CAEA,SAAIpD,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,YAAImR,GACF,OAAO5W,KAAKwzB,SACd,CAEA,YAAI5c,CAASnR,GACXzF,KAAKwzB,UAAY/tB,EACjBzF,KAAK6a,aAAa,WAAYpV,EAChC,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAOA,OAAA+S,CAAQpb,EAAmB8mB,GACrBA,GACF9mB,EAAKkO,aAAa,gBAAiB4Y,GAErCzzB,KAAKsS,YAAY3F,EACnB,CAMA,UAAAqb,CAAWrb,GACL3M,KAAK2F,SAASgH,IAChBA,EAAKuI,QAET,CAKA,KAAAyQ,GACE,KAAO3lB,KAAK0zB,YACV1zB,KAAK+W,YAAY/W,KAAK0zB,WAE1B,CAKA,QAAAC,GACE,OAAOhxB,MAAM+M,KAAK1P,KAAKgyB,SACzB,CAMA,kBAAA4B,CAAmBH,GACjB,OAAOzzB,KAAK2zB,WAAWxvB,OACrBwI,GAAQA,EAAKgI,aAAa,mBAAqB8e,EAEnD,EAIG9a,eAAerL,IAAI,sBACtBqL,eAAe7Y,OAAO,oBAAqByzB,GC9NtC,MAAMM,UAAYvc,YAQvB,6BAAWC,GACT,MAAO,CACL,QACA,WACA,SACA,WACA,OACA,QACA,QAEJ,CAEA,WAAAhK,GACEiK,QApBM,KAAAC,OAAgB,OAChB,KAAAqc,SAAmB,EACnB,KAAAC,WAAqB,EACrB,KAAAC,MAAgB,GAChB,KAAA5B,OAAiB,GAiBvBpyB,KAAK2X,eACL3X,KAAKyoB,qBACP,CAEQ,YAAA9Q,GACa/E,EAAc5S,MAEtB0S,UAAY,s5JAiKzB,CAEQ,mBAAA+V,G,MACNzoB,KAAK0V,iBAAiB,QAAS1V,KAAK+b,YAAYhZ,KAAK/C,OAErD,MAAM+e,EAA6B,QAAf,EAAA/e,KAAK8S,kBAAU,eAAE0D,cACnC,iBAEFuI,SAAAA,EAAarJ,iBAAiB,QAAS1V,KAAK0oB,iBAAiB3lB,KAAK/C,MACpE,CAEQ,WAAA+b,CAAYrK,GACd1R,KAAK2Z,UAGJjI,EAAMjE,OAAuBwH,UAAUtP,SAAS,kBAIrD+L,EAAMoI,kBAENvI,EAAoBvR,KAAM,YAAa,CACrCi0B,MAAOj0B,KAAKmD,GACZ+wB,IAAKl0B,KACLgsB,QAAShsB,KAAK2U,aAAa,UAAY,GAAG3U,KAAKmD,aAEnD,CAEQ,gBAAAulB,CAAiBhX,GACnB1R,KAAK2Z,WAETjI,EAAMoI,kBAENvI,EAAoBvR,KAAM,YAAa,CACrCi0B,MAAOj0B,KAAKmD,GACZ+wB,IAAKl0B,KACLgsB,QAAShsB,KAAK2U,aAAa,UAAY,GAAG3U,KAAKmD,aAInD,CAEQ,aAAA+Y,GACN,MAAMpJ,EAAa9S,KAAK8S,WAClBsJ,EAActJ,EAAW0D,cAAc,aACvC6F,EAAevJ,EAAW0D,cAAc,cAG1CxW,KAAKg0B,OACP5X,EAAYhK,YAAcpS,KAAKg0B,MAC/B5X,EAAYlK,MAAMsK,QAAU,QAE5BJ,EAAYlK,MAAMsK,QAAU,OAI9BH,EAAajK,YAAcpS,KAAKoyB,QAAUpyB,KAAKoS,aAAe,EAChE,CAGO,KAAAwI,GACA5a,KAAK2Z,UACR3Z,KAAK+b,YAAY,IAAIoY,WAAW,SAEpC,CAEO,KAAA5W,IACAvd,KAAK2Z,UAAY3Z,KAAK+zB,WACzB/zB,KAAK0oB,iBAAiB,IAAIyL,WAAW,SAEzC,CAGA,SAAWnf,GACT,OAAOhV,KAAKyX,MACd,CAEA,SAAWzC,CAAMvP,GACfzF,KAAKyX,OAAShS,EACdzF,KAAK6a,aAAa,QAASpV,GAC3BzF,KAAK+U,WAAWtP,GAEhBmQ,EAAkB5V,KAAMyF,EAC1B,CAEA,UAAW2uB,GACT,OAAOp0B,KAAK8zB,OACd,CAEA,UAAWM,CAAO3uB,GAChBzF,KAAK8zB,QAAUruB,EACXA,EACFzF,KAAK6a,aAAa,SAAU,IAE5B7a,KAAK8a,gBAAgB,SAEzB,CAEA,YAAWqE,GACT,OAAOnf,KAAK+zB,SACd,CAEA,YAAW5U,CAAS1Z,GAClBzF,KAAK+zB,UAAYtuB,EACbA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,QAAWyB,GACT,OAAOvc,KAAKg0B,KACd,CAEA,QAAWzX,CAAK9W,GACdzF,KAAKg0B,MAAQvuB,EACbzF,KAAK6a,aAAa,OAAQpV,GAC1BzF,KAAKkc,eACP,CAEA,SAAWO,GACT,OAAOzc,KAAKoyB,MACd,CAEA,SAAW3V,CAAMhX,GACfzF,KAAKoyB,OAAS3sB,EACdzF,KAAK6a,aAAa,QAASpV,GAC3BzF,KAAKkc,eACP,CAEA,SAAW+P,GACT,OAAOjsB,KAAK2U,aAAa,QAC3B,CAEA,SAAWsX,CAAMxmB,GACXA,EACFzF,KAAK6a,aAAa,QAASpV,GAE3BzF,KAAK8a,gBAAgB,QAEzB,CAEA,YAAWnB,GACT,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAWmE,CAASlU,GACdA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEO,UAAA/F,CAAWC,GAChBD,EAAW/U,KAAMgV,EACnB,CAEA,wBAAAkD,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAEClC,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAKyX,OAAUW,GAAsB,OACrCpY,KAAK+U,WAAW/U,KAAKyX,QACrB,MACF,IAAK,SACHzX,KAAK8zB,QAAuB,OAAb1b,EACf,MACF,IAAK,WACHpY,KAAK+zB,UAAyB,OAAb3b,EACjB,MACF,IAAK,OACHpY,KAAKg0B,MAAQ5b,GAAY,GACzBpY,KAAKkc,gBACL,MACF,IAAK,QACHlc,KAAKoyB,OAASha,GAAY,GAC1BpY,KAAKkc,gBAGX,CAEA,iBAAArE,GAgBE,GAfK7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,QAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAK7CA,KAAKkc,gBAGAlc,KAAaq0B,cAAe,CAC/B,MAAMC,EAASt0B,KAAaq0B,cAGxBC,EAAMvC,MACR/xB,KAAK6a,aAAa,OAAQyZ,EAAMvC,MAE9BuC,EAAMrI,OACRjsB,KAAK6a,aAAa,QAASyZ,EAAMrI,OAE/BqI,EAAM7X,QACRzc,KAAKyc,MAAQ6X,EAAM7X,OAEjB6X,EAAMnV,WACRnf,KAAKmf,SAAWmV,EAAMnV,UAEpBmV,EAAMtf,OACRhV,KAAK+U,WAAWuf,EAAMtf,cAIhBhV,KAAaq0B,a,CAIvBr0B,KAAKkc,eACP,CAEA,oBAAAnE,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,EAIG4W,eAAerL,IAAI,WACtBqL,eAAe7Y,OAAO,SAAU+zB,GChb3B,MAAMU,UACHjd,YASR,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,aAAc,eAAgB,WAC7D,CAEA,WAAAhK,GACEiK,QAXM,KAAAC,OAAgB,OAChB,KAAA+c,aAA8B,KAC9B,KAAAC,aAAoD,MACpD,KAAAV,WAAqB,EAS3B/zB,KAAK2X,eACL3X,KAAKyoB,qBACP,CAEQ,YAAA9Q,GACa/E,EAAc5S,MAEtB0S,UAAY,itGAoHzB,CAEQ,mBAAA+V,GAENzoB,KAAK0V,iBACH,YACA1V,KAAK00B,eAAe3xB,KAAK/C,OAE3BA,KAAK0V,iBACH,YACA1V,KAAK20B,eAAe5xB,KAAK/C,OAI3B,MAAM8S,EAAa9S,KAAK8S,WAClB8hB,EAAU9hB,EAAW0D,cACzB,qBAEIqe,EAAY/hB,EAAW0D,cAC3B,uBAGFoe,SAAAA,EAASlf,iBAAiB,aAAc,KACtC1V,KAAK80B,wBAGPD,SAAAA,EAAWnf,iBAAiB,aAAc,KACxC1V,KAAK80B,uBAET,CAEQ,cAAAJ,CAAehjB,GACrBA,EAAMoI,kBACN,MAAMib,EAAarjB,EAAMjE,OACnBwmB,EAAQc,EAAW5xB,GACnB6oB,EAAU+I,EAAWpgB,aAAa,UAAY,GAAGsf,UAEvDj0B,KAAKg1B,UAAUf,EAAOjI,EACxB,CAEQ,cAAA2I,CAAejjB,GACrBA,EAAMoI,kBAGN,IAAIib,EAAarjB,EAAMjE,OAOvB,GAJKsnB,EAAWE,QAAQ,YACtBF,EAAaA,EAAWnY,QAAQ,YAG7BmY,EACH,OAGF,MAAMd,EAAQc,EAAW5xB,GACnB6oB,EAAU+I,EAAWpgB,aAAa,UAAY,GAAGsf,UAGnDc,EAAWvf,aAAa,mBAK5Buf,EAAWla,aAAa,gBAAiB,QAGtBtJ,EACjBvR,KACA,YACA,CACEi0B,QACAC,IAAKa,EACL/I,UACAC,MAAOjsB,KAAKwW,cACV,oBAAoBwV,OAEtBjC,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,MAEb,CAAE4R,SAAS,KAKX2B,WAAW,KACTvT,KAAKk1B,UAAUjB,IACd,GAEP,CAEQ,SAAAe,CAAUf,EAAejI,GAC/B,MAAM+I,EAAa/0B,KAAKwW,cACtB,cAAcyd,OAEVkB,EAAen1B,KAAKwW,cACxB,oBAAoBwV,OAGtB,IAAK+I,IAAeI,EAClB,OAGF,MAAMC,EAAgBp1B,KAAKw0B,aACrBa,EAAiBr1B,KAAKwV,aAAa,SACrCxV,KAAKyX,OACLhD,EAAkBzU,MAGtBA,KAAK0Z,iBAAiB,UAAU7V,QAAQqwB,SACVnyB,IAAvBmyB,EAAYE,OACdF,EAAYE,QAAS,EAEtBF,EAAIpZ,gBAAgB,UAGjBoZ,EAAYnf,aAAemf,EAAI1e,aAAa,UAC9C0e,EAAYnf,WAAWsgB,KAG5Br1B,KAAK0Z,iBAAiB,gBAAgB7V,QAAQooB,SACdlqB,IAAzBkqB,EAAcmI,OAChBnI,EAAcmI,QAAS,GAExBnI,EAAMnR,gBAAgB,UACrBmR,EAAsB/Z,MAAMsK,QAAU,QAGpCyP,EAAclX,aAAekX,EAAMzW,aAAa,UAClDyW,EAAclX,WAAWsgB,UAKKtzB,IAA9BgzB,EAAmBX,OACrBW,EAAmBX,QAAS,EAE7BW,EAAWla,aAAa,SAAU,SAGC9Y,IAAhCozB,EAAqBf,OACvBe,EAAqBf,QAAS,GAE/Be,EAAata,aAAa,SAAU,IACpCsa,EAAajjB,MAAMsK,QAAU,QAI1BuY,EAAmBhgB,aAAeggB,EAAWvf,aAAa,UAC5Duf,EAAmBhgB,WAAWsgB,GAG9BF,EAAqBpgB,aACrBogB,EAAa3f,aAAa,UAE1B2f,EAAqBpgB,WAAWsgB,GAGnCr1B,KAAKw0B,aAAeP,EACpBj0B,KAAK6a,aAAa,aAAcoZ,GAGhC1iB,EAA8CvR,KAAM,aAAc,CAChEi0B,QACAC,IAAKa,EACL/I,UACAC,MAAOkJ,EACPpL,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,KACXo1B,cAAeA,QAAiBrzB,IAIlCwP,EACEvR,KACA,uBACA,CACE+pB,YAAa/pB,KAAKmD,GAClBkT,UAAWrW,KACXs1B,YAAarB,EACbsB,cAAevJ,GAGrB,CAEQ,SAAAkJ,CAAUjB,GAChB,MAAMc,EAAa/0B,KAAKwW,cACtB,cAAcyd,OAEVjI,GAAU+I,aAAU,EAAVA,EAAYpgB,aAAa,WAAY,GAAGsf,UAClDkB,EAAen1B,KAAKwW,cACxB,oBAAoBwV,OAQtB,GAJA+I,SAAAA,EAAY7f,SACZigB,SAAAA,EAAcjgB,SAGVlV,KAAKw0B,eAAiBP,EAAO,CAC/B,MAAMuB,EAAgBx1B,KAAK0Z,iBAAiB,UAC5C,GAAI8b,EAAczxB,OAAS,EAAG,CAC5B,MAAM0xB,EAAUD,EAAc,GACxBE,EACJD,EAAQ9gB,aAAa,UAAY,GAAG8gB,EAAQtyB,WAC9CnD,KAAKg1B,UAAUS,EAAQtyB,GAAIuyB,E,MAE3B11B,KAAKw0B,aAAe,KACpBx0B,KAAK8a,gBAAgB,a,CAKzB9a,KAAK21B,eACP,CAEQ,mBAAAb,GAEN,MAAMc,EAAO51B,KAAK0Z,iBAAiB,UAC7B0V,EAASpvB,KAAK0Z,iBAAiB,gBAG/B2b,EAAiBr1B,KAAKwV,aAAa,SACrCxV,KAAKyX,OACLhD,EAAkBzU,MAEtB41B,EAAK/xB,QAAQ,CAACqwB,EAAKjM,KACjB,MAAM8M,EAAab,EAGnB,IAAKa,EAAW5xB,KAAO4xB,EAAWvf,aAAa,MAC7C,IACEuf,EAAW5xB,GAAKiO,EAAW,M,CAC3B,MAAOpD,GAGP,YADA6nB,QAAQC,KAAK,kCAAmC9nB,E,CAMpD,GAAIhO,KAAK+zB,YAAcgB,EAAWvf,aAAa,YAC7C,IACEuf,EAAWla,aAAa,WAAY,G,CACpC,MAAO7M,GAEP6nB,QAAQC,KAAK,8CAA+C9nB,E,CAKhE,GAAK+mB,EAAmBhgB,aAAeggB,EAAWvf,aAAa,SAC7D,IACGuf,EAAmBhgB,WAAWsgB,E,CAC/B,MAAOrnB,GACP6nB,QAAQC,KAAK,gCAAiC9nB,E,CAKlD,IAAK+mB,EAAWpgB,aAAa,SAAU,CACrC,MAAMohB,EAAqB3G,EAAOnH,GAClC,GAAI8N,EAAoB,CACtB,IACGA,EAAmB5yB,KACnB4yB,EAAmBvgB,aAAa,MAEjC,IACEugB,EAAmB5yB,GAAK,GAAG4xB,EAAW5xB,U,CACtC,MAAO6K,GAEP,YADA6nB,QAAQC,KAAK,0BAA2B9nB,E,CAI5C,IACE+mB,EAAWla,aAAa,QAASkb,EAAmB5yB,G,CACpD,MAAO6K,GACP6nB,QAAQC,KAAK,+BAAgC9nB,E,MAOrD,IAAIgoB,EAAuC,KACvCT,EAA+B,KAGnC,GAAIv1B,KAAKwV,aAAa,cAAe,CACnC,MAAM8f,EAAct1B,KAAK2U,aAAa,cACtCqhB,EAAmBh2B,KAAKwW,cACtB,cAAc8e,M,CAiFlB,GA5EKU,IACHA,EAAmBh2B,KAAKwW,cAAc,oBAInCwf,GAAoBJ,EAAK7xB,OAAS,IACrCiyB,EAAmBJ,EAAK,IAItBI,IACFT,EACES,EAAiBrhB,aAAa,UAC9B,GAAGqhB,EAAiB7yB,YAGxBisB,EAAOvrB,QAAQooB,IACb,MAAMkJ,EAAelJ,EAGrB,IAAKkJ,EAAahyB,KAAOgyB,EAAa3f,aAAa,MACjD,IACE2f,EAAahyB,GAAKiO,EAAW,Y,CAC7B,MAAOpD,GAEP,YADA6nB,QAAQC,KAAK,0BAA2B9nB,E,CAM5C,GACGmnB,EAAqBpgB,aACrBogB,EAAa3f,aAAa,SAE3B,IACG2f,EAAqBpgB,WAAWsgB,E,CACjC,MAAOrnB,GACP6nB,QAAQC,KAAK,kCAAmC9nB,E,CAKpD,GAAImnB,EAAahyB,KAAOoyB,EAEtB,QAAqCxzB,IAAhCozB,EAAqBf,OACxB,IACGe,EAAqBf,QAAS,C,CAC/B,MAAOpmB,GACP6nB,QAAQC,KAAK,uCAAwC9nB,E,MAGvD,IACEmnB,EAAata,aAAa,SAAU,IACpCsa,EAAajjB,MAAMsK,QAAU,M,CAC7B,MAAOxO,GACP6nB,QAAQC,KAAK,oCAAqC9nB,E,MAItD,QAAqCjM,IAAhCozB,EAAqBf,OACxB,IACGe,EAAqBf,QAAS,C,CAC/B,MAAOpmB,GACP6nB,QAAQC,KAAK,yCAA0C9nB,E,MAGzD,IACEmnB,EAAajjB,MAAMsK,QAAU,M,CAC7B,MAAOxO,GACP6nB,QAAQC,KAAK,wBAAyB9nB,E,KAOzChO,KAAKw0B,cAAgBwB,EAAkB,CAC1C,MAAMhK,EACJgK,EAAiBrhB,aAAa,UAC9B,GAAGqhB,EAAiB7yB,WACtBoQ,WAAW,KACLyiB,GACFh2B,KAAKg1B,UAAUgB,EAAiB7yB,GAAI6oB,IAErC,I,CAEP,CAGO,aAAAiK,CAAchC,GACnB,MAAMc,EAAa/0B,KAAKwW,cACtB,cAAcyd,OAEhB,GAAIc,EAAY,CACd,MAAM/I,EAAU+I,EAAWpgB,aAAa,UAAY,GAAGsf,UACvDj0B,KAAKg1B,UAAUf,EAAOjI,E,CAE1B,CAMO,aAAA2J,GACL,MAAMN,EAAiBr1B,KAAKwV,aAAa,SACrCxV,KAAKyX,OACLhD,EAAkBzU,MAEtBA,KAAK0Z,iBAAiB,UAAU7V,QAASqwB,IACnCA,EAAInf,aAAemf,EAAI1e,aAAa,UACtC0e,EAAInf,WAAWsgB,KAInBr1B,KAAK0Z,iBAAiB,gBAAgB7V,QAASooB,IACzCA,EAAMlX,aAAekX,EAAMzW,aAAa,UAC1CyW,EAAMlX,WAAWsgB,IAGvB,CAEO,MAAAa,CACLzZ,EACA6E,EAAkB,GAClB2S,EACAjI,GAEA,MAAMmK,EAAalC,GAAS7iB,EAAW,OACjCglB,EAAepK,GAAW,GAAGmK,UAI7BjC,EAAM,IADW5gB,OAAOqF,eAAerL,IAAI,WAEjD4mB,EAAI/wB,GAAKgzB,EAGT,MAGMlK,EAAQ,IAHc3Y,OAAOqF,eAAerL,IAChD,iBAGF2e,EAAM9oB,GAAKizB,EAGX,MAAMf,EAAiBr1B,KAAKwV,aAAa,SACrCxV,KAAKyX,OACLhD,EAAkBzU,MAqBtB,OAlBCk0B,EAAYG,cAAgB,CAC3BtC,KAAM,OACN9F,MAAOmK,EACP3Z,MAAOA,EACP0C,SAAUnf,KAAK+zB,UACf/e,MAAOqgB,GAGRpJ,EAAcoI,cAAgB,CAC7BtC,KAAM,SACNzQ,QAASA,EACTtM,MAAOqgB,GAITr1B,KAAKsS,YAAY4hB,GACjBl0B,KAAKsS,YAAY2Z,GAEV,CAAEgI,MAAOkC,EAAYnK,QAASoK,EACvC,CAEO,aAAAC,CAAcpC,GACnBj0B,KAAKk1B,UAAUjB,EACjB,CAEA,eAAWqB,GACT,OAAOt1B,KAAKw0B,YACd,CAEA,QAAWoB,GACT,OAAO51B,KAAK0Z,iBAAiB,SAC/B,CAEA,UAAW0V,GACT,OAAOpvB,KAAK0Z,iBAAiB,eAC/B,CAGA,SAAW1E,GACT,OAAOhV,KAAKyX,MACd,CAEA,SAAWzC,CAAMvP,GACfzF,KAAKyX,OAAShS,EACdzF,KAAK6a,aAAa,QAASpV,GAGvBzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,eAAW6wB,GACT,OAAOt2B,KAAKy0B,YACd,CAEA,eAAW6B,CAAY7wB,GACrBzF,KAAKy0B,aAAehvB,EACpBzF,KAAK6a,aAAa,eAAgBpV,EACpC,CAEA,YAAW0Z,GACT,OAAOnf,KAAK+zB,SACd,CAEA,YAAW5U,CAAS1Z,GAClBzF,KAAK+zB,UAAYtuB,EACbA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,YAIvB9a,KAAK0Z,iBAAiB,UAAU7V,QAAQqwB,IAClCzuB,EACFyuB,EAAIrZ,aAAa,WAAY,IAE7BqZ,EAAIpZ,gBAAgB,aAG1B,CAEA,YAAWnB,GACT,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAWmE,CAASlU,GACdA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEO,UAAA/F,CAAWC,GAChBD,EAAW/U,KAAMgV,GAGjBhV,KAAK0Z,iBAAiB,UAAU7V,QAASqwB,IACnCA,EAAInf,aAAemf,EAAI1e,aAAa,UACtC0e,EAAInf,WAAWC,KAInBhV,KAAK0Z,iBAAiB,gBAAgB7V,QAASooB,IACzCA,EAAMlX,aAAekX,EAAMzW,aAAa,UAC1CyW,EAAMlX,WAAWC,IAGvB,CAEA,wBAAAkD,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAGCkW,GACFpY,KAAKyX,OAASW,EAEVpY,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAK+U,WAAW/U,KAAKyX,SACZzX,KAAKkW,cAEdlW,KAAKyX,OAAS,OACdrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,aACCoY,GAAYA,IAAapY,KAAKw0B,cAChCx0B,KAAKi2B,cAAc7d,GAErB,MACF,IAAK,eACHpY,KAAKy0B,aAAgBrc,GAAoB,MACzC,MACF,IAAK,WACHpY,KAAK+zB,UAAyB,OAAb3b,EAGvB,CAEA,iBAAAP,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,kBAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAK7CA,KAAK80B,qBAiBP,CAEA,oBAAA/c,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,EAIG4W,eAAerL,IAAI,qBACtBqL,eAAe7Y,OAAO,mBAAoBy0B,GCpxBrC,MAAMgC,UAAiBjf,YAK5B,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,SAC/B,CAEA,WAAAhK,GACEiK,QATM,KAAAC,OAAgB,OAChB,KAAAqc,SAAmB,EASzB9zB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,y0IA8JzB,CAGO,IAAAmE,GACL7W,KAAKo0B,QAAS,CAChB,CAEO,IAAA5a,GACLxZ,KAAKo0B,QAAS,CAChB,CAEO,WAAAoC,GACLx2B,KAAKy2B,UAAY,CACnB,CAEO,cAAAC,GACL12B,KAAKy2B,UAAYz2B,KAAK22B,YACxB,CAEO,eAAAC,CAAgBplB,GACjBxR,KAAK2F,SAAS6L,IAChBA,EAAQmW,eAAe,CAAEC,SAAU,SAAUC,MAAO,WAExD,CAEO,YAAAgP,GACL72B,KAAK0S,UAAY,EACnB,CAEO,UAAAokB,CAAWxV,GAEhBthB,KAAK0S,UAAY,GACjB1S,KAAK0S,UAAY4O,CACnB,CAEO,aAAAyV,CAAczV,GACnBthB,KAAKg3B,mBAAmB,YAAa1V,EACvC,CAEO,cAAA2V,CAAe3V,GACpBthB,KAAKg3B,mBAAmB,aAAc1V,EACxC,CAGA,SAAWtM,GACT,OAAOhV,KAAKyX,MACd,CAEA,SAAWzC,CAAMvP,GACfzF,KAAKyX,OAAShS,EACdzF,KAAK6a,aAAa,QAASpV,GAC3BzF,KAAK+U,WAAWtP,GAEhBmQ,EAAkB5V,KAAMyF,EAC1B,CAEA,UAAW2uB,GACT,OAAOp0B,KAAK8zB,OACd,CAEA,UAAWM,CAAO3uB,GAChBzF,KAAK8zB,QAAUruB,EACXA,GACFzF,KAAK6a,aAAa,SAAU,IAC5B7a,KAAKkS,MAAMsK,QAAU,SAErBxc,KAAK8a,gBAAgB,UACrB9a,KAAKkS,MAAMsK,QAAU,OAEzB,CAEA,YAAW7C,GACT,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAWmE,CAASlU,GACdA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,WAAWoc,GACT,OAAOl3B,KAAKwV,aAAa,UAC3B,CAEA,WAAW0hB,CAAQzxB,GACbA,EACFzF,KAAK6a,aAAa,UAAW,IAE7B7a,KAAK8a,gBAAgB,UAEzB,CAEA,gBAAWqc,GACT,OAAOn3B,KAAK2U,aAAa,uBAAyB,sBACpD,CAEA,gBAAWwiB,CAAa1xB,GACtBzF,KAAK6a,aAAa,qBAAsBpV,EAC1C,CAEO,UAAAsP,CAAWC,GAChBD,EAAW/U,KAAMgV,EACnB,CAEA,wBAAAkD,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QAEClC,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAKyX,OAAUW,GAAsB,OACrCpY,KAAK+U,WAAW/U,KAAKyX,QACrB,MACF,IAAK,SACHzX,KAAK8zB,QAAuB,OAAb1b,EACXpY,KAAK8zB,QACP9zB,KAAKkS,MAAMsK,QAAU,OAErBxc,KAAKkS,MAAMsK,QAAU,OAI7B,CAEA,iBAAA3E,G,MAcE,GAbK7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,cAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAMxCA,KAAaq0B,cAAe,CAC/B,MAAMC,EAASt0B,KAAaq0B,cAGxBC,EAAMvC,MACR/xB,KAAK6a,aAAa,OAAQyZ,EAAMvC,MAE9BuC,EAAMhT,SAGqB,IAAzBthB,KAAKgyB,SAASjuB,QAA6C,MAAb,QAAhB,EAAA/D,KAAKoS,mBAAW,eAAEO,UAClD3S,KAAK0S,UAAY4hB,EAAMhT,SAGvBgT,EAAMtf,OACRhV,KAAK+U,WAAWuf,EAAMtf,cAIhBhV,KAAaq0B,a,CAInBr0B,KAAK8zB,QACP9zB,KAAKkS,MAAMsK,QAAU,OAErBxc,KAAKkS,MAAMsK,QAAU,OAIlBxc,KAAKwV,aAAa,wBACrBxV,KAAKm3B,aAAe,uBAExB,CAEA,oBAAApf,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,EAIG4W,eAAerL,IAAI,iBACtBqL,eAAe7Y,OAAO,eAAgBy2B,GCnXjC,MAAMa,UAAgB9f,YAI3B,6BAAWC,GACT,MAAO,CAAC,QAAS,WACnB,CAEA,WAAAhK,GACEiK,QARM,KAAAC,OAAgB,OAStBzX,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,8xBA8BzB,CAEA,iBAAAmF,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,YAIlBpR,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEID,IAAaC,GAGV,UADClW,IAIAkW,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAInD,CAEA,SAAIgV,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAMA,aAAAqiB,CAAcC,GACSt3B,KAAK0Z,iBAAiB,mBAC9B7V,QAAQ0X,IACfA,IAAS+b,GAA6C,mBAAvB/b,EAAagC,OAC7ChC,EAAagC,SAGpB,EAIG5E,eAAerL,IAAI,eACtBqL,eAAe7Y,OAAO,aAAcs3B,GChI/B,MAAMG,UACHjgB,YAMR,6BAAWC,GACT,MAAO,CAAC,QAAS,OAAQ,QAAS,WAAY,SAChD,CAEA,WAAAhK,GACEiK,QARM,KAAAC,OAAgB,OAStBzX,KAAK2X,cACP,CAEQ,YAAAA,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,4rDAqERI,EAAW0D,cAAc,UACjCd,iBAAiB,QAAS1V,KAAK+b,YAAYhZ,KAAK/C,MACzD,CAEA,iBAAA6X,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,mBAEvBpR,KAAKkc,gBAGAlc,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACL,IAAK,OACHlC,KAAKkc,gBACL,MACF,IAAK,QAGC9D,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,WACHA,KAAKw3B,iBACL,MACF,IAAK,SACHx3B,KAAKy3B,eAGX,CAEQ,aAAAvb,GACN,MAAMpJ,EAAa9S,KAAK8S,WAClB4kB,EAAW5kB,EAAW0D,cAAc,SACpCmhB,EAAY7kB,EAAW0D,cAAc,UAErC+F,EAAOvc,KAAK2U,aAAa,QACzB8H,EAAQzc,KAAK2U,aAAa,UAAY,GAExC4H,GACFmb,EAAStlB,YAAcmK,EACvBmb,EAASxlB,MAAMsK,QAAU,gBAEzBkb,EAASxlB,MAAMsK,QAAU,OAG3Bmb,EAAUvlB,YAAcqK,CAC1B,CAEQ,cAAA+a,GACSx3B,KAAK8S,WAAY0D,cAAc,UACvCmD,SAAW3Z,KAAKwV,aAAa,WACtC,CAEQ,YAAAiiB,GACSz3B,KAAK8S,WAAY0D,cAAc,UACvCvB,UAAUoL,OAAO,SAAUrgB,KAAKwV,aAAa,UACtD,CAEQ,WAAAuG,CAAYrK,GAClB,GAAI1R,KAAKwV,aAAa,YAAa,OAEnC,MAAMoiB,EAAc,IAAIjmB,YAAY,uBAAwB,CAC1D1E,OAAQ,CACN4qB,SAAU73B,KAAKmD,GACf2Y,OAAQ9b,MAEV4R,SAAS,EACTC,YAAY,IAGd7R,KAAK8R,cAAc8lB,EACrB,CAEA,SAAI5iB,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,CAEA,SAAIyH,GACF,OAAOzc,KAAK2U,aAAa,UAAY,EACvC,CAEA,SAAI8H,CAAMhX,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,QAAI8W,GACF,OAAOvc,KAAK2U,aAAa,SAAW,EACtC,CAEA,QAAI4H,CAAK9W,GACPzF,KAAK6a,aAAa,OAAQpV,EAC5B,CAEA,UAAI2uB,GACF,OAAOp0B,KAAKwV,aAAa,SAC3B,CAEA,UAAI4e,CAAO3uB,GACLA,EACFzF,KAAK6a,aAAa,SAAU,IAE5B7a,KAAK8a,gBAAgB,SAEzB,EAIGnC,eAAerL,IAAI,sBACtBqL,eAAe7Y,OAAO,oBAAqBy3B,GCjPtC,MAAMO,UACHxgB,YAQR,6BAAWC,GACT,MAAO,CAAC,QAAS,OAAQ,QAAS,WACpC,CAEA,WAAAhK,GACEiK,QAVM,KAAAC,OAAgB,OAChB,KAAAsgB,SAAmB,EACnB,KAAAC,aAAuB,EAS7Bh4B,KAAK2X,eACL3X,KAAKiZ,YACP,CAEQ,YAAAtB,GACN,MAAM7E,EAAaF,EAAc5S,MAEjC8S,EAAWJ,UAAY,imHAgIRI,EAAW0D,cAAc,WACjCd,iBAAiB,QAAS1V,KAAKi4B,kBAAkBl1B,KAAK/C,MAC/D,CAEQ,UAAAiZ,GAENlN,SAAS2J,iBAAiB,QAAS1V,KAAKkZ,oBAAoBnW,KAAK/C,OAGjE+L,SAAS2J,iBAAiB,UAAW1V,KAAKmZ,cAAcpW,KAAK/C,OAG7DsT,OAAOoC,iBAAiB,SAAU1V,KAAKoZ,mBAAmBrW,KAAK/C,OAG/DA,KAAK0V,iBAAiB,QAAS1V,KAAK8kB,gBAAgB/hB,KAAK/C,MAC3D,CAEA,iBAAA6X,GACO7X,KAAKmD,KACRnD,KAAKmD,GAAKiO,EAAW,iBAEvBpR,KAAKkc,gBAGAlc,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACL,IAAK,OACHlC,KAAKkc,gBACL,MACF,IAAK,QAGC9D,EACFpY,KAAKgV,MAAQoD,EACJpY,KAAKkW,cAEdd,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,OAE7C,MACF,IAAK,WACHA,KAAKw3B,iBAGX,CAEQ,aAAAtb,GACN,MAAMpJ,EAAa9S,KAAK8S,WAClB4kB,EAAW5kB,EAAW0D,cAAc,SACpCmhB,EAAY7kB,EAAW0D,cAAc,UAErC+F,EAAOvc,KAAK2U,aAAa,QACzB8H,EAAQzc,KAAK2U,aAAa,UAAY,GAExC4H,GACFmb,EAAStlB,YAAcmK,EACvBmb,EAASxlB,MAAMsK,QAAU,gBAEzBkb,EAASxlB,MAAMsK,QAAU,OAG3Bmb,EAAUvlB,YAAcqK,CAC1B,CAEQ,cAAA+a,GACSx3B,KAAK8S,WAAY0D,cAC9B,WAEKmD,SAAW3Z,KAAKwV,aAAa,YAEhCxV,KAAKwV,aAAa,aAAexV,KAAK+3B,SACxC/3B,KAAKud,OAET,CAEQ,iBAAA0a,CAAkBvmB,GACpB1R,KAAKwV,aAAa,cAEtB9D,EAAMoI,kBAEF9Z,KAAK+3B,QACP/3B,KAAKud,QAELvd,KAAKie,OAET,CAEQ,mBAAA/E,CAAoBxH,G,MAC1B,IAAK1R,KAAK+3B,QAAS,OAGnB,GAAI/3B,KAAKg4B,YAEP,YADAh4B,KAAKg4B,aAAc,GAIrB,MAAMvqB,EAASiE,EAAMjE,OAChBzN,KAAK2F,SAAS8H,KAA2B,QAAf,EAAAzN,KAAK8S,kBAAU,eAAEnN,SAAS8H,KACvDzN,KAAKud,OAET,CAEQ,aAAApE,CAAczH,GACpB,GAAK1R,KAAK+3B,QAEV,OAAQrmB,EAAMtQ,KACZ,IAAK,SACHsQ,EAAMmI,iBACN7Z,KAAKud,QACL,MACF,IAAK,YACH7L,EAAMmI,iBACN7Z,KAAKoa,gBACL,MACF,IAAK,UACH1I,EAAMmI,iBACN7Z,KAAKqa,oBACL,MACF,IAAK,QACL,IAAK,IACH3I,EAAMmI,iBACN7Z,KAAKsa,sBAGX,CAEQ,kBAAAlB,GACFpZ,KAAK+3B,SACP/3B,KAAKud,OAET,CAEQ,eAAAuH,CAAgBpT,GAEtB,MAAMjE,EAASiE,EAAMjE,QAEA,yBAAnBA,EAAO8G,SACP9G,EAAOmP,QAAQ,0BAGfrJ,WAAW,IAAMvT,KAAKud,QAAS,EAEnC,CAEQ,aAAAnD,GACN,MAAM9U,EAAQtF,KAAK0Z,iBAAiB,wCAC9Ba,EAAe5X,MAAM+M,KAAKpK,GAAOkV,UACrC7N,IAAO,MAAC,OAAAA,IAASZ,SAAS0O,gBAAgC,QAAf,EAAA9N,EAAKmG,kBAAU,eAAE2H,iBAI7DnV,EADiBiV,EAAejV,EAAMvB,OAAS,EAAIwW,EAAe,EAAI,GACrCG,OACpC,CAEQ,iBAAAL,GACN,MAAM/U,EAAQtF,KAAK0Z,iBAAiB,wCAC9Ba,EAAe5X,MAAM+M,KAAKpK,GAAOkV,UACrC7N,IAAO,MAAC,OAAAA,IAASZ,SAAS0O,gBAAgC,QAAf,EAAA9N,EAAKmG,kBAAU,eAAE2H,iBAI7DnV,EADiBiV,EAAe,EAAIA,EAAe,EAAIjV,EAAMvB,OAAS,GACrC2W,OACpC,CAEQ,mBAAAJ,GACN,MAAMK,EAAU5O,SAAS0O,cACrBE,GAA+B,yBAApBA,EAAQpG,SACpBoG,EAAgBC,OAErB,CAEQ,cAAAM,GACN,MAAMgd,EAAWl4B,KAAK8S,WAAY0D,cAAc,aAC1C/C,EAAOzT,KAAK0T,wBACZykB,EAAeD,EAASxkB,wBAG1BD,EAAKG,KAAOukB,EAAazc,MAAQpI,OAAOY,YAC1CgkB,EAAShmB,MAAM0B,KAAO,OACtBskB,EAAShmB,MAAM+B,MAAQ,MAEvBikB,EAAShmB,MAAM0B,KAAO,IACtBskB,EAAShmB,MAAM+B,MAAQ,QAIrBR,EAAKI,OAASskB,EAAaxc,OAASrI,OAAOQ,aAC7CokB,EAAShmB,MAAMyB,IAAM,OACrBukB,EAAShmB,MAAM2B,OAAS,OACxBqkB,EAAShmB,MAAMkmB,UAAY,IAC3BF,EAAShmB,MAAMmmB,aAAe,QAE9BH,EAAShmB,MAAMyB,IAAM,OACrBukB,EAAShmB,MAAM2B,OAAS,OACxBqkB,EAAShmB,MAAMkmB,UAAY,MAC3BF,EAAShmB,MAAMmmB,aAAe,IAElC,CAGA,SAAIrjB,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EAGVzF,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAGvB/B,KAAK+U,WAAWtP,EAClB,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,GAGEhV,KAAK0Z,iBACtB,mDAES7V,QAAQ+X,IACwB,mBAA7BA,EAAc7G,YACvB6G,EAAc7G,WAAWC,IAGhC,CAEA,SAAIyH,GACF,OAAOzc,KAAK2U,aAAa,UAAY,EACvC,CAEA,SAAI8H,CAAMhX,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,QAAI8W,GACF,OAAOvc,KAAK2U,aAAa,SAAW,EACtC,CAEA,QAAI4H,CAAK9W,GACPzF,KAAK6a,aAAa,OAAQpV,EAC5B,CAEA,UAAI6yB,GACF,OAAOt4B,KAAK+3B,OACd,CAEA,IAAA9Z,GACE,GAAIje,KAAKwV,aAAa,aAAexV,KAAK+3B,QAAS,OAGnD,MAAMQ,EAAgBv4B,KAAK4c,QAAQ,cAEjC2b,GACgD,mBAAxCA,EAAsBlB,eAE7BkB,EAAsBlB,cAAcr3B,MAGvCA,KAAK+3B,SAAU,EACf,MAAMjc,EAAS9b,KAAK8S,WAAY0D,cAAc,WACxC0hB,EAAWl4B,KAAK8S,WAAY0D,cAAc,aAEhDsF,EAAO7G,UAAUE,IAAI,QACrB+iB,EAASjjB,UAAUE,IAAI,QAGvBnV,KAAKkb,iBAGLlb,KAAKg4B,aAAc,EAGnBh4B,KAAK+U,WAAW/U,KAAKyX,QAGrB,MAAM+gB,EAAY,IAAI7mB,YAAY,oBAAqB,CACrD1E,OAAQ,CACNqO,OAAQtb,KAAKmD,GACboY,KAAMvb,MAER4R,SAAS,EACTC,YAAY,IAGd7R,KAAK8R,cAAc0mB,EACrB,CAEA,KAAAjb,GACE,IAAKvd,KAAK+3B,QAAS,OAEnB/3B,KAAK+3B,SAAU,EACf,MAAMjc,EAAS9b,KAAK8S,WAAY0D,cAAc,WACxC0hB,EAAWl4B,KAAK8S,WAAY0D,cAAc,aAEhDsF,EAAO7G,UAAUC,OAAO,QACxBgjB,EAASjjB,UAAUC,OAAO,QAG1B,MAAMujB,EAAY,IAAI9mB,YAAY,oBAAqB,CACrD1E,OAAQ,CACNqO,OAAQtb,KAAKmD,GACboY,KAAMvb,MAER4R,SAAS,EACTC,YAAY,IAGd7R,KAAK8R,cAAc2mB,EACrB,CAEA,MAAApY,GACMrgB,KAAK+3B,QACP/3B,KAAKud,QAELvd,KAAKie,MAET,EAIGtF,eAAerL,IAAI,oBACtBqL,eAAe7Y,OAAO,kBAAmBg4B,GCnfpC,MAAMY,UAAyBphB,YAIpC,6BAAWC,GACT,MAAO,CAAC,QACV,CAEA,WAAAhK,GACEiK,QARM,KAAAC,OAAgB,OAStBzX,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,oWAgBzB,CAEA,iBAAAmF,GAEO7X,KAAKwV,aAAa,SAIrBxV,KAAK+U,WAAW/U,KAAKyX,SAHrBrC,EAAoBpV,MACpBA,KAAKqZ,cAAgBhE,EAAsBrV,MAI/C,CAEA,oBAAA+X,GAEM/X,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,EAEzB,CAEA,wBAAAmW,CACEhW,EACAiW,EACAC,GAEID,IAAaC,GAGV,UADClW,IAGAlC,KAAKqZ,gBACPrZ,KAAKqZ,gBACLrZ,KAAKqZ,mBAAgBtX,GAEvB/B,KAAKgV,MAAQoD,EAGnB,CAEA,SAAIpD,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAKyX,OAAShS,EACdzF,KAAK+U,WAAWtP,GAEhBmQ,EAAkB5V,KAAMyF,EAC1B,CAEA,UAAAsP,CAAWC,GACTD,EAAW/U,KAAMgV,EACnB,EAIG2D,eAAerL,IAAI,yBACtBqL,eAAe7Y,OAAO,uBAAwB44B,GC9EzC,MAAMC,UAAiBrhB,YAQ5B,6BAAWC,GACT,MAAO,CAAC,QAAS,WAAY,eAC/B,CAEA,WAAAhK,GACEiK,QAZM,KAAAC,OAAgB,OAEhB,KAAA6M,OAAyB,GACzB,KAAAG,cAAwB,EACxB,KAAAC,eAA8B,IAAIC,IAClC,KAAAiU,eAA8B,IAAIjU,IAQxC3kB,KAAK2X,cACP,CAEQ,YAAAA,GACa/E,EAAc5S,MAEtB0S,UAAY,+6IAwKvB1S,KAAKyoB,sBACLzoB,KAAK64B,YACP,CAEQ,mBAAApQ,GACN,MAAMpS,EAAYrW,KAAK8S,WAAY0D,cACjC,iBAGFH,EAAUX,iBAAiB,QAAS1H,IAClChO,KAAK+b,YAAY/N,KAGnBqI,EAAUX,iBAAiB,WAAY1H,IACrChO,KAAK84B,kBAAkB9qB,KAGzBqI,EAAUX,iBAAiB,cAAe1H,IACxChO,KAAKgZ,kBAAkBhL,IAE3B,CAEQ,UAAA6qB,GACN74B,KAAKqZ,cAAgBhE,EAAsBrV,KAAMgV,IAC/ChV,KAAKyX,OAASzC,EACdD,EAAW/U,KAAMgV,IAErB,CAEQ,WAAA+G,CAAY/N,GAClB,MAAMP,EAASO,EAAEP,OAGjB,GAAIA,EAAOwH,UAAUtP,SAAS,oBAAqB,CACjDqI,EAAE8L,kBACF,MACM+C,EADcpP,EAAOmP,QAAQ,cACRqI,QAAQpI,OAInC,YAHIA,GACF7c,KAAK+4B,eAAelc,G,CAMxB,MAAMmc,EAAcvrB,EAAOmP,QAAQ,sBACnC,GAAIoc,EAAa,CACf,MACMnc,EADcmc,EAAYpc,QAAQ,cACbqI,QAAQpI,OACnC,GAAIA,EAAQ,CACV,MAAMlQ,EAAO3M,KAAKi5B,aAAapc,GAC3BlQ,IAASA,EAAKgN,UAChB3Z,KAAK8kB,gBAAgBjI,EAAQ7O,E,EAIrC,CAEQ,iBAAA8qB,CAAkB9qB,GACxB,MACMgrB,EADShrB,EAAEP,OACUmP,QAAQ,sBAEnC,GAAIoc,EAAa,CACf,MACMnc,EADcmc,EAAYpc,QAAQ,cACbqI,QAAQpI,OACnC,GAAIA,EAAQ,CACV,MAAMlQ,EAAO3M,KAAKi5B,aAAapc,GAC3BlQ,IAASA,EAAKgN,UAChB3Z,KAAKk5B,wBAAwBvsB,EAAMkQ,E,EAI3C,CAEQ,iBAAA7D,CAAkBhL,GACxB,MAAM4L,EAAa5L,EAIbgrB,EAHSpf,EAAWnM,OAGCmP,QAAQ,sBACnC,IAAIjQ,EAA4B,KAC5BkQ,EAAwB,KAE5B,GAAImc,EAAa,CACf,MAAMhU,EAAcgU,EAAYpc,QAAQ,cACxCC,GAASmI,aAAW,EAAXA,EAAaC,QAAQpI,SAAU,KACpCA,IACFlQ,EAAO3M,KAAKi5B,aAAapc,G,CAK7B,MAAM5C,EAAoC,CACxCkf,cAAe,YACfC,YAAap5B,KAAKmD,IAAMiO,IACxBioB,UAAWr5B,KACX2M,OACAkQ,UAIDjD,EAAmBK,iBAAmBA,CACzC,CAEQ,eAAA6K,CAAgBjI,EAAgBnL,GACtC,MAAM/E,EAAO3M,KAAKi5B,aAAapc,GAC/B,IAAKlQ,EAAM,OAEX,MAAM2sB,EAAct5B,KAAK0kB,eAAekB,IAAI/I,GACtCoJ,EAA6B,GAC7BC,EAA+B,GAErC,GAAIlmB,KAAKykB,eAAiB/S,EAAMwT,SAAWxT,EAAM6nB,SAE3CD,GACFt5B,KAAK0kB,eAAemB,OAAOhJ,GAC3BqJ,EAAapc,KAAK6C,KAElB3M,KAAK0kB,eAAevP,IAAI0H,GACxBoJ,EAAWnc,KAAK6C,QAEb,CAEL,MAAM6sB,EAAqB72B,MAAM+M,KAAK1P,KAAK0kB,gBAC3C1kB,KAAK0kB,eAAeiB,QAGpB6T,EAAmB31B,QAAQV,IACzB,MAAMs2B,EAAWz5B,KAAKi5B,aAAa91B,GAC/Bs2B,GAAUvT,EAAapc,KAAK2vB,OAG7BH,GAAeE,EAAmBz1B,OAAS,KAC9C/D,KAAK0kB,eAAevP,IAAI0H,GACxBoJ,EAAWnc,KAAK6C,G,CAIpB3M,KAAK05B,kBAGL15B,KAAK+lB,wBAAwBE,EAAYC,GACzClmB,KAAK25B,kBAAkBhtB,EAAMkQ,EAAQnL,EACvC,CAEQ,cAAAqnB,CAAelc,GACrB,MAAMlQ,EAAO3M,KAAKi5B,aAAapc,GAC1BlQ,GAASA,EAAKqlB,UAAqC,IAAzBrlB,EAAKqlB,SAASjuB,SAEzB/D,KAAK44B,eAAehT,IAAI/I,IAG1C7c,KAAK44B,eAAe/S,OAAOhJ,GAC3B7c,KAAK45B,sBAAsBjtB,EAAMkQ,KAEjC7c,KAAK44B,eAAezjB,IAAI0H,GACxB7c,KAAK65B,oBAAoBltB,EAAMkQ,IAGjC7c,KAAKmhB,SACP,CAEQ,YAAA8X,CACN91B,EACAmC,EAAwBtF,KAAKskB,QAE7B,IAAK,MAAM3X,KAAQrH,EAAO,CACxB,GAAIqH,EAAKxJ,KAAOA,EAAI,OAAOwJ,EAC3B,GAAIA,EAAKqlB,SAAU,CACjB,MAAMvnB,EAAQzK,KAAKi5B,aAAa91B,EAAIwJ,EAAKqlB,UACzC,GAAIvnB,EAAO,OAAOA,C,EAGtB,OAAO,IACT,CAEQ,eAAAivB,GACW15B,KAAK8S,WAAY4G,iBAAiB,sBAC1C7V,QAAQ2N,IACf,MACMqL,EADcrL,EAAQoL,QAAQ,cACTqI,QAAQpI,OAC/BA,GACFrL,EAAQyD,UAAUoL,OAAO,WAAYrgB,KAAK0kB,eAAekB,IAAI/I,KAGnE,CAEQ,MAAAsE,GACN,MAAM9K,EAAYrW,KAAK8S,WAAY0D,cACjC,iBAGyB,IAAvBxW,KAAKskB,OAAOvgB,OAMhBsS,EAAU3D,UAAY1S,KAAK85B,YAAY95B,KAAKskB,QAL1CjO,EAAU3D,UACR,sDAKN,CAEQ,WAAAonB,CAAYx0B,EAAuBy0B,EAAgB,GACzD,OAAOz0B,EAAMrC,IAAI0J,GAAQ3M,KAAKg6B,WAAWrtB,EAAMotB,IAAQr2B,KAAK,GAC9D,CAEQ,UAAAs2B,CAAWrtB,EAAoBotB,GACrC,MAAME,EAActtB,EAAKqlB,UAAYrlB,EAAKqlB,SAASjuB,OAAS,EACtDm2B,EAAal6B,KAAK44B,eAAehT,IAAIjZ,EAAKxJ,IAC1Cg3B,EAAan6B,KAAK0kB,eAAekB,IAAIjZ,EAAKxJ,IAC1Ci3B,EAAaztB,EAAKgN,SAExB,IAAInH,EAAO,gDAC8B7F,EAAKxJ,+CACVg3B,EAAa,WAAa,MAC5DC,EAAa,WAAa,gDAESH,EAAc,eAAiB,MAClEC,EAAa,WAAa,mBAsB5B,OAlBIvtB,EAAK4P,OACP/J,GAAQ,+BAA+B7F,EAAK4P,cAG9C/J,GAAQ,4CAC6BxS,KAAKq6B,WAAW1tB,EAAK8P,qCAItDwd,IACFznB,GAAQ,4CAC2B0nB,EAAa,GAAK,4BAC/Cl6B,KAAK85B,YAAYntB,EAAKqlB,SAAW+H,EAAQ,8BAKjDvnB,GAAQ,SACDA,CACT,CAEQ,UAAA6nB,CAAWrH,GACjB,MAAMsH,EAAMvuB,SAASoG,cAAc,OAEnC,OADAmoB,EAAIloB,YAAc4gB,EACXsH,EAAI5nB,SACb,CAGQ,mBAAAmnB,CAAoBltB,EAAoBkQ,GAC9CtL,EAAmDvR,KAAM,cAAe,CACtEu6B,WAAYv6B,KAAKmD,IAAMiO,IACvBopB,SAAUx6B,KACV2M,OACAkQ,UAEJ,CAEQ,qBAAA+c,CAAsBjtB,EAAoBkQ,GAChDtL,EACEvR,KACA,gBACA,CACEu6B,WAAYv6B,KAAKmD,IAAMiO,IACvBopB,SAAUx6B,KACV2M,OACAkQ,UAGN,CAEQ,uBAAAkJ,CACNE,EACAC,GAEA,MAAMF,EAAgBrjB,MAAM+M,KAAK1P,KAAK0kB,gBACnCzhB,IAAIE,GAAMnD,KAAKi5B,aAAa91B,IAC5BgB,OAAOs2B,SAEVlpB,EACEvR,KACA,wBACA,CACEu6B,WAAYv6B,KAAKmD,IAAMiO,IACvBopB,SAAUx6B,KACVgmB,gBACAG,YAAaxjB,MAAM+M,KAAK1P,KAAK0kB,gBAC7BuB,aACAC,gBAGN,CAEQ,iBAAAyT,CACNhtB,EACAkQ,EACAnL,GAEAH,EACEvR,KACA,kBACA,CACEu6B,WAAYv6B,KAAKmD,IAAMiO,IACvBopB,SAAUx6B,KACV2M,OACAkQ,SACAqI,QAASxT,EAAMwT,QACf/E,SAAUzO,EAAMyO,SAChBgF,OAAQzT,EAAMyT,QAGpB,CAEQ,uBAAA+T,CAAwBvsB,EAAoBkQ,GAClDtL,EACEvR,KACA,qBACA,CACEu6B,WAAYv6B,KAAKmD,IAAMiO,IACvBopB,SAAUx6B,KACV2M,OACAkQ,UAGN,CAGA,wBAAA3E,CACEhW,EACAiW,EACAC,GAEA,GAAID,IAAaC,EAEjB,OAAQlW,GACN,IAAK,QACHlC,KAAKyX,OAAUW,GAAsB,OACrChD,EAAoBpV,MACpB,MACF,IAAK,WAEH,MACF,IAAK,eAEH,GADAA,KAAKykB,aAA4B,OAAbrM,GACfpY,KAAKykB,aAAc,CAEtB,MAAMiW,EAAW/3B,MAAM+M,KAAK1P,KAAK0kB,gBACjC,GAAIgW,EAAS32B,OAAS,EAAG,CACvB,MAAM42B,EAAgBD,EAAS,GAC/B16B,KAAK0kB,eAAeiB,QACpB3lB,KAAK0kB,eAAevP,IAAIwlB,GACxB36B,KAAK05B,iB,GAKf,CAGA,SAAI1kB,GACF,OAAOhV,KAAKyX,MACd,CAEA,SAAIzC,CAAMvP,GACRzF,KAAK6a,aAAa,QAASpV,EAC7B,CAEA,YAAIkU,GACF,OAAO3Z,KAAKwV,aAAa,WAC3B,CAEA,YAAImE,CAASlU,GACPA,EACFzF,KAAK6a,aAAa,WAAY,IAE9B7a,KAAK8a,gBAAgB,WAEzB,CAEA,eAAImM,GACF,OAAOjnB,KAAKykB,YACd,CAEA,eAAIwC,CAAYxhB,GACVA,EACFzF,KAAK6a,aAAa,eAAgB,IAElC7a,KAAK8a,gBAAgB,eAEzB,CAEA,SAAIxV,GACF,MAAO,IAAItF,KAAKskB,OAClB,CAEA,SAAIhf,CAAMG,GACRzF,KAAKskB,OAAS7e,GAAS,GACvBzF,KAAK0kB,eAAeiB,QACpB3lB,KAAK44B,eAAejT,QAGpB3lB,KAAK46B,kBAAkB56B,KAAKskB,QAE5BtkB,KAAKmhB,QACP,CAEQ,iBAAAyZ,CAAkBt1B,GACxB,IAAK,MAAMqH,KAAQrH,EACbqH,EAAKkuB,UACP76B,KAAK44B,eAAezjB,IAAIxI,EAAKxJ,IAE3BwJ,EAAK+tB,UACP16B,KAAK0kB,eAAevP,IAAIxI,EAAKxJ,IAE3BwJ,EAAKqlB,UACPhyB,KAAK46B,kBAAkBjuB,EAAKqlB,SAGlC,CAEA,iBAAIhM,GACF,OAAOrjB,MAAM+M,KAAK1P,KAAK0kB,gBACpBzhB,IAAIE,GAAMnD,KAAKi5B,aAAa91B,IAC5BgB,OAAOs2B,QACZ,CAEA,eAAItU,GACF,OAAOxjB,MAAM+M,KAAK1P,KAAK0kB,eACzB,CAGA,UAAAyC,CAAWtK,GACJ7c,KAAKykB,cACRzkB,KAAK0kB,eAAeiB,QAEtB3lB,KAAK0kB,eAAevP,IAAI0H,GACxB7c,KAAK05B,iBACP,CAEA,YAAAtS,CAAavK,GACX7c,KAAK0kB,eAAemB,OAAOhJ,GAC3B7c,KAAK05B,iBACP,CAEA,cAAAoB,GACE96B,KAAK0kB,eAAeiB,QACpB3lB,KAAK05B,iBACP,CAEA,UAAAqB,CAAWle,GACT,MAAMlQ,EAAO3M,KAAKi5B,aAAapc,GAC3BlQ,GAAQA,EAAKqlB,UAAYrlB,EAAKqlB,SAASjuB,OAAS,IAClD/D,KAAK44B,eAAezjB,IAAI0H,GACxB7c,KAAKmhB,SAET,CAEA,YAAA6Z,CAAane,GACX7c,KAAK44B,eAAe/S,OAAOhJ,GAC3B7c,KAAKmhB,QACP,CAEA,SAAA8Z,GACE,MAAMC,EAAa51B,IACjB,IAAK,MAAMqH,KAAQrH,EACbqH,EAAKqlB,UAAYrlB,EAAKqlB,SAASjuB,OAAS,IAC1C/D,KAAK44B,eAAezjB,IAAIxI,EAAKxJ,IAC7B+3B,EAAUvuB,EAAKqlB,YAIrBkJ,EAAUl7B,KAAKskB,QACftkB,KAAKmhB,QACP,CAEA,WAAAga,GACEn7B,KAAK44B,eAAejT,QACpB3lB,KAAKmhB,QACP,CAEA,oBAAApJ,GACM/X,KAAKqZ,eACPrZ,KAAKqZ,eAET,EAIFV,eAAe7Y,OAAO,eAAgB64B,GClpB/B,MAAMyC,EAAU,Q","sources":["webpack://E2/webpack/universalModuleDefinition","webpack://E2/./node_modules/jsonschema/lib/attribute.js","webpack://E2/./node_modules/jsonschema/lib/index.js","webpack://E2/./node_modules/jsonschema/lib/validator.js","webpack://E2/./node_modules/jsonschema/lib/helpers.js","webpack://E2/./node_modules/jsonschema/lib/scan.js","webpack://E2/webpack/bootstrap","webpack://E2/webpack/runtime/define property getters","webpack://E2/webpack/runtime/hasOwnProperty shorthand","webpack://E2/webpack/runtime/make namespace object","webpack://E2/./src/utils.ts","webpack://E2/./src/elements/app/app.ts","webpack://E2/./src/elements/contextmenu/context-menu.ts","webpack://E2/./src/elements/contextmenu/context-menu-item.ts","webpack://E2/./src/elements/contextmenu/context-menu-separator.ts","webpack://E2/./src/elements/dialog/alert.ts","webpack://E2/./src/elements/dialog/confirm.ts","webpack://E2/./src/elements/dialog/dialog.ts","webpack://E2/./src/elements/dialog/prompt.ts","webpack://E2/./src/elements/keyvalue/keyvalue-editor.ts","webpack://E2/./src/elements/listview/list-view.ts","webpack://E2/./src/elements/notification/notification.ts","webpack://E2/./src/elements/notification/notification-container.ts","webpack://E2/./src/elements/panel/collapsible-panel.ts","webpack://E2/./src/elements/panel/split-panel.ts","webpack://E2/./src/elements/panel/split-panel-container.ts","webpack://E2/./src/elements/statusbar/status-bar.ts","webpack://E2/./src/elements/statusbar/status-item.ts","webpack://E2/./src/elements/statusbar/status-section.ts","webpack://E2/./src/elements/tabs/tab.ts","webpack://E2/./src/elements/tabs/tab-container.ts","webpack://E2/./src/elements/tabs/tab-panel.ts","webpack://E2/./src/elements/toolbar/toolbar.ts","webpack://E2/./src/elements/toolbar/toolbar-button.ts","webpack://E2/./src/elements/toolbar/toolbar-menu.ts","webpack://E2/./src/elements/toolbar/toolbar-separator.ts","webpack://E2/./src/elements/treeview/tree-view.ts","webpack://E2/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"E2\"] = factory();\n\telse\n\t\troot[\"E2\"] = factory();\n})(this, () => {\nreturn ","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'additionalItems': true,\n  'then': true,\n  'else': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true,\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      if(!v) return;\n      var id = v.$id || v.id;\n      return id ? ('<' + id + '>') : (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  var throwAll = options.throwAll;\n  options.throwError = false;\n  options.throwAll = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n  options.throwAll = throwAll;\n\n  if (!res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n    ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      var id = v.$id || v.id;\n      if(id) return '<' + id + '>';\n      return(v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var id = v.$id || v.id;\n      var msg = id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n    ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    var id = v.$id || v.id;\n    return id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates \"then\" or \"else\" depending on the result of validating \"if\"\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.if = function validateIf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) return null;\n  if (!helpers.isSchema(schema.if)) throw new Error('Expected \"if\" keyword to be a schema');\n  var ifValid = testSchemaNoThrow.call(this, instance, options, ctx, null, schema.if);\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var res;\n  if(ifValid){\n    if (schema.then === undefined) return;\n    if (!helpers.isSchema(schema.then)) throw new Error('Expected \"then\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.then, options, ctx.makeChild(schema.then));\n    result.importErrors(res);\n  }else{\n    if (schema.else === undefined) return;\n    if (!helpers.isSchema(schema.else)) throw new Error('Expected \"else\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.else, options, ctx.makeChild(schema.else));\n    result.importErrors(res);\n  }\n  return result;\n};\n\nfunction getEnumerableProperty(object, key){\n  // Determine if `key` shows up in `for(var key in object)`\n  // First test Object.hasOwnProperty.call as an optimization: that guarantees it does\n  if(Object.hasOwnProperty.call(object, key)) return object[key];\n  // Test `key in object` as an optimization; false means it won't\n  if(!(key in object)) return;\n  while( (object = Object.getPrototypeOf(object)) ){\n    if(Object.propertyIsEnumerable.call(object, key)) return object[key];\n  }\n}\n\n/**\n * Validates propertyNames\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.propertyNames = function validatePropertyNames (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var subschema = schema.propertyNames!==undefined ? schema.propertyNames : {};\n  if(!helpers.isSchema(subschema)) throw new SchemaError('Expected \"propertyNames\" to be a schema (object or boolean)');\n\n  for (var property in instance) {\n    if(getEnumerableProperty(instance, property) !== undefined){\n      var res = this.validateSchema(property, subschema, options, ctx.makeChild(subschema));\n      result.importErrors(res);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var subschema = properties[property];\n    if(subschema===undefined){\n      continue;\n    }else if(subschema===null){\n      throw new SchemaError('Unexpected null, expected schema in \"properties\"');\n    }\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, subschema, options, ctx);\n    }\n    var prop = getEnumerableProperty(instance, property);\n    var res = this.validateSchema(prop, subschema, options, ctx.makeChild(subschema, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existence tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"is not allowed to have the additional property \" + JSON.stringify(property),\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var subschema = patternProperties[pattern];\n      if(subschema===undefined){\n        continue;\n      }else if(subschema===null){\n        throw new SchemaError('Unexpected null, expected schema in \"patternProperties\"');\n      }\n      try {\n        var regexp = new RegExp(pattern, 'u');\n      } catch(_e) {\n        // In the event the stricter handling causes an error, fall back on the forgiving handling\n        // DEPRECATED\n        regexp = new RegExp(pattern);\n      }\n      if (!regexp.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, subschema, options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], subschema, options, ctx.makeChild(subschema, property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.items===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    if(Array.isArray(schema.items)){\n      var items =  schema.items[i]===undefined ? schema.additionalItems : schema.items[i];\n    }else{\n      var items = schema.items;\n    }\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates the \"contains\" keyword\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.contains = function validateContains (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.contains===undefined) return;\n  if (!helpers.isSchema(schema.contains)) throw new Error('Expected \"contains\" keyword to be a schema');\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var count = instance.some(function (value, i) {\n    var res = self.validateSchema(value, schema.contains, options, ctx.makeChild(schema.contains, i));\n    return res.errors.length===0;\n  });\n  if(count===false){\n    result.addError({\n      name: 'contains',\n      argument: schema.contains,\n      message: \"must contain an item matching given schema\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    if(!(instance > schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than \" + schema.minimum,\n      });\n    }\n  } else {\n    if(!(instance >= schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than or equal to \" + schema.minimum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    if(!(instance < schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than \" + schema.maximum,\n      });\n    }\n  } else {\n    if(!(instance <= schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than or equal to \" + schema.maximum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMinimum = function validateExclusiveMinimum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMinimum, which is handled by the \"minimum\" keyword.\n  if(typeof schema.exclusiveMinimum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance > schema.exclusiveMinimum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMinimum',\n      argument: schema.exclusiveMinimum,\n      message: \"must be strictly greater than \" + schema.exclusiveMinimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMaximum = function validateExclusiveMaximum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMaximum, which is handled by the \"maximum\" keyword.\n  if(typeof schema.exclusiveMaximum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance < schema.exclusiveMaximum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMaximum',\n      argument: schema.exclusiveMaximum,\n      message: \"must be strictly less than \" + schema.exclusiveMaximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument),\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatibility with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\",\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(getEnumerableProperty(instance, n)===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var pattern = schema.pattern;\n  try {\n    var regexp = new RegExp(pattern, 'u');\n  } catch(_e) {\n    // In the event the stricter handling causes an error, fall back on the forgiving handling\n    // DEPRECATED\n    regexp = new RegExp(pattern);\n  }\n  if (!instance.match(regexp)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern.toString()),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (schema.uniqueItems!==true) return;\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var id = type && (type.$id || type.id);\n      var schemaId = id || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidatorResultError = require('./helpers').ValidatorResultError;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","'use strict';\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar ValidatorResultError = helpers.ValidatorResultError;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.$id || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    // If this schema is already defined, it will be filtered out by the next step\n    this.unresolvedRefs.push(uri);\n  }\n  // Remove newly defined schemas from unresolvedRefs\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!Array.isArray(schemas)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if((typeof schema !== 'boolean' && typeof schema !== 'object') || schema === null){\n    throw new SchemaError('Expected `schema` to be an object or boolean');\n  }\n  if (!options) {\n    options = {};\n  }\n  // This section indexes subschemas in the provided schema, so they don't need to be added with Validator#addSchema\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var id = schema.$id || schema.id;\n  let base = helpers.resolveUrl(options.base,id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, [], base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if(options.required && instance===undefined){\n    var result = new ValidatorResult(instance, schema, options, ctx);\n    result.addError('is required, but is undefined');\n    return result;\n  }\n  var result = this.validateSchema(instance, schema, options, ctx);\n  if (!result) {\n    throw new Error('Result undefined');\n  }else if(options.throwAll && result.errors.length){\n    throw new ValidatorResultError(result);\n  }\n  return result;\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (Array.isArray(schema['extends'])) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema = shouldResolve(schema);\n  if (switchSchema) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.path, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref = shouldResolve(schema);\n  if(ref) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n};\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  let parsed = new URL(switchSchema,'thismessage::/');\n  let fragment = parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if(type===undefined){\n    return;\n  }else if(type===null){\n    throw new SchemaError('Unexpected null in \"type\" keyword');\n  }\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance === 'object') && !(Array.isArray(instance)) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","'use strict';\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, path, name, argument) {\n  if(Array.isArray(path)){\n    this.path = path;\n    this.property = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else if(path !== undefined){\n    this.property = path;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    var id = schema.$id || schema.id;\n    this.schema = id || schema;\n  }\n  if (instance !== undefined) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.options = options;\n  this.path = ctx.path;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.throwFirst = options && options.throwFirst;\n  this.throwAll = options && options.throwAll;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.path);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.path, detail.name, detail.argument);\n  }\n\n  this.errors.push(err);\n  if (this.throwFirst) {\n    throw new ValidatorResultError(this);\n  }else if(this.throwError){\n    throw err;\n  }\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    this.errors = this.errors.concat(res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\nmodule.exports.ValidatorResultError = ValidatorResultError;\nfunction ValidatorResultError(result) {\n  if(typeof Error.captureStackTrace === 'function'){\n    Error.captureStackTrace(this, ValidatorResultError);\n  }\n  this.instance = result.instance;\n  this.schema = result.schema;\n  this.options = result.options;\n  this.errors = result.errors;\n}\nValidatorResultError.prototype = new Error();\nValidatorResultError.prototype.constructor = ValidatorResultError;\nValidatorResultError.prototype.name = \"Validation Error\";\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  if(typeof Error.captureStackTrace === 'function'){\n    Error.captureStackTrace(this, SchemaError);\n  }\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  {\n    constructor: {value: SchemaError, enumerable: false},\n    name: {value: 'SchemaError', enumerable: false},\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, path, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  if(Array.isArray(path)){\n    this.path = path;\n    this.propertyPath = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else{\n    this.propertyPath = path;\n  }\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return (() => resolveUrl(this.base,target))();\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var path = (propertyName===undefined) ? this.path : this.path.concat([propertyName]);\n  var id = schema.$id || schema.id;\n  let base = (() => resolveUrl(this.base,id||''))();\n  var ctx = new SchemaContext(schema, this.options, path, base, Object.create(this.schemas));\n  if(id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n};\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  // 7.3.1. Dates, Times, and Duration\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n  'duration': /P(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S)|\\d+(D|M(\\d+D)?|Y(\\d+M(\\d+D)?)?)(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S))?|\\d+W)/i,\n\n  // 7.3.2. Email Addresses\n  // TODO: fix the email production\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'idn-email': /^(\"(?:[!#-\\[\\]-\\u{10FFFF}]|\\\\[\\t -\\u{10FFFF}])*\"|[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*)@([!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*|\\[[!-Z\\^-\\u{10FFFF}]*\\])$/u,\n\n  // 7.3.3. Hostnames\n\n  // 7.3.4. IP Addresses\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  // FIXME whitespace is invalid\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n\n  // 7.3.5. Resource Identifiers\n  // TODO: A more accurate regular expression for \"uri\" goes:\n  // [A-Za-z][+\\-.0-9A-Za-z]*:((/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?)?#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])|/?%[0-9A-Fa-f]{2}|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*(#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?)?\n  'uri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'uri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/,\n  'iri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'iri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\\u{10FFFF}]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/u,\n  'uuid': /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n\n  // 7.3.6. uri-template\n  'uri-template': /(%[0-9a-f]{2}|[!#$&(-;=?@\\[\\]_a-z~]|\\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?)*\\})*/iu,\n\n  // 7.3.7. JSON Pointers\n  'json-pointer': /^(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*$/iu,\n  'relative-json-pointer': /^\\d+(#|(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*)$/iu,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n\n  // 7.3.8. regex\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n\n  // Other definitions\n  // \"style\" was removed from JSON Schema in draft-4 and is deprecated\n  'style': /[\\r\\n\\t ]*[^\\r\\n\\t ][^:]*:[\\r\\n\\t ]*[^\\r\\n\\t ;]*[\\r\\n\\t ]*;?/,\n  // \"color\" was removed from JSON Schema in draft-4 and is deprecated\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/,\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e);\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e);\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key]);\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n}\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n  // ~ must be encoded explicitly because hacks\n  // the slash is encoded by encodeURIComponent\n  return a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\nexports.isSchema = function isSchema(val){\n  return (typeof val === 'object' && val) || (typeof val === 'boolean');\n};\n\n/**\n * Resolve target URL from a base and relative URL.\n * Similar to Node's URL Lib's legacy resolve function.\n * Code from example in deprecation note in said library.\n * @param string\n * @param string\n * @returns {string}\n */\nvar resolveUrl = exports.resolveUrl = function resolveUrl(from, to) {\n  const resolvedUrl = new URL(to, new URL(from, 'resolve://'));\n  if (resolvedUrl.protocol === 'resolve:') {\n    const { pathname, search, hash } = resolvedUrl;\n    return pathname + search + hash;\n  }\n  return resolvedUrl.toString();\n}\n","\"use strict\";\n\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      let resolvedUri = helpers.resolveUrl(baseuri,schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var id = schema.$id || schema.id;\n    let resolvedBase = helpers.resolveUrl(baseuri,id);\n    var ourBase = id ? resolvedBase : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+ourBase+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', (Array.isArray(schema.items)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', (Array.isArray(schema.extends)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!Array.isArray(schemas)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Utility functions for editor elements\n */\n\n/**\n * Generate a unique ID for elements\n */\nexport function generateId(prefix = 'element'): string {\n  return `${prefix}-${Math.random().toString(36).substring(2, 9)}`;\n}\n\n/**\n * Dispatch a custom event from an element\n */\nexport function dispatchCustomEvent<T = any>(\n  element: HTMLElement,\n  eventName: string,\n  detail?: T,\n  options: CustomEventInit = {}\n): boolean {\n  const event = new CustomEvent(eventName, {\n    detail,\n    bubbles: true,\n    cancelable: true,\n    ...options,\n  });\n\n  return element.dispatchEvent(event);\n}\n\n/**\n * Add CSS to the document head if it doesn't already exist\n */\nexport function addGlobalCSS(css: string, id?: string): void {\n  if (id && document.getElementById(id)) {\n    return; // CSS already added\n  }\n\n  const style = document.createElement('style');\n  if (id) {\n    style.id = id;\n  }\n  style.textContent = css;\n  document.head.appendChild(style);\n}\n\n/**\n * Create a template element with the given HTML\n */\nexport function createTemplate(html: string): HTMLTemplateElement {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return template;\n}\n\n/**\n * Get or create a shadow root for an element\n */\nexport function getShadowRoot(\n  element: HTMLElement,\n  options: ShadowRootInit = { mode: 'open' }\n): ShadowRoot {\n  return element.shadowRoot || element.attachShadow(options);\n}\n\n/**\n * Debounce function to limit how often a function can be called\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: number;\n\n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n  };\n}\n\n/**\n * Check if an element is visible in the viewport\n */\nexport function isElementVisible(element: HTMLElement): boolean {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <=\n      (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n}\n\n/**\n * Find the closest parent e2-app element\n */\nexport function findParentApp(element: HTMLElement): HTMLElement | null {\n  let current = element.parentElement;\n  while (current) {\n    if (current.tagName.toLowerCase() === 'e2-app') {\n      return current;\n    }\n    current = current.parentElement;\n  }\n  return null;\n}\n\n/**\n * Get the effective theme for an element\n * If the element has an explicit theme attribute, use that\n * Otherwise, inherit from the parent e2-app if available\n * Falls back to 'auto' if no parent app found\n */\nexport function getEffectiveTheme(\n  element: HTMLElement\n): 'light' | 'dark' | 'auto' {\n  // Check if element has explicit theme attribute\n  const explicitTheme = element.getAttribute('theme');\n  if (explicitTheme && ['light', 'dark', 'auto'].includes(explicitTheme)) {\n    return explicitTheme as 'light' | 'dark' | 'auto';\n  }\n\n  // Look for parent app theme\n  const parentApp = findParentApp(element);\n  if (parentApp) {\n    const parentTheme = parentApp.getAttribute('theme');\n    if (parentTheme && ['light', 'dark', 'auto'].includes(parentTheme)) {\n      return parentTheme as 'light' | 'dark' | 'auto';\n    }\n  }\n\n  // Default fallback\n  return 'auto';\n}\n\n/**\n * Apply theme class to an element\n */\nexport function applyTheme(\n  element: HTMLElement,\n  theme: 'light' | 'dark' | 'auto'\n): void {\n  element.classList.remove('theme-light', 'theme-dark', 'theme-auto');\n  element.classList.add(`theme-${theme}`);\n}\n\n/**\n * Apply effective theme to an element (with inheritance support)\n */\nexport function applyEffectiveTheme(element: HTMLElement): void {\n  const effectiveTheme = getEffectiveTheme(element);\n  applyTheme(element, effectiveTheme);\n}\n\n/**\n * Setup theme inheritance for an element\n * This should be called in the element's connectedCallback\n */\nexport function setupThemeInheritance(\n  element: HTMLElement,\n  onThemeChange?: (theme: 'light' | 'dark' | 'auto') => void\n): () => void {\n  const handleAppThemeChange = (event: CustomEvent) => {\n    // Only respond if this element doesn't have its own theme attribute\n    if (!element.hasAttribute('theme')) {\n      const newTheme = event.detail.theme;\n      applyTheme(element, newTheme);\n\n      // Call custom handler if provided\n      if (onThemeChange) {\n        onThemeChange(newTheme);\n      }\n    }\n  };\n\n  // Listen for theme changes from parent app\n  document.addEventListener(\n    'e2-app-theme-change',\n    handleAppThemeChange as EventListener\n  );\n\n  // Return cleanup function\n  return () => {\n    document.removeEventListener(\n      'e2-app-theme-change',\n      handleAppThemeChange as EventListener\n    );\n  };\n}\n\n/**\n * Notify all child elements about theme change\n */\nexport function notifyThemeChange(\n  appElement: HTMLElement,\n  theme: 'light' | 'dark' | 'auto'\n): void {\n  // Dispatch a custom event that bubbles up\n  const event = new CustomEvent('e2-app-theme-change', {\n    detail: {\n      theme,\n      appElement,\n    },\n    bubbles: true,\n    cancelable: false,\n  });\n\n  // Dispatch from the app element so it can be captured by child elements\n  appElement.dispatchEvent(event);\n\n  // Also dispatch globally for elements that might not be in the DOM tree yet\n  document.dispatchEvent(event);\n}\n\n/**\n * Initialize theme inheritance for a component\n * This is a helper function that standardizes the theme inheritance pattern\n * Call this in your component's connectedCallback\n */\nexport function initializeThemeInheritance(\n  element: HTMLElement & {\n    applyTheme: (theme: 'light' | 'dark' | 'auto') => void;\n  },\n  currentTheme: 'light' | 'dark' | 'auto'\n): (() => void) | undefined {\n  // Set up theme inheritance if no explicit theme is set\n  if (!element.hasAttribute('theme')) {\n    applyEffectiveTheme(element);\n    return setupThemeInheritance(element);\n  } else {\n    element.applyTheme(currentTheme);\n    return undefined;\n  }\n}\n\n/**\n * Handle theme changes for a component\n * This is a helper function that standardizes theme change handling\n * Call this in your component's theme setter and attributeChangedCallback\n */\nexport function handleThemeChange(\n  element: HTMLElement & {\n    applyTheme: (theme: 'light' | 'dark' | 'auto') => void;\n  },\n  newTheme: 'light' | 'dark' | 'auto' | null,\n  themeCleanupRef: { current?: () => void }\n): void {\n  // Clean up any existing theme inheritance first\n  if (themeCleanupRef.current) {\n    themeCleanupRef.current();\n    themeCleanupRef.current = undefined;\n  }\n\n  if (newTheme) {\n    // Explicit theme set\n    element.applyTheme(newTheme);\n  } else if (element.isConnected) {\n    // Theme attribute removed, switch to inheritance\n    applyEffectiveTheme(element);\n    themeCleanupRef.current = setupThemeInheritance(element);\n  }\n}\n\n/**\n * Create and show a toast notification programmatically\n */\nexport interface CreateToastOptions {\n  title?: string;\n  timeout?: number;\n  dismissible?: boolean;\n  persistent?: boolean;\n  container?: HTMLElement | string;\n}\n\nexport function createToast(\n  type: 'info' | 'success' | 'warning' | 'error',\n  message: string,\n  options: CreateToastOptions = {}\n): Promise<void> {\n  // Create the notification element\n  const notification = document.createElement('e2-notification') as any;\n  notification.type = type;\n  notification.message = message;\n\n  if (options.title) {\n    notification.title = options.title;\n  }\n\n  if (options.timeout !== undefined) {\n    notification.timeout = options.timeout;\n  }\n\n  if (options.dismissible !== undefined) {\n    notification.dismissible = options.dismissible;\n  }\n\n  if (options.persistent !== undefined) {\n    notification.persistent = options.persistent;\n  }\n\n  // Find or create container\n  let container: HTMLElement;\n\n  if (options.container) {\n    if (typeof options.container === 'string') {\n      const found = document.querySelector(options.container);\n      if (found) {\n        container = found as HTMLElement;\n      } else {\n        container = document.body;\n      }\n    } else {\n      container = options.container;\n    }\n  } else {\n    // Look for existing notification container\n    const existingContainer = document.querySelector(\n      'e2-notification-container'\n    );\n    if (existingContainer) {\n      container = existingContainer as HTMLElement;\n    } else {\n      // Create default container\n      const defaultContainer = document.createElement(\n        'e2-notification-container'\n      ) as any;\n      defaultContainer.position = 'top-right';\n      document.body.appendChild(defaultContainer);\n      container = defaultContainer;\n    }\n  }\n\n  // Add notification to container\n  container.appendChild(notification);\n\n  // Show the notification and clean up when done\n  return notification.show().then(() => {\n    // Remove from DOM after hiding animation completes\n    if (notification.parentNode) {\n      notification.parentNode.removeChild(notification);\n    }\n  });\n}\n\n/**\n * Toast API for convenient toast creation\n */\nexport const Toast = {\n  /**\n   * Show an info toast\n   */\n  info: (message: string, options?: CreateToastOptions): Promise<void> =>\n    createToast('info', message, options),\n\n  /**\n   * Show a success toast\n   */\n  success: (message: string, options?: CreateToastOptions): Promise<void> =>\n    createToast('success', message, options),\n\n  /**\n   * Show a warning toast\n   */\n  warning: (message: string, options?: CreateToastOptions): Promise<void> =>\n    createToast('warning', message, options),\n\n  /**\n   * Show an error toast\n   */\n  error: (message: string, options?: CreateToastOptions): Promise<void> =>\n    createToast('error', message, options),\n};\n","/**\n * E2 App Element\n * A wrapper element that provides global CSS styles and theming for E2 applications\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport { applyTheme, generateId, notifyThemeChange } from '../../utils';\n\nexport class E2App extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _stylesInitialized: boolean = false;\n\n  static get observedAttributes(): string[] {\n    return ['theme'];\n  }\n\n  constructor() {\n    super();\n    // Don't set up DOM in constructor - defer to connectedCallback\n  }\n\n  private setupElement(): void {\n    // Apply styles directly to the document head (not to the element itself)\n    // This allows global styles to cascade to child elements without interfering with DOM structure\n\n    // Check if styles are already added to avoid conflicts\n    if (!this._stylesInitialized && !document.getElementById('e2-app-styles')) {\n      const styleElement = document.createElement('style');\n      styleElement.id = 'e2-app-styles';\n      styleElement.textContent = `\n        /* CSS Reset and Base Styles */\n        e2-app, e2-app * {\n          box-sizing: border-box;\n        }\n\n        e2-app {\n          /* Layout */\n          --app-width: 100%;\n          --app-height: 100vh;\n          --app-padding: 0;\n          --app-margin: 0;\n\n          /* Typography */\n          --font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;\n          --font-size: 14px;\n          --line-height: 1.4;\n          --font-weight: 400;\n\n          /* Colors - Light Theme */\n          --bg-primary: #ffffff;\n          --bg-secondary: #f8f9fa;\n          --bg-tertiary: #e9ecef;\n          --text-primary: #212529;\n          --text-secondary: #6c757d;\n          --text-muted: #adb5bd;\n          --border-color: #dee2e6;\n          --border-color-hover: #adb5bd;\n          --accent-color: #0d6efd;\n          --accent-color-hover: #0b5ed7;\n          --success-color: #198754;\n          --warning-color: #ffc107;\n          --danger-color: #dc3545;\n\n          /* Form Controls */\n          --input-bg: #ffffff;\n          --input-border: #ced4da;\n          --input-border-focus: #86b7fe;\n          --input-text: #212529;\n          --input-placeholder: #6c757d;\n          --input-padding: 6px 12px;\n          --input-border-radius: 4px;\n          --input-font-size: 14px;\n\n          /* Buttons */\n          --button-bg: #f8f9fa;\n          --button-bg-hover: #e9ecef;\n          --button-border: #ced4da;\n          --button-text: #212529;\n          --button-padding: 6px 12px;\n          --button-border-radius: 4px;\n\n          /* Shadows */\n          --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\n          --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n          --shadow-lg: 0 4px 6px rgba(0, 0, 0, 0.1);\n\n          /* Transitions */\n          --transition-fast: 0.15s ease-in-out;\n          --transition-normal: 0.3s ease-in-out;\n\n          /* Apply base layout */\n          display: block;\n          width: var(--app-width);\n          height: var(--app-height);\n          padding: var(--app-padding);\n          margin: var(--app-margin);\n          font-family: var(--font-family);\n          font-size: var(--font-size);\n          line-height: var(--line-height);\n          font-weight: var(--font-weight);\n          color: var(--text-primary);\n          background-color: var(--bg-primary);\n          overflow: hidden;\n        }\n\n        /* Dark Theme */\n        e2-app.theme-dark {\n          --bg-primary: #1a1a1a;\n          --bg-secondary: #2d2d2d;\n          --bg-tertiary: #404040;\n          --text-primary: #ffffff;\n          --text-secondary: #cccccc;\n          --text-muted: #999999;\n          --border-color: #404040;\n          --border-color-hover: #666666;\n          --accent-color: #4dabf7;\n          --accent-color-hover: #339af0;\n          --success-color: #51cf66;\n          --warning-color: #ffd43b;\n          --danger-color: #ff6b6b;\n\n          --input-bg: #2d2d2d;\n          --input-border: #404040;\n          --input-border-focus: #4dabf7;\n          --input-text: #ffffff;\n          --input-placeholder: #999999;\n\n          --button-bg: #2d2d2d;\n          --button-bg-hover: #404040;\n          --button-border: #404040;\n          --button-text: #ffffff;\n\n          --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.25);\n          --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n          --shadow-lg: 0 4px 6px rgba(0, 0, 0, 0.3);\n        }\n\n        /* Auto Theme - uses system preference */\n        e2-app.theme-auto {\n          color-scheme: light dark;\n        }\n\n        @media (prefers-color-scheme: dark) {\n          e2-app.theme-auto {\n            --bg-primary: #1a1a1a;\n            --bg-secondary: #2d2d2d;\n            --bg-tertiary: #404040;\n            --text-primary: #ffffff;\n            --text-secondary: #cccccc;\n            --text-muted: #999999;\n            --border-color: #404040;\n            --border-color-hover: #666666;\n            --accent-color: #4dabf7;\n            --accent-color-hover: #339af0;\n            --success-color: #51cf66;\n            --warning-color: #ffd43b;\n            --danger-color: #ff6b6b;\n\n            --input-bg: #2d2d2d;\n            --input-border: #404040;\n            --input-border-focus: #4dabf7;\n            --input-text: #ffffff;\n            --input-placeholder: #999999;\n\n            --button-bg: #2d2d2d;\n            --button-bg-hover: #404040;\n            --button-border: #404040;\n            --button-text: #ffffff;\n\n            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.25);\n            --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n            --shadow-lg: 0 4px 6px rgba(0, 0, 0, 0.3);\n          }\n        }\n\n        /* Typography Styles */\n        e2-app h1, e2-app h2, e2-app h3, e2-app h4, e2-app h5, e2-app h6 {\n          margin: 0 0 0.5em 0;\n          font-weight: 600;\n          line-height: 1.2;\n          color: var(--text-primary);\n        }\n\n        e2-app h1 { font-size: 2rem; }\n        e2-app h2 { font-size: 1.5rem; }\n        e2-app h3 { font-size: 1.25rem; }\n        e2-app h4 { font-size: 1.1rem; }\n        e2-app h5 { font-size: 1rem; }\n        e2-app h6 { font-size: 0.9rem; }\n\n        e2-app p {\n          margin: 0 0 1em 0;\n          color: var(--text-primary);\n        }\n\n        e2-app small {\n          font-size: 0.875em;\n          color: var(--text-secondary);\n        }\n\n        e2-app strong {\n          font-weight: 600;\n        }\n\n        e2-app a {\n          color: var(--accent-color);\n          text-decoration: none;\n          transition: color var(--transition-fast);\n        }\n\n        e2-app a:hover {\n          color: var(--accent-color-hover);\n          text-decoration: underline;\n        }\n\n        /* Form Control Styles */\n        e2-app input[type=\"text\"],\n        e2-app input[type=\"email\"],\n        e2-app input[type=\"password\"],\n        e2-app input[type=\"number\"],\n        e2-app input[type=\"search\"],\n        e2-app input[type=\"url\"],\n        e2-app input[type=\"tel\"],\n        e2-app input[type=\"date\"],\n        e2-app input[type=\"time\"],\n        e2-app input[type=\"datetime-local\"],\n        e2-app textarea,\n        e2-app select {\n          display: block;\n          width: 100%;\n          padding: var(--input-padding);\n          font-size: var(--input-font-size);\n          font-family: var(--font-family);\n          line-height: var(--line-height);\n          color: var(--input-text);\n          background-color: var(--input-bg);\n          background-clip: padding-box;\n          border: 1px solid var(--input-border);\n          border-radius: var(--input-border-radius);\n          transition: border-color var(--transition-fast), box-shadow var(--transition-fast);\n        }\n\n        e2-app input[type=\"text\"]:focus,\n        e2-app input[type=\"email\"]:focus,\n        e2-app input[type=\"password\"]:focus,\n        e2-app input[type=\"number\"]:focus,\n        e2-app input[type=\"search\"]:focus,\n        e2-app input[type=\"url\"]:focus,\n        e2-app input[type=\"tel\"]:focus,\n        e2-app input[type=\"date\"]:focus,\n        e2-app input[type=\"time\"]:focus,\n        e2-app input[type=\"datetime-local\"]:focus,\n        e2-app textarea:focus,\n        e2-app select:focus {\n          outline: 0;\n          border-color: var(--input-border-focus);\n          box-shadow: 0 0 0 2px rgba(13, 110, 253, 0.25);\n        }\n\n        e2-app input::placeholder,\n        e2-app textarea::placeholder {\n          color: var(--input-placeholder);\n          opacity: 1;\n        }\n\n        e2-app input:disabled,\n        e2-app textarea:disabled,\n        e2-app select:disabled {\n          background-color: var(--bg-tertiary);\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        /* Textarea specific */\n        e2-app textarea {\n          resize: vertical;\n          min-height: 80px;\n        }\n\n        /* Select specific */\n        e2-app select {\n          cursor: pointer;\n        }\n\n        /* Checkbox and Radio Styles */\n        e2-app input[type=\"checkbox\"],\n        e2-app input[type=\"radio\"] {\n          width: 16px;\n          height: 16px;\n          margin: 0 8px 0 0;\n          vertical-align: middle;\n          cursor: pointer;\n          accent-color: var(--accent-color);\n        }\n\n        e2-app input[type=\"checkbox\"]:disabled,\n        e2-app input[type=\"radio\"]:disabled {\n          cursor: not-allowed;\n          opacity: 0.6;\n        }\n\n        /* Range Input */\n        e2-app input[type=\"range\"] {\n          width: 100%;\n          height: 6px;\n          background: var(--bg-tertiary);\n          border-radius: 3px;\n          outline: none;\n          cursor: pointer;\n          accent-color: var(--accent-color);\n        }\n\n        /* File Input */\n        e2-app input[type=\"file\"] {\n          display: block;\n          width: 100%;\n          padding: var(--input-padding);\n          font-size: var(--input-font-size);\n          font-family: var(--font-family);\n          color: var(--input-text);\n          background-color: var(--input-bg);\n          border: 1px solid var(--input-border);\n          border-radius: var(--input-border-radius);\n          cursor: pointer;\n        }\n\n        /* Button Styles */\n        e2-app button,\n        e2-app input[type=\"button\"],\n        e2-app input[type=\"submit\"],\n        e2-app input[type=\"reset\"] {\n          display: inline-block;\n          padding: var(--button-padding);\n          font-size: var(--input-font-size);\n          font-family: var(--font-family);\n          font-weight: 500;\n          line-height: var(--line-height);\n          color: var(--button-text);\n          text-align: center;\n          text-decoration: none;\n          vertical-align: middle;\n          cursor: pointer;\n          background-color: var(--button-bg);\n          border: 1px solid var(--button-border);\n          border-radius: var(--button-border-radius);\n          transition: all var(--transition-fast);\n          user-select: none;\n        }\n\n        e2-app button:hover,\n        e2-app input[type=\"button\"]:hover,\n        e2-app input[type=\"submit\"]:hover,\n        e2-app input[type=\"reset\"]:hover {\n          background-color: var(--button-bg-hover);\n          border-color: var(--border-color-hover);\n        }\n\n        e2-app button:focus,\n        e2-app input[type=\"button\"]:focus,\n        e2-app input[type=\"submit\"]:focus,\n        e2-app input[type=\"reset\"]:focus {\n          outline: 0;\n          box-shadow: 0 0 0 2px rgba(13, 110, 253, 0.25);\n        }\n\n        e2-app button:disabled,\n        e2-app input[type=\"button\"]:disabled,\n        e2-app input[type=\"submit\"]:disabled,\n        e2-app input[type=\"reset\"]:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          pointer-events: none;\n        }\n\n        /* Primary Button Variant */\n        e2-app button.primary,\n        e2-app input[type=\"submit\"] {\n          color: white;\n          background-color: var(--accent-color);\n          border-color: var(--accent-color);\n        }\n\n        e2-app button.primary:hover,\n        e2-app input[type=\"submit\"]:hover {\n          background-color: var(--accent-color-hover);\n          border-color: var(--accent-color-hover);\n        }\n\n        /* Label Styles */\n        e2-app label {\n          display: inline-block;\n          margin-bottom: 4px;\n          font-weight: 500;\n          color: var(--text-primary);\n          cursor: pointer;\n        }\n\n        /* Fieldset and Legend */\n        e2-app fieldset {\n          padding: 16px;\n          margin: 0 0 16px 0;\n          border: 1px solid var(--border-color);\n          border-radius: var(--input-border-radius);\n        }\n\n        e2-app legend {\n          padding: 0 8px;\n          font-weight: 600;\n          color: var(--text-primary);\n        }\n\n        /* Form Groups */\n        e2-app .form-group {\n          margin-bottom: 16px;\n        }\n\n        e2-app .form-group label {\n          display: block;\n          margin-bottom: 4px;\n        }\n\n        /* Utility Classes */\n        e2-app .text-muted {\n          color: var(--text-muted) !important;\n        }\n\n        e2-app .text-primary {\n          color: var(--text-primary) !important;\n        }\n\n        e2-app .text-secondary {\n          color: var(--text-secondary) !important;\n        }\n\n        e2-app .bg-primary {\n          background-color: var(--bg-primary) !important;\n        }\n\n        e2-app .bg-secondary {\n          background-color: var(--bg-secondary) !important;\n        }\n\n        e2-app .border {\n          border: 1px solid var(--border-color) !important;\n        }\n\n        e2-app .rounded {\n          border-radius: var(--input-border-radius) !important;\n        }\n\n        e2-app .shadow {\n          box-shadow: var(--shadow) !important;\n        }\n\n        e2-app .shadow-sm {\n          box-shadow: var(--shadow-sm) !important;\n        }\n\n        e2-app .shadow-lg {\n          box-shadow: var(--shadow-lg) !important;\n        }\n      `;\n\n      // Add style element to document head instead of modifying the App element's DOM\n      // This prevents interference with child custom element initialization\n      document.head.appendChild(styleElement);\n      this._stylesInitialized = true;\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('e2-app');\n    }\n\n    // Set up element after it's connected to DOM\n    this.setupElement();\n\n    this.applyTheme(this._theme);\n\n    // Set up system theme detection for auto mode\n    if (this._theme === 'auto') {\n      this.setupAutoTheme();\n    }\n\n    // Notify child elements about initial theme\n    // Use setTimeout to ensure child elements are connected first\n    setTimeout(() => {\n      notifyThemeChange(this, this._theme);\n    }, 0);\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme listeners if any\n    if (this.mediaQueryList) {\n      this.mediaQueryList.removeEventListener('change', this.handleThemeChange);\n    }\n  }\n\n  private mediaQueryList?: MediaQueryList;\n  private handleThemeChange = () => {\n    if (this._theme === 'auto') {\n      this.applyTheme('auto');\n      // Notify child elements about system theme change\n      notifyThemeChange(this, 'auto');\n    }\n  };\n\n  private setupAutoTheme(): void {\n    if (typeof window !== 'undefined' && window.matchMedia) {\n      this.mediaQueryList = window.matchMedia('(prefers-color-scheme: dark)');\n      this.mediaQueryList.addEventListener('change', this.handleThemeChange);\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        this.theme = newValue as Theme;\n        break;\n    }\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    const oldTheme = this._theme;\n    this._theme = value;\n    this.applyTheme(value);\n\n    if (value === 'auto') {\n      this.setupAutoTheme();\n    } else if (this.mediaQueryList) {\n      this.mediaQueryList.removeEventListener('change', this.handleThemeChange);\n      this.mediaQueryList = undefined;\n    }\n\n    // Notify child elements about theme change\n    if (oldTheme !== value) {\n      notifyThemeChange(this, value);\n    }\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  /**\n   * Set a custom CSS property value\n   */\n  setCSSVariable(property: string, value: string): void {\n    this.style.setProperty(`--${property}`, value);\n  }\n\n  /**\n   * Get a custom CSS property value\n   */\n  getCSSVariable(property: string): string {\n    return getComputedStyle(this).getPropertyValue(`--${property}`).trim();\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-app')) {\n  customElements.define('e2-app', E2App);\n}\n","/**\n * Context Menu Element\n * A popup menu that appears on right-click or programmatic trigger\n */\n\nimport {\n  ComponentContext,\n  ContextMenuHideEvent,\n  ContextMenuShowEvent,\n  EditorElementProperties,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ContextMenu\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _visible: boolean = false;\n  private _justShown: boolean = false;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'target'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n    this.bindEvents();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          position: fixed;\n          z-index: 9999;\n          display: none;\n          min-width: 180px;\n          background: var(--context-menu-bg, #ffffff);\n          border: 1px solid var(--context-menu-border, #d0d0d0);\n          border-radius: 4px;\n          box-shadow: var(--context-menu-shadow, 0 2px 8px rgba(0, 0, 0, 0.15));\n          padding: 4px 0;\n          font-family: inherit;\n          font-size: 14px;\n        }\n\n        :host([visible]) {\n          display: block;\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        /* Light theme */\n        :host(.theme-light) {\n          background: var(--context-menu-bg-light, #ffffff);\n          border-color: var(--context-menu-border-light, #d0d0d0);\n          box-shadow: var(--context-menu-shadow-light, 0 2px 8px rgba(0, 0, 0, 0.15));\n        }\n\n        /* Dark theme */\n        :host(.theme-dark) {\n          background: var(--context-menu-bg-dark, #2a2a2a);\n          border-color: var(--context-menu-border-dark, #444444);\n          box-shadow: var(--context-menu-shadow-dark, 0 2px 8px rgba(0, 0, 0, 0.4));\n        }\n\n        /* Auto theme - follows system preference */\n        @media (prefers-color-scheme: dark) {\n          :host(.theme-auto) {\n            background: var(--context-menu-bg-dark, #2a2a2a);\n            border-color: var(--context-menu-border-dark, #444444);\n            box-shadow: var(--context-menu-shadow-dark, 0 2px 8px rgba(0, 0, 0, 0.4));\n          }\n        }\n\n        ::slotted(*) {\n          display: block;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n\n  private bindEvents(): void {\n    // Close menu when clicking outside\n    document.addEventListener('click', this.handleDocumentClick.bind(this));\n\n    // Close menu on escape key\n    document.addEventListener('keydown', this.handleKeyDown.bind(this));\n\n    // Handle window resize\n    window.addEventListener('resize', this.handleWindowResize.bind(this));\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('context-menu');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    this.setupTargetListeners();\n  }\n\n  disconnectedCallback(): void {\n    this.removeTargetListeners();\n\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'target':\n        this.removeTargetListeners();\n        this.setupTargetListeners();\n        break;\n      case 'disabled':\n        if (newValue !== null && this._visible) {\n          this.hide();\n        }\n        break;\n    }\n  }\n\n  private boundContextMenuHandler = this.handleContextMenu.bind(this);\n\n  private setupTargetListeners(): void {\n    const targetSelector = this.getAttribute('target');\n    if (!targetSelector) return;\n\n    const targets = document.querySelectorAll(targetSelector);\n    targets.forEach(target => {\n      target.addEventListener('contextmenu', this.boundContextMenuHandler);\n    });\n  }\n\n  private removeTargetListeners(): void {\n    const targetSelector = this.getAttribute('target');\n    if (!targetSelector) return;\n\n    const targets = document.querySelectorAll(targetSelector);\n    targets.forEach(target => {\n      target.removeEventListener('contextmenu', this.boundContextMenuHandler);\n    });\n  }\n\n  private handleContextMenu(event: Event): void {\n    if (this.disabled) return;\n\n    const mouseEvent = event as MouseEvent;\n    mouseEvent.preventDefault();\n    mouseEvent.stopPropagation();\n\n    const trigger = mouseEvent.currentTarget as HTMLElement;\n    const componentContext = (mouseEvent as any).componentContext as\n      | ComponentContext\n      | undefined;\n\n    this.show(\n      mouseEvent.clientX,\n      mouseEvent.clientY,\n      trigger,\n      componentContext\n    );\n  }\n\n  private handleDocumentClick(event: MouseEvent): void {\n    if (!this._visible) return;\n\n    // Ignore the click that just triggered the menu to show\n    if (this._justShown) {\n      this._justShown = false;\n      return;\n    }\n\n    const target = event.target as Node;\n    if (!this.contains(target) && !this.shadowRoot?.contains(target)) {\n      this.hide();\n    }\n  }\n\n  private handleKeyDown(event: KeyboardEvent): void {\n    if (!this._visible) return;\n\n    switch (event.key) {\n      case 'Escape':\n        event.preventDefault();\n        this.hide();\n        break;\n      case 'ArrowDown':\n        event.preventDefault();\n        this.focusNextItem();\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.focusPreviousItem();\n        break;\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        this.activateFocusedItem();\n        break;\n    }\n  }\n\n  private handleWindowResize(): void {\n    if (this._visible) {\n      this.hide();\n    }\n  }\n\n  private focusNextItem(): void {\n    const items = this.querySelectorAll('e2-context-menu-item:not([disabled])');\n    const currentIndex = Array.from(items).findIndex(\n      item => item === document.activeElement || item.shadowRoot?.activeElement\n    );\n\n    const nextIndex = currentIndex < items.length - 1 ? currentIndex + 1 : 0;\n    (items[nextIndex] as HTMLElement).focus();\n  }\n\n  private focusPreviousItem(): void {\n    const items = this.querySelectorAll('e2-context-menu-item:not([disabled])');\n    const currentIndex = Array.from(items).findIndex(\n      item => item === document.activeElement || item.shadowRoot?.activeElement\n    );\n\n    const prevIndex = currentIndex > 0 ? currentIndex - 1 : items.length - 1;\n    (items[prevIndex] as HTMLElement).focus();\n  }\n\n  private activateFocusedItem(): void {\n    const focused = document.activeElement;\n    if (focused && focused.tagName === 'e2-context-menu-ITEM') {\n      (focused as any).click();\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  get target(): string | null {\n    return this.getAttribute('target');\n  }\n\n  set target(value: string | null) {\n    if (value) {\n      this.setAttribute('target', value);\n    } else {\n      this.removeAttribute('target');\n    }\n  }\n\n  show(\n    x: number,\n    y: number,\n    trigger?: HTMLElement,\n    componentContext?: ComponentContext\n  ): void {\n    if (this.disabled) return;\n\n    this._visible = true;\n    this.setAttribute('visible', '');\n\n    // Position the menu\n    this.style.left = `${x}px`;\n    this.style.top = `${y}px`;\n\n    // Ensure menu stays within viewport\n    this.adjustPosition();\n\n    // Set the flag to prevent immediate hiding, reset it after a short delay\n    this._justShown = true;\n    setTimeout(() => {\n      this._justShown = false;\n    }, 50);\n\n    // Ensure all child items have the correct theme\n    this.applyTheme(this._theme);\n\n    // Focus first item\n    requestAnimationFrame(() => {\n      const firstItem = this.querySelector(\n        'e2-context-menu-item:not([disabled])'\n      ) as HTMLElement;\n      if (firstItem) {\n        firstItem.focus();\n      }\n    });\n\n    // Dispatch show event\n    const eventDetail: ContextMenuShowEvent['detail'] = {\n      menuId: this.id,\n      menu: this,\n      x,\n      y,\n      trigger: trigger || this,\n    };\n\n    if (componentContext) {\n      eventDetail.componentContext = componentContext;\n    }\n\n    dispatchCustomEvent<ContextMenuShowEvent['detail']>(\n      this,\n      'context-menu-show',\n      eventDetail\n    );\n  }\n\n  hide(): void {\n    if (!this._visible) return;\n\n    this._visible = false;\n    this.removeAttribute('visible');\n\n    // Dispatch hide event\n    dispatchCustomEvent<ContextMenuHideEvent['detail']>(\n      this,\n      'context-menu-hide',\n      {\n        menuId: this.id,\n        menu: this,\n      }\n    );\n  }\n\n  private adjustPosition(): void {\n    const rect = this.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    let left = parseInt(this.style.left);\n    let top = parseInt(this.style.top);\n\n    // Adjust horizontal position\n    if (left + rect.width > viewportWidth) {\n      left = viewportWidth - rect.width - 10;\n    }\n    if (left < 10) {\n      left = 10;\n    }\n\n    // Adjust vertical position\n    if (top + rect.height > viewportHeight) {\n      top = viewportHeight - rect.height - 10;\n    }\n    if (top < 10) {\n      top = 10;\n    }\n\n    this.style.left = `${left}px`;\n    this.style.top = `${top}px`;\n  }\n\n  applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n\n    // Apply theme to all child context menu items and separators\n    const childItems = this.querySelectorAll(\n      'e2-context-menu-item, e2-context-menu-separator'\n    );\n    childItems.forEach(child => {\n      if (typeof (child as any).applyTheme === 'function') {\n        (child as any).applyTheme(theme);\n      }\n    });\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-context-menu')) {\n  customElements.define('e2-context-menu', ContextMenu);\n}\n","/**\n * Context Menu Item Element\n * A clickable item within a context menu\n */\n\nimport {\n  ContextMenuItemClickEvent,\n  EditorElementProperties,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ContextMenuItem\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['label', 'icon', 'theme', 'disabled', 'value', 'shortcut'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n        }\n\n        .item {\n          display: flex;\n          align-items: center;\n          padding: 8px 16px;\n          cursor: pointer;\n          color: var(--context-menu-item-color, #333);\n          background: transparent;\n          border: none;\n          width: 100%;\n          text-align: left;\n          font-family: inherit;\n          font-size: inherit;\n          line-height: 1.4;\n          transition: background-color 0.15s ease;\n          outline: none;\n        }\n\n        .item:hover,\n        .item:focus {\n          background: var(--context-menu-item-hover-bg, rgba(0, 0, 0, 0.1));\n        }\n\n        .item:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .item:disabled:hover {\n          background: transparent;\n        }\n\n        .icon {\n          width: 16px;\n          height: 16px;\n          margin-right: 8px;\n          flex-shrink: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .icon:empty {\n          margin-right: 0;\n          width: 0;\n        }\n\n        .content {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          min-width: 0;\n        }\n\n        .label {\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n        .shortcut {\n          color: var(--context-menu-item-shortcut-color, #666);\n          font-size: 0.85em;\n          margin-left: 12px;\n          flex-shrink: 0;\n        }\n\n        /* Light theme */\n        :host(.theme-light) .item {\n          color: var(--context-menu-item-color-light, #333);\n        }\n\n        :host(.theme-light) .item:hover,\n        :host(.theme-light) .item:focus {\n          background: var(--context-menu-item-hover-bg-light, rgba(0, 0, 0, 0.1));\n        }\n\n        :host(.theme-light) .shortcut {\n          color: var(--context-menu-item-shortcut-color-light, #666);\n        }\n\n        /* Dark theme */\n        :host(.theme-dark) .item {\n          color: var(--context-menu-item-color-dark, #fff);\n        }\n\n        :host(.theme-dark) .item:hover,\n        :host(.theme-dark) .item:focus {\n          background: var(--context-menu-item-hover-bg-dark, rgba(255, 255, 255, 0.1));\n        }\n\n        :host(.theme-dark) .shortcut {\n          color: var(--context-menu-item-shortcut-color-dark, #aaa);\n        }\n\n        /* Auto theme - follows system preference */\n        @media (prefers-color-scheme: dark) {\n          :host(.theme-auto) .item {\n            color: var(--context-menu-item-color-dark, #fff);\n          }\n\n          :host(.theme-auto) .item:hover,\n          :host(.theme-auto) .item:focus {\n            background: var(--context-menu-item-hover-bg-dark, rgba(255, 255, 255, 0.1));\n          }\n\n          :host(.theme-auto) .shortcut {\n            color: var(--context-menu-item-shortcut-color-dark, #aaa);\n          }\n        }\n      </style>\n      <button class=\"item\" type=\"button\">\n        <span class=\"icon\"></span>\n        <div class=\"content\">\n          <span class=\"label\"></span>\n          <span class=\"shortcut\"></span>\n        </div>\n      </button>\n    `;\n\n    const button = shadowRoot.querySelector('.item')!;\n    button.addEventListener('click', this.handleClick.bind(this));\n    button.addEventListener('keydown', (event: Event) =>\n      this.handleKeyDown(event as KeyboardEvent)\n    );\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('context-menu-item');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Make the element focusable\n    this.tabIndex = 0;\n    this.addEventListener('focus', this.handleFocus.bind(this));\n\n    this.updateContent();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'label':\n      case 'icon':\n      case 'shortcut':\n        this.updateContent();\n        break;\n      case 'disabled':\n        this.updateDisabledState();\n        break;\n    }\n  }\n\n  private updateContent(): void {\n    if (!this.shadowRoot) return;\n\n    const iconElement = this.shadowRoot.querySelector('.icon') as HTMLElement;\n    const labelElement = this.shadowRoot.querySelector('.label') as HTMLElement;\n    const shortcutElement = this.shadowRoot.querySelector(\n      '.shortcut'\n    ) as HTMLElement;\n\n    // Update icon\n    const icon = this.getAttribute('icon');\n    if (icon) {\n      iconElement.textContent = icon;\n      iconElement.style.display = 'flex';\n    } else {\n      iconElement.textContent = '';\n      iconElement.style.display = 'none';\n    }\n\n    // Update label\n    const label = this.getAttribute('label') || this.textContent?.trim() || '';\n    labelElement.textContent = label;\n\n    // Update shortcut\n    const shortcut = this.getAttribute('shortcut');\n    if (shortcut) {\n      shortcutElement.textContent = shortcut;\n      shortcutElement.style.display = 'block';\n    } else {\n      shortcutElement.textContent = '';\n      shortcutElement.style.display = 'none';\n    }\n  }\n\n  private updateDisabledState(): void {\n    if (!this.shadowRoot) return;\n\n    const button = this.shadowRoot.querySelector('.item') as HTMLButtonElement;\n    button.disabled = this.disabled;\n  }\n\n  private handleClick(event: Event): void {\n    if (this.disabled) return;\n\n    event.stopPropagation();\n\n    // Find the parent context menu\n    const contextMenu = this.closest('e2-context-menu');\n\n    // Dispatch item click event\n    dispatchCustomEvent<ContextMenuItemClickEvent['detail']>(\n      this,\n      'context-menu-item-click',\n      {\n        itemId: this.id,\n        item: this,\n        menuId: contextMenu?.id || '',\n        menu: contextMenu as HTMLElement,\n        value: this.value,\n      }\n    );\n\n    // Hide the context menu\n    if (contextMenu && typeof (contextMenu as any).hide === 'function') {\n      (contextMenu as any).hide();\n    }\n  }\n\n  private handleKeyDown(event: KeyboardEvent): void {\n    if (this.disabled) return;\n\n    // Let the parent context menu handle navigation keys\n    if (['ArrowDown', 'ArrowUp', 'Escape'].includes(event.key)) {\n      return;\n    }\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      this.handleClick(event);\n    }\n  }\n\n  private handleFocus(): void {\n    if (!this.shadowRoot) return;\n\n    const button = this.shadowRoot.querySelector('.item') as HTMLButtonElement;\n    button.focus();\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  get label(): string {\n    return this.getAttribute('label') || '';\n  }\n\n  set label(value: string) {\n    this.setAttribute('label', value);\n  }\n\n  get icon(): string {\n    return this.getAttribute('icon') || '';\n  }\n\n  set icon(value: string) {\n    if (value) {\n      this.setAttribute('icon', value);\n    } else {\n      this.removeAttribute('icon');\n    }\n  }\n\n  get value(): string {\n    return this.getAttribute('value') || this.label;\n  }\n\n  set value(value: string) {\n    this.setAttribute('value', value);\n  }\n\n  get shortcut(): string {\n    return this.getAttribute('shortcut') || '';\n  }\n\n  set shortcut(value: string) {\n    if (value) {\n      this.setAttribute('shortcut', value);\n    } else {\n      this.removeAttribute('shortcut');\n    }\n  }\n\n  click(): void {\n    if (!this.disabled) {\n      this.handleClick(new Event('click'));\n    }\n  }\n\n  focus(): void {\n    super.focus();\n    this.handleFocus();\n  }\n\n  applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-context-menu-item')) {\n  customElements.define('e2-context-menu-item', ContextMenuItem);\n}\n","/**\n * Context Menu Separator Element\n * A visual separator line between context menu items\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ContextMenuSeparator\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          margin: 4px 0;\n        }\n\n        .separator {\n          height: 1px;\n          background: var(--context-menu-separator-color, #e0e0e0);\n          margin: 0 8px;\n        }\n\n        /* Light theme */\n        :host(.theme-light) .separator {\n          background: var(--context-menu-separator-color-light, #e0e0e0);\n        }\n\n        /* Dark theme */\n        :host(.theme-dark) .separator {\n          background: var(--context-menu-separator-color-dark, #555);\n        }\n\n        /* Auto theme - follows system preference */\n        @media (prefers-color-scheme: dark) {\n          :host(.theme-auto) .separator {\n            background: var(--context-menu-separator-color-dark, #555);\n          }\n        }\n      </style>\n      <div class=\"separator\"></div>\n    `;\n  }\n\n  connectedCallback(): void {\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get disabled(): boolean {\n    return false; // Separators cannot be disabled\n  }\n\n  set disabled(_value: boolean) {\n    // Separators cannot be disabled\n  }\n\n  applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-context-menu-separator')) {\n  customElements.define('e2-context-menu-separator', ContextMenuSeparator);\n}\n","/**\n * Alert Dialog Element\n * A specialized dialog for displaying messages and notifications\n */\n\nimport { AlertType, EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class AlertDialogElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _nativeDialog: HTMLDialogElement | null = null;\n  private _resolvePromise: ((value: void) => void) | null = null;\n  private _rejectPromise: ((reason?: any) => void) | null = null;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['title', 'message', 'button-text', 'theme', 'type'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --dialog-bg: #ffffff;\n          --dialog-border: #e0e0e0;\n          --dialog-shadow: rgba(0, 0, 0, 0.25);\n          --dialog-backdrop: rgba(0, 0, 0, 0.5);\n          --text-color: #333333;\n          --text-secondary: #666666;\n          --button-bg: #007bff;\n          --button-hover: #0056b3;\n          --button-active: #004085;\n          --icon-info: #17a2b8;\n          --icon-success: #28a745;\n          --icon-warning: #ffc107;\n          --icon-error: #dc3545;\n\n          display: block;\n        }\n\n        :host(.theme-dark) {\n          --dialog-bg: #2d2d2d;\n          --dialog-border: #555555;\n          --dialog-shadow: rgba(0, 0, 0, 0.5);\n          --dialog-backdrop: rgba(0, 0, 0, 0.7);\n          --text-color: #ffffff;\n          --text-secondary: #cccccc;\n          --button-bg: #0d6efd;\n          --button-hover: #0b5ed7;\n          --button-active: #0a58ca;\n          --icon-info: #0dcaf0;\n          --icon-success: #198754;\n          --icon-warning: #fd7e14;\n          --icon-error: #dc3545;\n        }\n\n        dialog {\n          border: 1px solid var(--dialog-border);\n          border-radius: 8px;\n          padding: 0;\n          background: var(--dialog-bg);\n          color: var(--text-color);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          box-shadow: 0 8px 24px var(--dialog-shadow);\n          min-width: 320px;\n          max-width: 500px;\n          animation: dialog-fade-in 0.2s ease-out;\n        }\n\n        dialog::backdrop {\n          background: var(--dialog-backdrop);\n          animation: backdrop-fade-in 0.2s ease-out;\n        }\n\n        @keyframes dialog-fade-in {\n          from {\n            opacity: 0;\n            transform: scale(0.9) translateY(-20px);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n        }\n\n        @keyframes backdrop-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        .dialog-content {\n          padding: 24px;\n        }\n\n        .dialog-header {\n          display: flex;\n          align-items: flex-start;\n          gap: 12px;\n          margin-bottom: 16px;\n        }\n\n        .dialog-icon {\n          flex-shrink: 0;\n          width: 24px;\n          height: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 20px;\n          margin-top: 2px;\n        }\n\n        .dialog-icon.type-info {\n          color: var(--icon-info);\n        }\n\n        .dialog-icon.type-success {\n          color: var(--icon-success);\n        }\n\n        .dialog-icon.type-warning {\n          color: var(--icon-warning);\n        }\n\n        .dialog-icon.type-error {\n          color: var(--icon-error);\n        }\n\n        .dialog-text {\n          flex: 1;\n        }\n\n        .dialog-title {\n          font-size: 18px;\n          font-weight: 600;\n          margin: 0 0 8px 0;\n          color: var(--text-color);\n        }\n\n        .dialog-message {\n          color: var(--text-secondary);\n          line-height: 1.5;\n          margin: 0;\n          white-space: pre-wrap;\n        }\n\n        .dialog-buttons {\n          display: flex;\n          justify-content: center;\n          margin-top: 24px;\n        }\n\n        .dialog-button {\n          padding: 10px 24px;\n          border: none;\n          border-radius: 4px;\n          background: var(--button-bg);\n          color: white;\n          font-family: inherit;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.15s ease;\n          min-width: 100px;\n        }\n\n        .dialog-button:hover {\n          background: var(--button-hover);\n        }\n\n        .dialog-button:active {\n          background: var(--button-active);\n        }\n\n        .dialog-button:focus {\n          outline: 2px solid var(--button-bg);\n          outline-offset: 2px;\n        }\n\n        :host([hidden]) {\n          display: none !important;\n        }\n      </style>\n\n      <dialog part=\"dialog\">\n        <div class=\"dialog-content\" part=\"content\">\n          <div class=\"dialog-header\" part=\"header\">\n            <div class=\"dialog-icon type-info\" part=\"icon\">ℹ️</div>\n            <div class=\"dialog-text\" part=\"text\">\n              <h3 class=\"dialog-title\" part=\"title\">Information</h3>\n              <p class=\"dialog-message\" part=\"message\">This is an alert message.</p>\n            </div>\n          </div>\n\n          <div class=\"dialog-buttons\" part=\"buttons\">\n            <button class=\"dialog-button\" part=\"button\" type=\"button\">\n              OK\n            </button>\n          </div>\n        </div>\n      </dialog>\n    `;\n\n    this._nativeDialog = shadowRoot.querySelector('dialog');\n    const button = shadowRoot.querySelector('.dialog-button');\n\n    // Set up event listeners\n    if (this._nativeDialog) {\n      this._nativeDialog.addEventListener('close', this.handleClose.bind(this));\n      this._nativeDialog.addEventListener(\n        'cancel',\n        this.handleCancel.bind(this)\n      );\n    }\n\n    if (button) {\n      button.addEventListener('click', () => this.close());\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('alert-dialog');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Apply initial theme\n    this.applyTheme(this._theme);\n    this.updateContent();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'title':\n      case 'message':\n      case 'button-text':\n      case 'type':\n        this.updateContent();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n    }\n  }\n\n  private updateContent(): void {\n    const titleElement = this.shadowRoot?.querySelector('.dialog-title');\n    const messageElement = this.shadowRoot?.querySelector('.dialog-message');\n    const buttonElement = this.shadowRoot?.querySelector('.dialog-button');\n    const iconElement = this.shadowRoot?.querySelector('.dialog-icon');\n\n    if (titleElement) {\n      titleElement.textContent =\n        this.getAttribute('title') || this.getDefaultTitle();\n    }\n\n    if (messageElement) {\n      messageElement.textContent =\n        this.getAttribute('message') || 'This is an alert message.';\n    }\n\n    if (buttonElement) {\n      buttonElement.textContent = this.getAttribute('button-text') || 'OK';\n    }\n\n    if (iconElement) {\n      const type = this.getAttribute('type') || 'info';\n      iconElement.className = `dialog-icon type-${type}`;\n      iconElement.textContent = this.getIconForType(type);\n    }\n  }\n\n  private getDefaultTitle(): string {\n    const type = this.getAttribute('type') || 'info';\n    switch (type) {\n      case 'success':\n        return 'Success';\n      case 'warning':\n        return 'Warning';\n      case 'error':\n        return 'Error';\n      default:\n        return 'Information';\n    }\n  }\n\n  private getIconForType(type: string): string {\n    switch (type) {\n      case 'success':\n        return '✅';\n      case 'warning':\n        return '⚠️';\n      case 'error':\n        return '❌';\n      default:\n        return 'ℹ️';\n    }\n  }\n\n  private handleClose(): void {\n    if (this._resolvePromise) {\n      this._resolvePromise();\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'alert-dialog-close', {\n      dialogId: this.id,\n      dialog: this,\n    });\n  }\n\n  private handleCancel(event: Event): void {\n    const cancelable = dispatchCustomEvent(this, 'alert-dialog-cancel', {\n      dialogId: this.id,\n      dialog: this,\n    });\n\n    if (!cancelable) {\n      event.preventDefault();\n    } else {\n      this.close();\n    }\n  }\n\n  private close(): void {\n    if (this._resolvePromise) {\n      this._resolvePromise();\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'alert-dialog-dismiss', {\n      dialogId: this.id,\n      dialog: this,\n    });\n\n    this._nativeDialog?.close();\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get title(): string {\n    return this.getAttribute('title') || this.getDefaultTitle();\n  }\n\n  set title(value: string) {\n    this.setAttribute('title', value);\n  }\n\n  get message(): string {\n    return this.getAttribute('message') || 'This is an alert message.';\n  }\n\n  set message(value: string) {\n    this.setAttribute('message', value);\n  }\n\n  get buttonText(): string {\n    return this.getAttribute('button-text') || 'OK';\n  }\n\n  set buttonText(value: string) {\n    this.setAttribute('button-text', value);\n  }\n\n  get type(): AlertType {\n    return (this.getAttribute('type') || 'info') as AlertType;\n  }\n\n  set type(value: AlertType) {\n    this.setAttribute('type', value);\n  }\n\n  get open(): boolean {\n    return this._nativeDialog?.open || false;\n  }\n\n  /**\n   * Show the alert dialog and return a promise that resolves when dismissed\n   */\n  public show(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this._resolvePromise) {\n        // Already showing, reject the previous promise\n        this._rejectPromise?.(\n          new Error('Dialog was replaced by another show() call')\n        );\n      }\n\n      this._resolvePromise = resolve;\n      this._rejectPromise = reject;\n\n      dispatchCustomEvent(this, 'alert-dialog-show', {\n        dialogId: this.id,\n        dialog: this,\n      });\n\n      this._nativeDialog?.showModal();\n    });\n  }\n\n  public applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-alert')) {\n  customElements.define('e2-alert', AlertDialogElement);\n}\n","/**\n * Confirm Dialog Element\n * A specialized dialog for yes/no confirmations with promise-based API\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ConfirmDialogElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _nativeDialog: HTMLDialogElement | null = null;\n  private _resolvePromise: ((value: boolean) => void) | null = null;\n  private _rejectPromise: ((reason?: any) => void) | null = null;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return [\n      'title',\n      'message',\n      'confirm-text',\n      'cancel-text',\n      'theme',\n      'danger',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --dialog-bg: #ffffff;\n          --dialog-border: #e0e0e0;\n          --dialog-shadow: rgba(0, 0, 0, 0.25);\n          --dialog-backdrop: rgba(0, 0, 0, 0.5);\n          --text-color: #333333;\n          --text-secondary: #666666;\n          --button-bg: #f8f9fa;\n          --button-border: #e0e0e0;\n          --button-hover: #e9ecef;\n          --button-active: #dee2e6;\n          --confirm-bg: #007bff;\n          --confirm-hover: #0056b3;\n          --confirm-active: #004085;\n          --danger-bg: #dc3545;\n          --danger-hover: #c82333;\n          --danger-active: #bd2130;\n\n          display: block;\n        }\n\n        :host(.theme-dark) {\n          --dialog-bg: #2d2d2d;\n          --dialog-border: #555555;\n          --dialog-shadow: rgba(0, 0, 0, 0.5);\n          --dialog-backdrop: rgba(0, 0, 0, 0.7);\n          --text-color: #ffffff;\n          --text-secondary: #cccccc;\n          --button-bg: #404040;\n          --button-border: #555555;\n          --button-hover: #4a4a4a;\n          --button-active: #555555;\n          --confirm-bg: #0d6efd;\n          --confirm-hover: #0b5ed7;\n          --confirm-active: #0a58ca;\n          --danger-bg: #dc3545;\n          --danger-hover: #bb2d3b;\n          --danger-active: #b02a37;\n        }\n\n        dialog {\n          border: 1px solid var(--dialog-border);\n          border-radius: 8px;\n          padding: 0;\n          background: var(--dialog-bg);\n          color: var(--text-color);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          box-shadow: 0 8px 24px var(--dialog-shadow);\n          min-width: 320px;\n          max-width: 500px;\n          animation: dialog-fade-in 0.2s ease-out;\n        }\n\n        dialog::backdrop {\n          background: var(--dialog-backdrop);\n          animation: backdrop-fade-in 0.2s ease-out;\n        }\n\n        @keyframes dialog-fade-in {\n          from {\n            opacity: 0;\n            transform: scale(0.9) translateY(-20px);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n        }\n\n        @keyframes backdrop-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        .dialog-content {\n          padding: 24px;\n        }\n\n        .dialog-title {\n          font-size: 18px;\n          font-weight: 600;\n          margin: 0 0 16px 0;\n          color: var(--text-color);\n        }\n\n        .dialog-message {\n          color: var(--text-secondary);\n          line-height: 1.5;\n          margin: 0 0 24px 0;\n        }\n\n        .dialog-buttons {\n          display: flex;\n          justify-content: flex-end;\n          gap: 12px;\n        }\n\n        .dialog-button {\n          padding: 8px 16px;\n          border: 1px solid var(--button-border);\n          border-radius: 4px;\n          background: var(--button-bg);\n          color: var(--text-color);\n          font-family: inherit;\n          font-size: 14px;\n          cursor: pointer;\n          transition: all 0.15s ease;\n          min-width: 80px;\n        }\n\n        .dialog-button:hover {\n          background: var(--button-hover);\n        }\n\n        .dialog-button:active {\n          background: var(--button-active);\n        }\n\n        .dialog-button:focus {\n          outline: 2px solid var(--confirm-bg);\n          outline-offset: 2px;\n        }\n\n        .confirm-button {\n          background: var(--confirm-bg);\n          color: white;\n          border-color: var(--confirm-bg);\n        }\n\n        .confirm-button:hover {\n          background: var(--confirm-hover);\n          border-color: var(--confirm-hover);\n        }\n\n        .confirm-button:active {\n          background: var(--confirm-active);\n          border-color: var(--confirm-active);\n        }\n\n        :host([danger]) .confirm-button {\n          background: var(--danger-bg);\n          border-color: var(--danger-bg);\n        }\n\n        :host([danger]) .confirm-button:hover {\n          background: var(--danger-hover);\n          border-color: var(--danger-hover);\n        }\n\n        :host([danger]) .confirm-button:active {\n          background: var(--danger-active);\n          border-color: var(--danger-active);\n        }\n\n        :host([danger]) .confirm-button:focus {\n          outline-color: var(--danger-bg);\n        }\n\n        :host([hidden]) {\n          display: none !important;\n        }\n      </style>\n\n      <dialog part=\"dialog\">\n        <div class=\"dialog-content\" part=\"content\">\n          <h3 class=\"dialog-title\" part=\"title\">Confirm</h3>\n          <p class=\"dialog-message\" part=\"message\">Are you sure?</p>\n\n          <div class=\"dialog-buttons\" part=\"buttons\">\n            <button class=\"dialog-button cancel-button\" part=\"cancel-button\" type=\"button\">\n              Cancel\n            </button>\n            <button class=\"dialog-button confirm-button\" part=\"confirm-button\" type=\"button\">\n              OK\n            </button>\n          </div>\n        </div>\n      </dialog>\n    `;\n\n    this._nativeDialog = shadowRoot.querySelector('dialog');\n    const confirmButton = shadowRoot.querySelector('.confirm-button');\n    const cancelButton = shadowRoot.querySelector('.cancel-button');\n\n    // Set up event listeners\n    if (this._nativeDialog) {\n      this._nativeDialog.addEventListener('close', this.handleClose.bind(this));\n      this._nativeDialog.addEventListener(\n        'cancel',\n        this.handleCancel.bind(this)\n      );\n    }\n\n    if (confirmButton) {\n      confirmButton.addEventListener('click', () => this.confirm());\n    }\n\n    if (cancelButton) {\n      cancelButton.addEventListener('click', () => this.cancel());\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('confirm-dialog');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Apply initial theme\n    this.applyTheme(this._theme);\n    this.updateContent();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'title':\n      case 'message':\n      case 'confirm-text':\n      case 'cancel-text':\n        this.updateContent();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'danger':\n        // Styling handled by CSS attribute selector\n        break;\n    }\n  }\n\n  private updateContent(): void {\n    const titleElement = this.shadowRoot?.querySelector('.dialog-title');\n    const messageElement = this.shadowRoot?.querySelector('.dialog-message');\n    const confirmButton = this.shadowRoot?.querySelector('.confirm-button');\n    const cancelButton = this.shadowRoot?.querySelector('.cancel-button');\n\n    if (titleElement) {\n      titleElement.textContent = this.getAttribute('title') || 'Confirm';\n    }\n\n    if (messageElement) {\n      messageElement.textContent =\n        this.getAttribute('message') || 'Are you sure?';\n    }\n\n    if (confirmButton) {\n      confirmButton.textContent = this.getAttribute('confirm-text') || 'OK';\n    }\n\n    if (cancelButton) {\n      cancelButton.textContent = this.getAttribute('cancel-text') || 'Cancel';\n    }\n  }\n\n  private handleClose(): void {\n    // If dialog was closed without explicit confirm/cancel, treat as cancel\n    if (this._resolvePromise) {\n      this._resolvePromise(false);\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'confirm-dialog-close', {\n      dialogId: this.id,\n      dialog: this,\n      confirmed: false,\n    });\n  }\n\n  private handleCancel(event: Event): void {\n    const cancelable = dispatchCustomEvent(this, 'confirm-dialog-cancel', {\n      dialogId: this.id,\n      dialog: this,\n    });\n\n    if (!cancelable) {\n      event.preventDefault();\n    } else {\n      this.cancel();\n    }\n  }\n\n  private confirm(): void {\n    if (this._resolvePromise) {\n      this._resolvePromise(true);\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'confirm-dialog-confirm', {\n      dialogId: this.id,\n      dialog: this,\n      confirmed: true,\n    });\n\n    this._nativeDialog?.close('confirmed');\n  }\n\n  private cancel(): void {\n    if (this._resolvePromise) {\n      this._resolvePromise(false);\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'confirm-dialog-cancel', {\n      dialogId: this.id,\n      dialog: this,\n      confirmed: false,\n    });\n\n    this._nativeDialog?.close('cancelled');\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get title(): string {\n    return this.getAttribute('title') || 'Confirm';\n  }\n\n  set title(value: string) {\n    this.setAttribute('title', value);\n  }\n\n  get message(): string {\n    return this.getAttribute('message') || 'Are you sure?';\n  }\n\n  set message(value: string) {\n    this.setAttribute('message', value);\n  }\n\n  get confirmText(): string {\n    return this.getAttribute('confirm-text') || 'OK';\n  }\n\n  set confirmText(value: string) {\n    this.setAttribute('confirm-text', value);\n  }\n\n  get cancelText(): string {\n    return this.getAttribute('cancel-text') || 'Cancel';\n  }\n\n  set cancelText(value: string) {\n    this.setAttribute('cancel-text', value);\n  }\n\n  get danger(): boolean {\n    return this.hasAttribute('danger');\n  }\n\n  set danger(value: boolean) {\n    if (value) {\n      this.setAttribute('danger', '');\n    } else {\n      this.removeAttribute('danger');\n    }\n  }\n\n  get open(): boolean {\n    return this._nativeDialog?.open || false;\n  }\n\n  /**\n   * Show the confirmation dialog and return a promise that resolves to true/false\n   */\n  public show(): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      if (this._resolvePromise) {\n        // Already showing, reject the previous promise\n        this._rejectPromise?.(\n          new Error('Dialog was replaced by another show() call')\n        );\n      }\n\n      this._resolvePromise = resolve;\n      this._rejectPromise = reject;\n\n      dispatchCustomEvent(this, 'confirm-dialog-show', {\n        dialogId: this.id,\n        dialog: this,\n      });\n\n      this._nativeDialog?.showModal();\n    });\n  }\n\n  public applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-confirm')) {\n  customElements.define('e2-confirm', ConfirmDialogElement);\n}\n","/**\n * Dialog Element\n * A wrapper around the native <dialog> element with theming and enhanced functionality\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class DialogElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _nativeDialog: HTMLDialogElement | null = null;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['title', 'theme', 'modal', 'closable', 'width', 'height'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --dialog-bg: #ffffff;\n          --dialog-border: #e0e0e0;\n          --dialog-shadow: rgba(0, 0, 0, 0.25);\n          --dialog-backdrop: rgba(0, 0, 0, 0.5);\n          --dialog-header-bg: #f8f9fa;\n          --dialog-header-border: #e0e0e0;\n          --text-color: #333333;\n          --close-button-hover: #f0f0f0;\n          --close-button-active: #e0e0e0;\n\n          display: block;\n        }\n\n        :host(.theme-dark) {\n          --dialog-bg: #2d2d2d;\n          --dialog-border: #555555;\n          --dialog-shadow: rgba(0, 0, 0, 0.5);\n          --dialog-backdrop: rgba(0, 0, 0, 0.7);\n          --dialog-header-bg: #404040;\n          --dialog-header-border: #555555;\n          --text-color: #ffffff;\n          --close-button-hover: #404040;\n          --close-button-active: #555555;\n        }\n\n        dialog {\n          border: 1px solid var(--dialog-border);\n          border-radius: 8px;\n          padding: 0;\n          background: var(--dialog-bg);\n          color: var(--text-color);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          box-shadow: 0 8px 24px var(--dialog-shadow);\n          min-width: 300px;\n          max-width: calc(100vw - 32px);\n          max-height: calc(100vh - 32px);\n          overflow: hidden;\n          animation: dialog-fade-in 0.2s ease-out;\n        }\n\n        dialog::backdrop {\n          background: var(--dialog-backdrop);\n          animation: backdrop-fade-in 0.2s ease-out;\n        }\n\n        @keyframes dialog-fade-in {\n          from {\n            opacity: 0;\n            transform: scale(0.9) translateY(-20px);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n        }\n\n        @keyframes backdrop-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        .dialog-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 16px 20px;\n          background: var(--dialog-header-bg);\n          border-bottom: 1px solid var(--dialog-header-border);\n          min-height: 24px;\n        }\n\n        .dialog-title {\n          font-weight: 600;\n          font-size: 16px;\n          margin: 0;\n        }\n\n        .close-button {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 28px;\n          height: 28px;\n          border: none;\n          background: transparent;\n          border-radius: 4px;\n          cursor: pointer;\n          color: var(--text-color);\n          font-size: 18px;\n          transition: background-color 0.15s ease;\n        }\n\n        .close-button:hover {\n          background: var(--close-button-hover);\n        }\n\n        .close-button:active {\n          background: var(--close-button-active);\n        }\n\n        .close-button:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        .dialog-content {\n          padding: 20px;\n          overflow-y: auto;\n        }\n\n        .dialog-footer {\n          padding: 16px 20px;\n          border-top: 1px solid var(--dialog-header-border);\n          background: var(--dialog-header-bg);\n          display: flex;\n          justify-content: flex-end;\n          gap: 12px;\n        }\n\n        .dialog-footer:empty {\n          display: none;\n        }\n\n        :host([hidden]) {\n          display: none !important;\n        }\n      </style>\n\n      <dialog part=\"dialog\">\n        <div class=\"dialog-header\" part=\"header\">\n          <h3 class=\"dialog-title\" part=\"title\"></h3>\n          <button class=\"close-button\" part=\"close-button\" type=\"button\" aria-label=\"Close dialog\">\n            ×\n          </button>\n        </div>\n\n        <div class=\"dialog-content\" part=\"content\">\n          <slot></slot>\n        </div>\n\n        <div class=\"dialog-footer\" part=\"footer\">\n          <slot name=\"footer\"></slot>\n        </div>\n      </dialog>\n    `;\n\n    this._nativeDialog = shadowRoot.querySelector('dialog');\n    const closeButton = shadowRoot.querySelector('.close-button');\n\n    // Set up event listeners\n    if (this._nativeDialog) {\n      this._nativeDialog.addEventListener('close', this.handleClose.bind(this));\n      this._nativeDialog.addEventListener(\n        'cancel',\n        this.handleCancel.bind(this)\n      );\n    }\n\n    if (closeButton) {\n      closeButton.addEventListener('click', () => this.close());\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('dialog');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Apply initial theme\n    this.applyTheme(this._theme);\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'title':\n        this.updateTitle();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'modal':\n        // Modal state affects how dialog opens\n        break;\n      case 'closable':\n        this.updateClosable();\n        break;\n      case 'width':\n        this.updateSize();\n        break;\n      case 'height':\n        this.updateSize();\n        break;\n    }\n  }\n\n  private updateTitle(): void {\n    const titleElement = this.shadowRoot?.querySelector('.dialog-title');\n    if (titleElement) {\n      titleElement.textContent = this.getAttribute('title') || '';\n    }\n  }\n\n  private updateClosable(): void {\n    const closeButton = this.shadowRoot?.querySelector(\n      '.close-button'\n    ) as HTMLButtonElement;\n    if (closeButton) {\n      const closable = this.getAttribute('closable') !== 'false';\n      closeButton.disabled = !closable;\n      closeButton.style.display = closable ? 'flex' : 'none';\n    }\n  }\n\n  private updateSize(): void {\n    if (this._nativeDialog) {\n      const width = this.getAttribute('width');\n      const height = this.getAttribute('height');\n\n      if (width) {\n        this._nativeDialog.style.width =\n          width.includes('px') || width.includes('%') || width.includes('em')\n            ? width\n            : `${width}px`;\n      }\n\n      if (height) {\n        this._nativeDialog.style.height =\n          height.includes('px') || height.includes('%') || height.includes('em')\n            ? height\n            : `${height}px`;\n      }\n    }\n  }\n\n  private handleClose(): void {\n    dispatchCustomEvent(this, 'dialog-close', {\n      dialogId: this.id,\n      dialog: this,\n      returnValue: this._nativeDialog?.returnValue,\n    });\n  }\n\n  private handleCancel(event: Event): void {\n    const cancelable = dispatchCustomEvent(this, 'dialog-cancel', {\n      dialogId: this.id,\n      dialog: this,\n    });\n\n    if (!cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get title(): string {\n    return this.getAttribute('title') || '';\n  }\n\n  set title(value: string) {\n    this.setAttribute('title', value);\n  }\n\n  get modal(): boolean {\n    return this.hasAttribute('modal');\n  }\n\n  set modal(value: boolean) {\n    if (value) {\n      this.setAttribute('modal', '');\n    } else {\n      this.removeAttribute('modal');\n    }\n  }\n\n  get closable(): boolean {\n    return this.getAttribute('closable') !== 'false';\n  }\n\n  set closable(value: boolean) {\n    this.setAttribute('closable', value.toString());\n  }\n\n  get open(): boolean {\n    return this._nativeDialog?.open || false;\n  }\n\n  get returnValue(): string {\n    return this._nativeDialog?.returnValue || '';\n  }\n\n  set returnValue(value: string) {\n    if (this._nativeDialog) {\n      this._nativeDialog.returnValue = value;\n    }\n  }\n\n  public show(): void {\n    if (!this._nativeDialog) return;\n\n    dispatchCustomEvent(this, 'dialog-show', {\n      dialogId: this.id,\n      dialog: this,\n    });\n\n    this._nativeDialog.show();\n  }\n\n  public showModal(): void {\n    if (!this._nativeDialog) return;\n\n    dispatchCustomEvent(this, 'dialog-show', {\n      dialogId: this.id,\n      dialog: this,\n      modal: true,\n    });\n\n    this._nativeDialog.showModal();\n  }\n\n  public close(returnValue?: string): void {\n    if (!this._nativeDialog) return;\n\n    if (returnValue !== undefined) {\n      this._nativeDialog.returnValue = returnValue;\n    }\n\n    this._nativeDialog.close();\n  }\n\n  public applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-dialog')) {\n  customElements.define('e2-dialog', DialogElement);\n}\n","/**\n * Prompt Dialog Element\n * A specialized dialog for text input with validation\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class PromptDialogElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _nativeDialog: HTMLDialogElement | null = null;\n  private _resolvePromise: ((value: string | null) => void) | null = null;\n  private _rejectPromise: ((reason?: any) => void) | null = null;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return [\n      'title',\n      'message',\n      'placeholder',\n      'default-value',\n      'confirm-text',\n      'cancel-text',\n      'theme',\n      'required',\n      'multiline',\n      'pattern',\n      'min-length',\n      'max-length',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --dialog-bg: #ffffff;\n          --dialog-border: #e0e0e0;\n          --dialog-shadow: rgba(0, 0, 0, 0.25);\n          --dialog-backdrop: rgba(0, 0, 0, 0.5);\n          --text-color: #333333;\n          --text-secondary: #666666;\n          --input-bg: #ffffff;\n          --input-border: #d0d7de;\n          --input-border-focus: #0969da;\n          --input-border-error: #d1242f;\n          --button-bg: #f8f9fa;\n          --button-border: #e0e0e0;\n          --button-hover: #e9ecef;\n          --button-active: #dee2e6;\n          --confirm-bg: #007bff;\n          --confirm-hover: #0056b3;\n          --confirm-active: #004085;\n          --error-color: #d1242f;\n\n          display: block;\n        }\n\n        :host(.theme-dark) {\n          --dialog-bg: #2d2d2d;\n          --dialog-border: #555555;\n          --dialog-shadow: rgba(0, 0, 0, 0.5);\n          --dialog-backdrop: rgba(0, 0, 0, 0.7);\n          --text-color: #ffffff;\n          --text-secondary: #cccccc;\n          --input-bg: #21262d;\n          --input-border: #30363d;\n          --input-border-focus: #0969da;\n          --input-border-error: #f85149;\n          --button-bg: #404040;\n          --button-border: #555555;\n          --button-hover: #4a4a4a;\n          --button-active: #555555;\n          --confirm-bg: #0d6efd;\n          --confirm-hover: #0b5ed7;\n          --confirm-active: #0a58ca;\n          --error-color: #f85149;\n        }\n\n        dialog {\n          border: 1px solid var(--dialog-border);\n          border-radius: 8px;\n          padding: 0;\n          background: var(--dialog-bg);\n          color: var(--text-color);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          box-shadow: 0 8px 24px var(--dialog-shadow);\n          min-width: 400px;\n          max-width: 600px;\n          animation: dialog-fade-in 0.2s ease-out;\n        }\n\n        dialog::backdrop {\n          background: var(--dialog-backdrop);\n          animation: backdrop-fade-in 0.2s ease-out;\n        }\n\n        @keyframes dialog-fade-in {\n          from {\n            opacity: 0;\n            transform: scale(0.9) translateY(-20px);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1) translateY(0);\n          }\n        }\n\n        @keyframes backdrop-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n\n        .dialog-content {\n          padding: 24px;\n        }\n\n        .dialog-title {\n          font-size: 18px;\n          font-weight: 600;\n          margin: 0 0 8px 0;\n          color: var(--text-color);\n        }\n\n        .dialog-message {\n          color: var(--text-secondary);\n          line-height: 1.5;\n          margin: 0 0 16px 0;\n        }\n\n        .dialog-message:empty {\n          display: none;\n        }\n\n        .input-group {\n          margin-bottom: 20px;\n        }\n\n        .dialog-input {\n          width: 100%;\n          padding: 8px 12px;\n          border: 1px solid var(--input-border);\n          border-radius: 4px;\n          background: var(--input-bg);\n          color: var(--text-color);\n          font-family: inherit;\n          font-size: 14px;\n          transition: border-color 0.15s ease;\n          box-sizing: border-box;\n        }\n\n        .dialog-input:focus {\n          outline: none;\n          border-color: var(--input-border-focus);\n          box-shadow: 0 0 0 2px rgba(9, 105, 218, 0.3);\n        }\n\n        .dialog-input.error {\n          border-color: var(--input-border-error);\n        }\n\n        .dialog-input.error:focus {\n          box-shadow: 0 0 0 2px rgba(209, 36, 47, 0.3);\n        }\n\n        .dialog-textarea {\n          min-height: 80px;\n          resize: vertical;\n          font-family: inherit;\n        }\n\n        .error-message {\n          color: var(--error-color);\n          font-size: 12px;\n          margin-top: 4px;\n          display: none;\n        }\n\n        .error-message.visible {\n          display: block;\n        }\n\n        .dialog-buttons {\n          display: flex;\n          justify-content: flex-end;\n          gap: 12px;\n        }\n\n        .dialog-button {\n          padding: 8px 16px;\n          border: 1px solid var(--button-border);\n          border-radius: 4px;\n          background: var(--button-bg);\n          color: var(--text-color);\n          font-family: inherit;\n          font-size: 14px;\n          cursor: pointer;\n          transition: all 0.15s ease;\n          min-width: 80px;\n        }\n\n        .dialog-button:hover {\n          background: var(--button-hover);\n        }\n\n        .dialog-button:active {\n          background: var(--button-active);\n        }\n\n        .dialog-button:focus {\n          outline: 2px solid var(--confirm-bg);\n          outline-offset: 2px;\n        }\n\n        .dialog-button:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .confirm-button {\n          background: var(--confirm-bg);\n          color: white;\n          border-color: var(--confirm-bg);\n        }\n\n        .confirm-button:hover:not(:disabled) {\n          background: var(--confirm-hover);\n          border-color: var(--confirm-hover);\n        }\n\n        .confirm-button:active:not(:disabled) {\n          background: var(--confirm-active);\n          border-color: var(--confirm-active);\n        }\n\n        :host([hidden]) {\n          display: none !important;\n        }\n      </style>\n\n      <dialog part=\"dialog\">\n        <div class=\"dialog-content\" part=\"content\">\n          <h3 class=\"dialog-title\" part=\"title\">Input Required</h3>\n          <p class=\"dialog-message\" part=\"message\"></p>\n\n          <div class=\"input-group\" part=\"input-group\">\n            <input class=\"dialog-input\" part=\"input\" type=\"text\" />\n            <div class=\"error-message\" part=\"error-message\"></div>\n          </div>\n\n          <div class=\"dialog-buttons\" part=\"buttons\">\n            <button class=\"dialog-button cancel-button\" part=\"cancel-button\" type=\"button\">\n              Cancel\n            </button>\n            <button class=\"dialog-button confirm-button\" part=\"confirm-button\" type=\"button\">\n              OK\n            </button>\n          </div>\n        </div>\n      </dialog>\n    `;\n\n    this._nativeDialog = shadowRoot.querySelector('dialog');\n    const confirmButton = shadowRoot.querySelector('.confirm-button');\n    const cancelButton = shadowRoot.querySelector('.cancel-button');\n    const input = shadowRoot.querySelector('.dialog-input') as HTMLInputElement;\n\n    // Set up event listeners\n    if (this._nativeDialog) {\n      this._nativeDialog.addEventListener('close', this.handleClose.bind(this));\n      this._nativeDialog.addEventListener(\n        'cancel',\n        this.handleCancel.bind(this)\n      );\n    }\n\n    if (confirmButton) {\n      confirmButton.addEventListener('click', () => this.confirm());\n    }\n\n    if (cancelButton) {\n      cancelButton.addEventListener('click', () => this.cancel());\n    }\n\n    if (input) {\n      input.addEventListener('input', this.handleInput.bind(this));\n      input.addEventListener('keydown', this.handleKeydown.bind(this));\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('prompt-dialog');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Apply initial theme\n    this.applyTheme(this._theme);\n    this.updateContent();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'title':\n      case 'message':\n      case 'placeholder':\n      case 'default-value':\n      case 'confirm-text':\n      case 'cancel-text':\n      case 'required':\n      case 'multiline':\n      case 'pattern':\n      case 'min-length':\n      case 'max-length':\n        this.updateContent();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n    }\n  }\n\n  private updateContent(): void {\n    const titleElement = this.shadowRoot?.querySelector('.dialog-title');\n    const messageElement = this.shadowRoot?.querySelector('.dialog-message');\n    const confirmButton = this.shadowRoot?.querySelector('.confirm-button');\n    const cancelButton = this.shadowRoot?.querySelector('.cancel-button');\n    const inputElement = this.shadowRoot?.querySelector(\n      '.dialog-input'\n    ) as HTMLInputElement;\n\n    if (titleElement) {\n      titleElement.textContent = this.getAttribute('title') || 'Input Required';\n    }\n\n    if (messageElement) {\n      const message = this.getAttribute('message') || '';\n      messageElement.textContent = message;\n    }\n\n    if (confirmButton) {\n      confirmButton.textContent = this.getAttribute('confirm-text') || 'OK';\n    }\n\n    if (cancelButton) {\n      cancelButton.textContent = this.getAttribute('cancel-text') || 'Cancel';\n    }\n\n    if (inputElement) {\n      // Handle multiline\n      const multiline = this.hasAttribute('multiline');\n      const currentType = inputElement.tagName.toLowerCase();\n\n      if (multiline && currentType === 'input') {\n        // Replace input with textarea\n        const textarea = document.createElement('textarea');\n        textarea.className = 'dialog-input dialog-textarea';\n        textarea.setAttribute('part', 'input');\n        inputElement.parentNode?.replaceChild(textarea, inputElement);\n        this.setupInputElement(textarea);\n      } else if (!multiline && currentType === 'textarea') {\n        // Replace textarea with input\n        const input = document.createElement('input');\n        input.className = 'dialog-input';\n        input.setAttribute('part', 'input');\n        input.type = 'text';\n        inputElement.parentNode?.replaceChild(input, inputElement);\n        this.setupInputElement(input);\n      } else {\n        this.setupInputElement(inputElement);\n      }\n    }\n  }\n\n  private setupInputElement(\n    element: HTMLInputElement | HTMLTextAreaElement\n  ): void {\n    const placeholder = this.getAttribute('placeholder') || '';\n    const defaultValue = this.getAttribute('default-value') || '';\n    const pattern = this.getAttribute('pattern');\n    const minLength = this.getAttribute('min-length');\n    const maxLength = this.getAttribute('max-length');\n\n    element.placeholder = placeholder;\n    element.value = defaultValue;\n\n    if (pattern && element instanceof HTMLInputElement) {\n      element.pattern = pattern;\n    }\n\n    if (minLength) {\n      element.minLength = parseInt(minLength, 10);\n    }\n\n    if (maxLength) {\n      element.maxLength = parseInt(maxLength, 10);\n    }\n\n    // Re-attach event listeners\n    element.addEventListener('input', this.handleInput.bind(this));\n    element.addEventListener('keydown', (event: Event) =>\n      this.handleKeydown(event as KeyboardEvent)\n    );\n  }\n\n  private handleInput(): void {\n    this.validateInput();\n  }\n\n  private handleKeydown(event: KeyboardEvent): void {\n    if (\n      event.key === 'Enter' &&\n      !event.shiftKey &&\n      !this.hasAttribute('multiline')\n    ) {\n      event.preventDefault();\n      this.confirm();\n    } else if (event.key === 'Escape') {\n      event.preventDefault();\n      this.cancel();\n    }\n  }\n\n  private validateInput(): boolean {\n    const input = this.shadowRoot?.querySelector('.dialog-input') as\n      | HTMLInputElement\n      | HTMLTextAreaElement;\n    const errorMessage = this.shadowRoot?.querySelector('.error-message');\n    const confirmButton = this.shadowRoot?.querySelector(\n      '.confirm-button'\n    ) as HTMLButtonElement;\n\n    if (!input || !errorMessage || !confirmButton) return false;\n\n    let isValid = true;\n    let error = '';\n\n    const value = input.value;\n    const required = this.hasAttribute('required');\n    const pattern = this.getAttribute('pattern');\n    const minLength = this.getAttribute('min-length');\n    const maxLength = this.getAttribute('max-length');\n\n    // Required validation\n    if (required && !value.trim()) {\n      isValid = false;\n      error = 'This field is required';\n    }\n\n    // Pattern validation\n    if (isValid && pattern && value && !new RegExp(pattern).test(value)) {\n      isValid = false;\n      error = 'Invalid format';\n    }\n\n    // Length validation\n    if (isValid && minLength && value.length < parseInt(minLength, 10)) {\n      isValid = false;\n      error = `Minimum length is ${minLength} characters`;\n    }\n\n    if (isValid && maxLength && value.length > parseInt(maxLength, 10)) {\n      isValid = false;\n      error = `Maximum length is ${maxLength} characters`;\n    }\n\n    // Update UI\n    input.classList.toggle('error', !isValid);\n    errorMessage.textContent = error;\n    errorMessage.classList.toggle('visible', !isValid);\n    confirmButton.disabled = !isValid;\n\n    return isValid;\n  }\n\n  private handleClose(): void {\n    if (this._resolvePromise) {\n      this._resolvePromise(null);\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'prompt-dialog-close', {\n      dialogId: this.id,\n      dialog: this,\n      value: null,\n    });\n  }\n\n  private handleCancel(event: Event): void {\n    const cancelable = dispatchCustomEvent(this, 'prompt-dialog-cancel', {\n      dialogId: this.id,\n      dialog: this,\n    });\n\n    if (!cancelable) {\n      event.preventDefault();\n    } else {\n      this.cancel();\n    }\n  }\n\n  private confirm(): void {\n    if (!this.validateInput()) return;\n\n    const input = this.shadowRoot?.querySelector('.dialog-input') as\n      | HTMLInputElement\n      | HTMLTextAreaElement;\n    const value = input?.value || '';\n\n    if (this._resolvePromise) {\n      this._resolvePromise(value);\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'prompt-dialog-confirm', {\n      dialogId: this.id,\n      dialog: this,\n      value,\n    });\n\n    this._nativeDialog?.close(value);\n  }\n\n  private cancel(): void {\n    if (this._resolvePromise) {\n      this._resolvePromise(null);\n      this._resolvePromise = null;\n      this._rejectPromise = null;\n    }\n\n    dispatchCustomEvent(this, 'prompt-dialog-cancel', {\n      dialogId: this.id,\n      dialog: this,\n      value: null,\n    });\n\n    this._nativeDialog?.close();\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get title(): string {\n    return this.getAttribute('title') || 'Input Required';\n  }\n\n  set title(value: string) {\n    this.setAttribute('title', value);\n  }\n\n  get message(): string {\n    return this.getAttribute('message') || '';\n  }\n\n  set message(value: string) {\n    this.setAttribute('message', value);\n  }\n\n  get placeholder(): string {\n    return this.getAttribute('placeholder') || '';\n  }\n\n  set placeholder(value: string) {\n    this.setAttribute('placeholder', value);\n  }\n\n  get defaultValue(): string {\n    return this.getAttribute('default-value') || '';\n  }\n\n  set defaultValue(value: string) {\n    this.setAttribute('default-value', value);\n  }\n\n  get confirmText(): string {\n    return this.getAttribute('confirm-text') || 'OK';\n  }\n\n  set confirmText(value: string) {\n    this.setAttribute('confirm-text', value);\n  }\n\n  get cancelText(): string {\n    return this.getAttribute('cancel-text') || 'Cancel';\n  }\n\n  set cancelText(value: string) {\n    this.setAttribute('cancel-text', value);\n  }\n\n  get required(): boolean {\n    return this.hasAttribute('required');\n  }\n\n  set required(value: boolean) {\n    if (value) {\n      this.setAttribute('required', '');\n    } else {\n      this.removeAttribute('required');\n    }\n  }\n\n  get multiline(): boolean {\n    return this.hasAttribute('multiline');\n  }\n\n  set multiline(value: boolean) {\n    if (value) {\n      this.setAttribute('multiline', '');\n    } else {\n      this.removeAttribute('multiline');\n    }\n  }\n\n  get value(): string {\n    const input = this.shadowRoot?.querySelector('.dialog-input') as\n      | HTMLInputElement\n      | HTMLTextAreaElement;\n    return input?.value || '';\n  }\n\n  set value(value: string) {\n    const input = this.shadowRoot?.querySelector('.dialog-input') as\n      | HTMLInputElement\n      | HTMLTextAreaElement;\n    if (input) {\n      input.value = value;\n      this.validateInput();\n    }\n  }\n\n  get open(): boolean {\n    return this._nativeDialog?.open || false;\n  }\n\n  /**\n   * Show the prompt dialog and return a promise that resolves to the input value or null if cancelled\n   */\n  public show(): Promise<string | null> {\n    return new Promise((resolve, reject) => {\n      if (this._resolvePromise) {\n        // Already showing, reject the previous promise\n        this._rejectPromise?.(\n          new Error('Dialog was replaced by another show() call')\n        );\n      }\n\n      this._resolvePromise = resolve;\n      this._rejectPromise = reject;\n\n      dispatchCustomEvent(this, 'prompt-dialog-show', {\n        dialogId: this.id,\n        dialog: this,\n      });\n\n      this._nativeDialog?.showModal();\n\n      // Focus the input after showing\n      setTimeout(() => {\n        const input = this.shadowRoot?.querySelector('.dialog-input') as\n          | HTMLInputElement\n          | HTMLTextAreaElement;\n        input?.focus();\n        input?.select();\n      }, 100);\n    });\n  }\n\n  public applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-prompt')) {\n  customElements.define('e2-prompt', PromptDialogElement);\n}\n","/**\n * KeyValue Editor Element\n * A form-like component for editing key-value pairs with schema support\n * Supports nested objects using collapsible sections\n */\n\nimport { Validator } from 'jsonschema';\nimport {\n  EditorElementProperties,\n  KeyValueSchema,\n  KeyValueValidationError,\n  KeyValueValidationResult,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class KeyValueEditorElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n  private _value: Record<string, any> = {};\n  private _valueProxy: Record<string, any> = {};\n  private _schema: KeyValueSchema | null = null;\n  private _readonly: boolean = false;\n  private _compact: boolean = false;\n  private _headerTitle: string | null = null;\n  private _validationErrors: KeyValueValidationError[] = [];\n  private _validator: Validator = new Validator();\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'readonly', 'compact', 'header-title'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n    // Initialize header title from attribute\n    this._headerTitle = this.getAttribute('header-title');\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --spacing: 12px;\n          --border-radius: 6px;\n          --error-color: var(--danger-color, #dc3545);\n          --success-color: var(--success-color, #198754);\n          --warning-color: var(--warning-color, #ffc107);\n\n          display: block;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          color: var(--text-primary, #212529);\n        }\n\n        :host(.theme-dark) {\n          --error-color: var(--danger-color, #f85149);\n          --success-color: var(--success-color, #51cf66);\n          --warning-color: var(--warning-color, #ffd43b);\n          color: var(--text-primary, #e6edf3);\n        }\n\n        :host(.theme-dark) .keyvalue-container {\n          background: var(--bg-primary-dark, #1e1e1e);\n          border-color: var(--border-color-dark, #3e3e42);\n        }\n\n        :host(.theme-dark) .keyvalue-header {\n          background: var(--bg-secondary-dark, #252526);\n          border-bottom-color: var(--border-color-dark, #3e3e42);\n          color: var(--text-secondary-dark, #cccccc);\n        }\n\n        :host(.theme-dark) .field-label {\n          color: var(--text-primary-dark, #e6edf3);\n        }\n\n        :host(.theme-dark) .range-value {\n          color: var(--text-secondary-dark, #cccccc);\n        }\n\n        :host(.theme-dark) .field-description {\n          color: var(--text-secondary-dark, #cccccc);\n        }\n\n        :host(.theme-dark) .nested-section {\n          border-color: var(--border-color-dark, #3e3e42);\n        }\n\n        :host(.theme-dark) .nested-header {\n          background: var(--bg-secondary-dark, #252526);\n          border-bottom-color: var(--border-color-dark, #3e3e42);\n          color: var(--text-primary-dark, #e6edf3);\n        }\n\n        :host(.theme-dark) .nested-header:hover {\n          background: var(--bg-tertiary-dark, #2d2d30);\n        }\n\n        :host(.theme-dark) .nested-content {\n          background: var(--bg-primary-dark, #1e1e1e);\n        }\n\n        :host(.theme-dark) .empty-state {\n          color: var(--text-secondary-dark, #cccccc);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .keyvalue-container {\n          background: var(--bg-primary, #ffffff);\n          border: 1px solid var(--border-color, #dee2e6);\n          border-radius: var(--border-radius);\n          overflow: hidden;\n        }\n\n        .keyvalue-header {\n          background: var(--bg-secondary, #f8f9fa);\n          border-bottom: 1px solid var(--border-color, #dee2e6);\n          padding: var(--spacing);\n          font-weight: 600;\n          font-size: 13px;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n          color: var(--text-secondary, #6c757d);\n        }\n\n        .keyvalue-content {\n          padding: var(--spacing);\n        }\n\n        .field-row {\n          display: flex;\n          align-items: flex-start;\n          margin-bottom: var(--spacing);\n          gap: var(--spacing);\n        }\n\n        .field-row:last-child {\n          margin-bottom: 0;\n        }\n\n        :host([compact]) .field-row {\n          margin-bottom: calc(var(--spacing) / 2);\n        }\n\n        .field-label {\n          flex: 0 0 30%;\n          font-weight: 500;\n          color: var(--text-primary, #212529);\n          padding: 8px 0;\n          line-height: 1.4;\n          cursor: pointer;\n        }\n\n        :host([compact]) .field-label {\n          padding: 4px 0;\n        }\n\n        .field-input {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        /* Input controls will inherit styles from e2-app */\n        .input-control {\n          width: 100%;\n        }\n\n        .input-control.error {\n          border-color: var(--error-color) !important;\n        }\n\n        .input-control.error:focus {\n          border-color: var(--error-color) !important;\n          box-shadow: 0 0 0 2px color-mix(in srgb, var(--error-color) 25%, transparent) !important;\n        }\n\n        /* Special styling for specific input types */\n        .input-control[type=\"color\"] {\n          width: 60px;\n          height: 38px;\n          padding: 4px;\n          cursor: pointer;\n        }\n\n        .input-control[type=\"range\"] {\n          height: auto;\n          padding: 0;\n        }\n\n        .input-control[type=\"checkbox\"] {\n          width: 1em;\n          height: 1em;\n          padding: 0;\n          margin: 0;\n          cursor: pointer;\n        }\n\n        .range-container {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .range-value {\n          min-width: 60px;\n          font-size: 12px;\n          color: var(--text-secondary, #6c757d);\n          text-align: right;\n        }\n\n        .field-error {\n          color: var(--error-color);\n          font-size: 12px;\n          margin-top: 2px;\n          font-weight: 500;\n        }\n\n        .field-description {\n          color: var(--text-secondary, #6c757d);\n          font-size: 12px;\n          margin-top: 2px;\n          line-height: 1.3;\n        }\n\n        .nested-section {\n          border: 1px solid var(--border-color, #dee2e6);\n          border-radius: var(--border-radius);\n          margin-bottom: var(--spacing);\n          overflow: hidden;\n        }\n\n        .nested-header {\n          background: var(--bg-secondary, #f8f9fa);\n          border-bottom: 1px solid var(--border-color, #dee2e6);\n          padding: var(--spacing);\n          cursor: pointer;\n          user-select: none;\n          display: flex;\n          align-items: center;\n          gap: var(--spacing);\n          font-weight: 500;\n          transition: background-color var(--transition-fast, 0.15s ease-in-out);\n        }\n\n        .nested-header:hover {\n          background: var(--bg-tertiary, #e9ecef);\n        }\n\n        .nested-toggle {\n          width: 16px;\n          height: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: transform 0.2s ease;\n        }\n\n        .nested-section.expanded .nested-toggle {\n          transform: rotate(90deg);\n        }\n\n        .nested-content {\n          padding: var(--spacing);\n          display: none;\n        }\n\n        .nested-section.expanded .nested-content {\n          display: block;\n        }\n\n        .empty-state {\n          text-align: center;\n          color: var(--text-secondary, #6c757d);\n          padding: calc(var(--spacing) * 2);\n          font-style: italic;\n        }\n      </style>\n\n      <div class=\"keyvalue-container\">\n        <div class=\"keyvalue-header\">Properties</div>\n        <div class=\"keyvalue-content\">\n          <div class=\"empty-state\">No properties to display</div>\n        </div>\n      </div>\n    `;\n  }\n\n  private setupValueProxy(): void {\n    const self = this;\n\n    this._valueProxy = new Proxy(this._value, {\n      set(\n        target: Record<string, any>,\n        key: string | symbol,\n        value: any\n      ): boolean {\n        if (typeof key === 'string') {\n          const oldValue = target[key];\n          target[key] = value;\n\n          // Dispatch change event\n          self.dispatchChangeEvent(key, oldValue, value, [key]);\n\n          // Trigger re-render\n          self.render();\n\n          // Validate after change\n          self.validateField(key);\n        }\n        return true;\n      },\n\n      deleteProperty(\n        target: Record<string, any>,\n        key: string | symbol\n      ): boolean {\n        if (typeof key === 'string' && key in target) {\n          const oldValue = target[key];\n          delete target[key];\n\n          // Dispatch change event\n          self.dispatchChangeEvent(key, oldValue, undefined, [key]);\n\n          // Trigger re-render\n          self.render();\n        }\n        return true;\n      },\n    });\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('keyvalue-editor');\n    }\n\n    this.setupValueProxy();\n    this.render();\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'readonly':\n        this._readonly = newValue !== null;\n        this.render();\n        break;\n      case 'compact':\n        this._compact = newValue !== null;\n        break;\n      case 'header-title':\n        this._headerTitle = newValue;\n        this.render();\n        break;\n    }\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  private render(): void {\n    const shadowRoot = this.shadowRoot!;\n    const container = shadowRoot.querySelector('.keyvalue-container')!;\n    const content = shadowRoot.querySelector('.keyvalue-content')!;\n\n    // Update header visibility and content\n    const header = shadowRoot.querySelector('.keyvalue-header') as HTMLElement;\n    if (this._headerTitle !== null) {\n      // Show header with title (use \"Properties\" as default if empty string)\n      const headerText =\n        this._headerTitle === '' ? 'Properties' : this._headerTitle;\n      header.textContent = headerText;\n      header.style.display = 'block';\n    } else {\n      // Hide header\n      header.style.display = 'none';\n    }\n\n    if (Object.keys(this._value).length === 0) {\n      content.innerHTML =\n        '<div class=\"empty-state\">No properties to display</div>';\n      return;\n    }\n\n    content.innerHTML = this.renderFields();\n  }\n\n  private renderFields(): string {\n    const fields: string[] = [];\n\n    for (const [key, value] of Object.entries(this._value)) {\n      const fieldSchema = this._schema?.properties?.[key];\n      fields.push(this.renderField(key, value, fieldSchema));\n    }\n\n    return fields.join('');\n  }\n\n  private renderField(key: string, value: any, schema?: any): string {\n    const isNested =\n      typeof value === 'object' && value !== null && !Array.isArray(value);\n\n    if (isNested) {\n      return this.renderNestedField(key, value, schema);\n    }\n\n    const label = schema?.title || this.formatLabel(key);\n    const description = schema?.description;\n    const error = this._validationErrors.find(e => e.key === key);\n    const inputType = this.getInputType(value, schema);\n    const inputId = `field-${key}`;\n\n    return `\n      <div class=\"field-row\">\n        <label class=\"field-label\" for=\"${inputId}\">${label}</label>\n        <div class=\"field-input\">\n          ${this.renderInput(inputId, key, value, schema, inputType)}\n          ${\n            description\n              ? `<div class=\"field-description\">${description}</div>`\n              : ''\n          }\n          ${error ? `<div class=\"field-error\">${error.message}</div>` : ''}\n        </div>\n      </div>\n    `;\n  }\n\n  private renderNestedField(\n    key: string,\n    value: Record<string, any>,\n    schema?: any\n  ): string {\n    const label = schema?.title || this.formatLabel(key);\n    const isExpanded = true; // TODO: Track expansion state\n    const expandedClass = isExpanded ? 'expanded' : '';\n\n    return `\n      <div class=\"nested-section ${expandedClass}\">\n        <div class=\"nested-header\" onclick=\"this.parentElement.classList.toggle('expanded')\">\n          <span class=\"nested-toggle\">▶</span>\n          <span>${label}</span>\n        </div>\n        <div class=\"nested-content\">\n          ${this.renderNestedFields(value, schema?.properties)}\n        </div>\n      </div>\n    `;\n  }\n\n  private renderNestedFields(\n    value: Record<string, any>,\n    properties?: any\n  ): string {\n    const fields: string[] = [];\n\n    for (const [key, val] of Object.entries(value)) {\n      const fieldSchema = properties?.[key];\n      // For nested fields, we only support scalar types (no further nesting)\n      if (typeof val !== 'object' || val === null || Array.isArray(val)) {\n        fields.push(this.renderField(key, val, fieldSchema));\n      }\n    }\n\n    return fields.join('');\n  }\n\n  private renderInput(\n    id: string,\n    key: string,\n    value: any,\n    schema?: any,\n    inputType: string = 'text'\n  ): string {\n    const disabled = this.disabled || this._readonly;\n    const hasError = this._validationErrors.some(e => e.key === key);\n    const errorClass = hasError ? ' error' : '';\n\n    switch (inputType) {\n      case 'checkbox':\n        return `<input type=\"checkbox\" id=\"${id}\" class=\"input-control${errorClass}\" ${\n          value ? 'checked' : ''\n        } ${\n          disabled ? 'disabled' : ''\n        } onchange=\"this.getRootNode().host.updateValue('${key}', this.checked)\">`;\n\n      case 'number':\n        const min =\n          schema?.minimum !== undefined ? `min=\"${schema.minimum}\"` : '';\n        const max =\n          schema?.maximum !== undefined ? `max=\"${schema.maximum}\"` : '';\n        const step =\n          schema?.type === 'integer'\n            ? 'step=\"1\"'\n            : schema?.multipleOf\n            ? `step=\"${schema.multipleOf}\"`\n            : '';\n        return `<input type=\"number\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${min} ${max} ${step} ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', this.valueAsNumber)\">`;\n\n      case 'range':\n        const rangeMin = schema?.minimum !== undefined ? schema.minimum : 0;\n        const rangeMax = schema?.maximum !== undefined ? schema.maximum : 100;\n        const rangeStep =\n          schema?.type === 'integer'\n            ? '1'\n            : schema?.multipleOf\n            ? schema.multipleOf.toString()\n            : '1';\n        return `\n          <div class=\"range-container\">\n            <input type=\"range\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || rangeMin\n        }\" min=\"${rangeMin}\" max=\"${rangeMax}\" step=\"${rangeStep}\" ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', parseFloat(this.value)); this.nextElementSibling.textContent = this.value\">\n            <span class=\"range-value\">${value || rangeMin}</span>\n          </div>\n        `;\n\n      case 'color':\n        const colorValue = value || '#000000';\n        return `<input type=\"color\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${colorValue}\" ${\n          disabled ? 'disabled' : ''\n        } onchange=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'date':\n        return `<input type=\"date\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${\n          disabled ? 'disabled' : ''\n        } onchange=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'time':\n        return `<input type=\"time\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${\n          disabled ? 'disabled' : ''\n        } onchange=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'datetime-local':\n        return `<input type=\"datetime-local\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${\n          disabled ? 'disabled' : ''\n        } onchange=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'email':\n        const emailPattern = schema?.pattern || '';\n        return `<input type=\"email\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${emailPattern ? `pattern=\"${emailPattern}\"` : ''} ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'url':\n        return `<input type=\"url\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'tel':\n        const telPattern = schema?.pattern || '';\n        return `<input type=\"tel\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${telPattern ? `pattern=\"${telPattern}\"` : ''} ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n\n      case 'select':\n        const options =\n          schema?.enum\n            ?.map(\n              (option: any) =>\n                `<option value=\"${option}\" ${\n                  option === value ? 'selected' : ''\n                }>${this.formatEnumOption(option)}</option>`\n            )\n            .join('') || '';\n        return `<select id=\"${id}\" class=\"input-control${errorClass}\" ${\n          disabled ? 'disabled' : ''\n        } onchange=\"this.getRootNode().host.updateValue('${key}', this.value)\">${options}</select>`;\n\n      case 'textarea':\n        const rows = schema?.maxLength && schema.maxLength > 100 ? '4' : '2';\n        const maxLength = schema?.maxLength\n          ? `maxlength=\"${schema.maxLength}\"`\n          : '';\n        return `<textarea id=\"${id}\" class=\"input-control${errorClass}\" rows=\"${rows}\" ${maxLength} ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', this.value)\">${\n          value || ''\n        }</textarea>`;\n\n      default: // text and other types\n        const pattern = schema?.pattern ? `pattern=\"${schema.pattern}\"` : '';\n        const maxLengthAttr = schema?.maxLength\n          ? `maxlength=\"${schema.maxLength}\"`\n          : '';\n        const minLength = schema?.minLength\n          ? `minlength=\"${schema.minLength}\"`\n          : '';\n\n        // Use textarea for long text\n        if (schema?.maxLength && schema.maxLength > 100) {\n          return this.renderInput(id, key, value, schema, 'textarea');\n        }\n\n        return `<input type=\"text\" id=\"${id}\" class=\"input-control${errorClass}\" value=\"${\n          value || ''\n        }\" ${pattern} ${maxLengthAttr} ${minLength} ${\n          disabled ? 'disabled' : ''\n        } oninput=\"this.getRootNode().host.updateValue('${key}', this.value)\">`;\n    }\n  }\n\n  private formatEnumOption(option: any): string {\n    if (typeof option === 'string') {\n      // Convert camelCase and snake_case to readable text\n      return option\n        .replace(/([A-Z])/g, ' $1')\n        .replace(/_/g, ' ')\n        .replace(/^./, str => str.toUpperCase())\n        .trim();\n    }\n    return String(option);\n  }\n\n  private getInputType(value: any, schema?: any): string {\n    // Check for enum first (dropdown)\n    if (schema?.enum && Array.isArray(schema.enum)) {\n      return 'select';\n    }\n\n    // Check schema format hints\n    if (schema?.format) {\n      switch (schema.format) {\n        case 'email':\n          return 'email';\n        case 'uri':\n        case 'url':\n          return 'url';\n        case 'date':\n          return 'date';\n        case 'time':\n          return 'time';\n        case 'date-time':\n          return 'datetime-local';\n        case 'color':\n          return 'color';\n        case 'tel':\n        case 'telephone':\n          return 'tel';\n      }\n    }\n\n    // Check for range/slider based on min/max constraints\n    if (schema?.type === 'number' || schema?.type === 'integer') {\n      if (schema.minimum !== undefined && schema.maximum !== undefined) {\n        // Use slider for bounded numbers, especially for smaller ranges\n        const range = schema.maximum - schema.minimum;\n        if (range <= 100 && schema.type === 'integer') {\n          return 'range';\n        }\n      }\n      return 'number';\n    }\n\n    // Type-based detection\n    switch (typeof value) {\n      case 'boolean':\n        return 'checkbox';\n      case 'number':\n        // Check if we should use range based on schema\n        if (schema?.minimum !== undefined && schema?.maximum !== undefined) {\n          const range = schema.maximum - schema.minimum;\n          if (range <= 100 && Number.isInteger(value)) {\n            return 'range';\n          }\n        }\n        return 'number';\n      default:\n        // Pattern-based detection for strings\n        if (typeof value === 'string') {\n          if (value.includes('@') && value.includes('.')) {\n            return 'email';\n          }\n          if (value.startsWith('http') || value.startsWith('www.')) {\n            return 'url';\n          }\n          if (value.match(/^#[0-9a-fA-F]{6}$/)) {\n            return 'color';\n          }\n          if (value.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            return 'date';\n          }\n          if (value.match(/^\\d{2}:\\d{2}(:\\d{2})?$/)) {\n            return 'time';\n          }\n          if (value.match(/^\\+?\\d{10,}$/)) {\n            return 'tel';\n          }\n        }\n        return 'text';\n    }\n  }\n\n  private formatLabel(key: string): string {\n    return key\n      .replace(/([A-Z])/g, ' $1')\n      .replace(/^./, str => str.toUpperCase())\n      .trim();\n  }\n\n  private dispatchChangeEvent(\n    key: string,\n    oldValue: any,\n    newValue: any,\n    path: string[]\n  ): void {\n    dispatchCustomEvent(this, 'keyvalue-change', {\n      key,\n      oldValue,\n      newValue,\n      path,\n      isValid: this.isValid(),\n    });\n  }\n\n  private validateField(key: string): void {\n    // Remove existing errors for this field\n    this._validationErrors = this._validationErrors.filter(e => e.key !== key);\n\n    const value = this._value[key];\n    const schema = this._schema?.properties?.[key];\n\n    if (!schema) return;\n\n    // Basic validation based on schema\n    const errors = this.validateValue(key, value, schema, [key]);\n    this._validationErrors.push(...errors);\n\n    // Dispatch validation event\n    dispatchCustomEvent(this, 'keyvalue-validation', {\n      isValid: this._validationErrors.length === 0,\n      errors: this._validationErrors,\n    });\n  }\n\n  private validateValue(\n    key: string,\n    value: any,\n    schema: any,\n    path: string[]\n  ): KeyValueValidationError[] {\n    const errors: KeyValueValidationError[] = [];\n\n    // Use jsonschema library for comprehensive validation\n    if (this._schema) {\n      // Create a temporary object with just this field for validation\n      const tempObject = { [key]: value };\n      const tempSchema = {\n        type: 'object',\n        properties: { [key]: schema },\n        required: this._schema.required?.includes(key) ? [key] : [],\n      };\n\n      const result = this._validator.validate(tempObject, tempSchema);\n\n      if (!result.valid) {\n        for (const error of result.errors) {\n          // Parse jsonschema error messages into user-friendly format\n          let message = this.formatValidationError(error, schema);\n\n          errors.push({\n            key,\n            path,\n            message,\n          });\n        }\n      }\n    }\n\n    return errors;\n  }\n\n  private formatValidationError(error: any, schema: any): string {\n    const { name, message, argument } = error;\n\n    switch (name) {\n      case 'required':\n        return 'This field is required';\n\n      case 'type':\n        const expectedType = argument;\n        switch (expectedType) {\n          case 'string':\n            return 'Must be text';\n          case 'number':\n            return 'Must be a number';\n          case 'integer':\n            return 'Must be a whole number';\n          case 'boolean':\n            return 'Must be true or false';\n          default:\n            return `Must be a ${expectedType}`;\n        }\n\n      case 'minimum':\n        return `Must be at least ${argument}`;\n\n      case 'maximum':\n        return `Must be no more than ${argument}`;\n\n      case 'minLength':\n        return `Must be at least ${argument} characters long`;\n\n      case 'maxLength':\n        return `Must be no more than ${argument} characters long`;\n\n      case 'pattern':\n        // Try to provide better messages for common patterns\n        if (schema?.format) {\n          switch (schema.format) {\n            case 'email':\n              return 'Must be a valid email address';\n            case 'uri':\n            case 'url':\n              return 'Must be a valid URL';\n            case 'date':\n              return 'Must be a valid date (YYYY-MM-DD)';\n            case 'time':\n              return 'Must be a valid time (HH:MM)';\n            case 'color':\n              return 'Must be a valid color (e.g., #FF0000)';\n            default:\n              return 'Does not match the required format';\n          }\n        }\n        return 'Does not match the required pattern';\n\n      case 'enum':\n        const validValues = schema?.enum?.join(', ') || 'valid values';\n        return `Must be one of: ${validValues}`;\n\n      case 'multipleOf':\n        return `Must be a multiple of ${argument}`;\n\n      default:\n        // Fallback to the original error message, cleaned up\n        return (\n          message\n            .replace(/^instance\\.?\\w*\\.?/, '')\n            .replace(/^\\./, '')\n            .trim() || 'Invalid value'\n        );\n    }\n  }\n\n  // Public API methods\n  public updateValue(key: string, value: any): void {\n    this._valueProxy[key] = value;\n  }\n\n  public getValue(): Record<string, any> {\n    return { ...this._value };\n  }\n\n  public setValue(value: Record<string, any>): void {\n    this._value = { ...value };\n    this.setupValueProxy();\n    this.render();\n    this.validate();\n  }\n\n  public setSchema(schema: KeyValueSchema): void {\n    this._schema = schema;\n    this.render();\n    this.validate();\n  }\n\n  public validate(): KeyValueValidationResult {\n    this._validationErrors = [];\n\n    if (!this._schema) {\n      return { isValid: true, errors: [] };\n    }\n\n    // Use jsonschema to validate the entire object\n    const result = this._validator.validate(this._value, this._schema);\n\n    if (!result.valid) {\n      for (const error of result.errors) {\n        // Extract the property name from the error path\n        const propertyPath = error.property.replace('instance.', '').split('.');\n        const key = propertyPath[0] || 'root';\n        const fieldSchema = this._schema.properties?.[key];\n\n        const message = this.formatValidationError(error, fieldSchema);\n\n        this._validationErrors.push({\n          key,\n          path: propertyPath,\n          message,\n        });\n      }\n    }\n\n    const validationResult = {\n      isValid: this._validationErrors.length === 0,\n      errors: this._validationErrors,\n    };\n\n    dispatchCustomEvent(this, 'keyvalue-validation', validationResult);\n    return validationResult;\n  }\n\n  public isValid(): boolean {\n    return this._validationErrors.length === 0;\n  }\n\n  public focusField(key: string): void {\n    const input = this.shadowRoot?.querySelector(\n      `#field-${key}`\n    ) as HTMLInputElement;\n    input?.focus();\n  }\n\n  // Properties\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  get readonly(): boolean {\n    return this._readonly;\n  }\n\n  set readonly(value: boolean) {\n    this._readonly = value;\n    if (value) {\n      this.setAttribute('readonly', '');\n    } else {\n      this.removeAttribute('readonly');\n    }\n  }\n\n  get compact(): boolean {\n    return this._compact;\n  }\n\n  set compact(value: boolean) {\n    this._compact = value;\n    if (value) {\n      this.setAttribute('compact', '');\n    } else {\n      this.removeAttribute('compact');\n    }\n  }\n\n  get value(): Record<string, any> {\n    return this.getValue();\n  }\n\n  set value(value: Record<string, any>) {\n    this.setValue(value);\n  }\n\n  get schema(): KeyValueSchema | null {\n    return this._schema;\n  }\n\n  set schema(value: KeyValueSchema | null) {\n    if (value) {\n      this.setSchema(value);\n    } else {\n      this._schema = null;\n      this.render();\n    }\n  }\n\n  get headerTitle(): string | null {\n    return this._headerTitle;\n  }\n\n  set headerTitle(value: string | null) {\n    this._headerTitle = value;\n    if (value !== null) {\n      this.setAttribute('header-title', value);\n    } else {\n      this.removeAttribute('header-title');\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-keyvalue-editor')) {\n  customElements.define('e2-keyvalue-editor', KeyValueEditorElement);\n}\n","/**\n * ListView Element\n * A versatile list component supporting multiple view modes (list, details, icons)\n * with selection management and multi-select capabilities\n */\n\nimport {\n  EditorElementProperties,\n  ListViewColumn,\n  ListViewItem,\n  ListViewItemClickEvent,\n  ListViewItemDoubleClickEvent,\n  ListViewMode,\n  ListViewSelectionChangeEvent,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ListView extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n  private _items: ListViewItem[] = [];\n  private _columns: ListViewColumn[] = [];\n  private _viewMode: ListViewMode = 'list';\n  private _multiSelect: boolean = false;\n  private _selectedItems: Set<string> = new Set();\n  private _lastSelectedIndex: number = -1;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'view-mode', 'multi-select'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          border: 1px solid var(--listview-border, #ccc);\n          background: var(--listview-bg, #fff);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          overflow: hidden;\n          min-height: 100px;\n          container-type: style;\n          --header-visible: yes;\n        }\n\n        :host(.theme-dark) {\n          background: var(--listview-bg-dark, #1e1e1e);\n          border-color: var(--listview-border-dark, #555);\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .listview-container {\n          width: 100%;\n          height: 100%;\n        }\n\n        .listview-header {\n          display: none;\n          font-weight: bold;\n          padding: 0;\n          flex-shrink: 0;\n        }\n\n        /* Show header when in details mode and header is visible */\n        @container style(--header-visible: yes) {\n          :host([view-mode=\"details\"]) .listview-header {\n            display: block;\n          }\n        }\n\n        /* Hide header when explicitly set to no */\n        @container style(--header-visible: no) {\n          .listview-header {\n            display: none !important;\n          }\n        }\n\n        .listview-header-row {\n          display: flex;\n          align-items: center;\n        }\n\n        .listview-header-cell {\n          padding: 8px 12px;\n          background: var(--listview-header-bg, #f5f5f5);\n          border-bottom: 1px solid var(--listview-border, #ccc);\n          border-right: 1px solid var(--listview-border, #ccc);\n          flex: 1;\n          min-width: 0;\n          cursor: pointer;\n          user-select: none;\n        }\n\n        :host(.theme-dark) .listview-header-cell {\n          background: var(--listview-header-bg-dark, #2d2d2d);\n          border-bottom-color: var(--listview-border-dark, #555);\n          border-right-color: var(--listview-border-dark, #555);\n        }\n\n        .listview-header-cell:hover {\n          background: var(--listview-header-hover-bg, #e5e5e5);\n        }\n\n        :host(.theme-dark) .listview-header-cell:hover {\n          background: var(--listview-header-hover-bg-dark, #3d3d3d);\n        }\n\n        .listview-header-cell:last-child {\n          border-right: none;\n        }\n\n        .listview-content {\n          overflow: auto;\n          flex: 1;\n        }\n\n        .listview-item {\n          padding: 4px 8px;\n          cursor: pointer;\n          user-select: none;\n          border-bottom: 1px solid transparent;\n          display: flex;\n          align-items: center;\n          min-height: 24px;\n        }\n\n        :host(:not([view-mode=\"details\"])) .listview-item:hover {\n          background: var(--listview-item-hover-bg, #f0f0f0);\n        }\n        :host([view-mode=\"details\"]) .listview-item:hover .listview-item-cell {\n          background: var(--listview-item-hover-bg, #f0f0f0);\n        }\n\n        :host(.theme-dark:not([view-mode=\"details\"])) .listview-item:hover {\n          background: var(--listview-item-hover-bg-dark, #2d2d2d);\n        }\n        :host(.theme-dark[view-mode=\"details\"]) .listview-item:hover .listview-item-cell {\n          background: var(--listview-item-hover-bg-dark, #2d2d2d);\n        }\n\n        :host(:not([view-mode=\"details\"])) .listview-item.selected {\n          background: var(--listview-item-selected-bg, #0078d4);\n          color: var(--listview-item-selected-text, #fff);\n        }\n        :host([view-mode=\"details\"]) .listview-item.selected .listview-item-cell {\n          background: var(--listview-item-selected-bg, #0078d4);\n          color: var(--listview-item-selected-text, #fff);\n        }\n\n        :host(.theme-dark:not([view-mode=\"details\"])) .listview-item.selected {\n          background: var(--listview-item-selected-bg-dark, #0078d4);\n          color: var(--listview-item-selected-text-dark, #fff);\n        }\n        :host(.theme-dark[view-mode=\"details\"]) .listview-item.selected .listview-item-cell {\n          background: var(--listview-item-selected-bg-dark, #0078d4);\n          color: var(--listview-item-selected-text-dark, #fff);\n        }\n\n        .listview-item.disabled {\n          opacity: 0.6;\n          cursor: default;\n          pointer-events: none;\n        }\n\n        .listview-item-icon {\n          margin-right: 8px;\n          flex-shrink: 0;\n          font-size: 16px;\n          width: 16px;\n          text-align: center;\n        }\n\n        .listview-item-label {\n          flex: 1;\n          min-width: 0;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .listview-item-cell {\n          flex: 1;\n          min-width: 0;\n          padding: 0 4px;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        /* Details view specific styles */\n        :host([view-mode=\"details\"]) .listview-container {\n          display: flex;\n          flex-direction: column;\n        }\n\n        :host([view-mode=\"details\"]) .listview-content {\n          min-height: 0;\n        }\n\n        :host([view-mode=\"details\"]) .listview-item {\n          padding: 0;\n        }\n\n        :host([view-mode=\"details\"]) .listview-item-cell {\n          height: 100%;\n          padding: 8px 12px;\n          border-right: 1px solid var(--listview-border, #ccc);\n        }\n\n        :host(.theme-dark[view-mode=\"details\"]) .listview-item-cell {\n          border-right-color: var(--listview-border-dark, #555);\n        }\n\n        :host([view-mode=\"details\"]) .listview-item-cell:last-child {\n          border-right: none;\n        }\n\n        /* Icons view specific styles */\n        :host([view-mode=\"icons\"]) .listview-items {\n          display: flex;\n          flex-wrap: wrap;\n          padding: 8px;\n          gap: 8px;\n          align-content: flex-start;\n        }\n\n        :host([view-mode=\"icons\"]) .listview-item {\n          flex-direction: column;\n          width: 80px;\n          height: 80px;\n          padding: 8px;\n          text-align: center;\n          border: 1px solid transparent;\n          border-radius: 4px;\n        }\n\n        :host([view-mode=\"icons\"]) .listview-item-icon {\n          margin: 0 0 4px 0;\n          font-size: 32px;\n          width: auto;\n        }\n\n        :host([view-mode=\"icons\"]) .listview-item-label {\n          font-size: 12px;\n          line-height: 1.2;\n          white-space: normal;\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n        }\n\n        .empty-state {\n          padding: 32px;\n          text-align: center;\n          color: var(--text-color-muted, #666);\n          font-style: italic;\n        }\n\n        :host(.theme-dark) .empty-state {\n          color: var(--text-color-muted-dark, #999);\n        }\n      </style>\n      <div class=\"listview-container\">\n        <div class=\"listview-content\">\n          <div class=\"listview-header\">\n            <div class=\"listview-header-row\"></div>\n          </div>\n          <div class=\"listview-items\"></div>\n        </div>\n      </div>\n    `;\n\n    this.setupEventHandlers();\n  }\n\n  private setupEventHandlers(): void {\n    const items = this.shadowRoot?.querySelector('.listview-items');\n    if (!items) return;\n\n    items.addEventListener('click', this.handleItemClick.bind(this));\n    items.addEventListener('dblclick', this.handleItemDoubleClick.bind(this));\n  }\n\n  private handleItemClick(event: Event): void {\n    const target = event.target as HTMLElement;\n    const itemElement = target.closest('.listview-item') as HTMLElement;\n\n    if (!itemElement || itemElement.classList.contains('disabled')) {\n      return;\n    }\n\n    const itemId = itemElement.dataset.itemId;\n    if (!itemId) return;\n\n    const item = this._items.find(i => i.id === itemId);\n    if (!item) return;\n\n    const mouseEvent = event as MouseEvent;\n    const { ctrlKey, shiftKey, altKey } = mouseEvent;\n\n    // Handle selection\n    this.handleItemSelection(itemId, ctrlKey, shiftKey);\n\n    // Dispatch click event\n    dispatchCustomEvent<ListViewItemClickEvent['detail']>(\n      this,\n      'listview-item-click',\n      {\n        listViewId: this.id,\n        listView: this,\n        item,\n        itemId,\n        ctrlKey,\n        shiftKey,\n        altKey,\n      }\n    );\n  }\n\n  private handleItemDoubleClick(event: Event): void {\n    const target = event.target as HTMLElement;\n    const itemElement = target.closest('.listview-item') as HTMLElement;\n\n    if (!itemElement || itemElement.classList.contains('disabled')) {\n      return;\n    }\n\n    const itemId = itemElement.dataset.itemId;\n    if (!itemId) return;\n\n    const item = this._items.find(i => i.id === itemId);\n    if (!item) return;\n\n    // Dispatch double-click event\n    dispatchCustomEvent<ListViewItemDoubleClickEvent['detail']>(\n      this,\n      'listview-item-double-click',\n      {\n        listViewId: this.id,\n        listView: this,\n        item,\n        itemId,\n      }\n    );\n  }\n\n  private handleItemSelection(\n    itemId: string,\n    ctrlKey: boolean,\n    shiftKey: boolean\n  ): void {\n    const itemIndex = this._items.findIndex(i => i.id === itemId);\n    if (itemIndex === -1) return;\n\n    const previousSelection = new Set(this._selectedItems);\n\n    if (this._multiSelect && shiftKey && this._lastSelectedIndex !== -1) {\n      // Range selection\n      const start = Math.min(this._lastSelectedIndex, itemIndex);\n      const end = Math.max(this._lastSelectedIndex, itemIndex);\n\n      if (!ctrlKey) {\n        this._selectedItems.clear();\n      }\n\n      for (let i = start; i <= end; i++) {\n        this._selectedItems.add(this._items[i].id);\n      }\n    } else if (this._multiSelect && ctrlKey) {\n      // Toggle selection\n      if (this._selectedItems.has(itemId)) {\n        this._selectedItems.delete(itemId);\n      } else {\n        this._selectedItems.add(itemId);\n      }\n    } else {\n      // Single selection\n      this._selectedItems.clear();\n      this._selectedItems.add(itemId);\n    }\n\n    this._lastSelectedIndex = itemIndex;\n    this.updateItemElements();\n    this.dispatchSelectionChange(previousSelection);\n  }\n\n  private dispatchSelectionChange(previousSelection: Set<string>): void {\n    const selectedItems = this._items.filter(item =>\n      this._selectedItems.has(item.id)\n    );\n    const addedItems = this._items.filter(\n      item =>\n        this._selectedItems.has(item.id) && !previousSelection.has(item.id)\n    );\n    const removedItems = this._items.filter(\n      item =>\n        !this._selectedItems.has(item.id) && previousSelection.has(item.id)\n    );\n\n    dispatchCustomEvent<ListViewSelectionChangeEvent['detail']>(\n      this,\n      'listview-selection-change',\n      {\n        listViewId: this.id,\n        listView: this,\n        selectedItems,\n        selectedIds: Array.from(this._selectedItems),\n        addedItems,\n        removedItems,\n      }\n    );\n  }\n\n  private render(): void {\n    if (!this.shadowRoot) return;\n\n    this.renderHeader();\n    this.renderContent();\n  }\n\n  private renderHeader(): void {\n    if (this._viewMode !== 'details' || this._columns.length === 0) {\n      return;\n    }\n\n    const headerRow = this.shadowRoot?.querySelector('.listview-header-row');\n    if (!headerRow) return;\n\n    headerRow.innerHTML = '';\n\n    this._columns.forEach(column => {\n      const cell = document.createElement('div');\n      cell.className = 'listview-header-cell';\n      cell.textContent = column.label;\n      cell.dataset.columnId = column.id;\n\n      if (column.width) {\n        if (typeof column.width === 'number') {\n          cell.style.flex = `0 0 ${column.width}px`;\n        } else {\n          cell.style.flex = `0 0 ${column.width}`;\n        }\n      }\n\n      headerRow.appendChild(cell);\n    });\n  }\n\n  private renderContent(): void {\n    const itemsContainer = this.shadowRoot?.querySelector('.listview-items');\n    if (!itemsContainer) return;\n\n    itemsContainer.innerHTML = '';\n\n    if (this._items.length === 0) {\n      const emptyState = document.createElement('div');\n      emptyState.className = 'empty-state';\n      emptyState.textContent = 'No items to display';\n      itemsContainer.appendChild(emptyState);\n      return;\n    }\n\n    this._items.forEach(item => {\n      const itemElement = this.createItemElement(item);\n      itemsContainer.appendChild(itemElement);\n    });\n  }\n\n  private createItemElement(item: ListViewItem): HTMLElement {\n    const itemElement = document.createElement('div');\n    itemElement.className = 'listview-item';\n    itemElement.dataset.itemId = item.id;\n\n    if (item.disabled) {\n      itemElement.classList.add('disabled');\n    }\n\n    if (this._selectedItems.has(item.id)) {\n      itemElement.classList.add('selected');\n    }\n\n    if (this._viewMode === 'details' && this._columns.length > 0) {\n      this._columns.forEach(column => {\n        const cell = document.createElement('div');\n        cell.className = 'listview-item-cell';\n\n        if (column.width) {\n          if (typeof column.width === 'number') {\n            cell.style.flex = `0 0 ${column.width}px`;\n          } else {\n            cell.style.flex = `0 0 ${column.width}`;\n          }\n        }\n\n        let value = '';\n        if (column.id === 'label') {\n          value = item.label;\n        } else if (column.id === 'icon') {\n          value = item.icon || '';\n        } else if (item.data && item.data[column.id] !== undefined) {\n          value = item.data[column.id];\n        }\n\n        if (column.renderer) {\n          cell.innerHTML = column.renderer(item, value);\n        } else {\n          cell.textContent = String(value);\n        }\n\n        itemElement.appendChild(cell);\n      });\n    } else {\n      // List or Icons view\n      if (item.icon) {\n        const iconElement = document.createElement('span');\n        iconElement.className = 'listview-item-icon';\n        iconElement.textContent = item.icon;\n        itemElement.appendChild(iconElement);\n      }\n\n      const labelElement = document.createElement('span');\n      labelElement.className = 'listview-item-label';\n      labelElement.textContent = item.label;\n      itemElement.appendChild(labelElement);\n    }\n\n    return itemElement;\n  }\n\n  private updateItemElements(): void {\n    if (!this.shadowRoot) return;\n\n    const itemElements = this.shadowRoot.querySelectorAll('.listview-item');\n    itemElements.forEach(element => {\n      const itemId = (element as HTMLElement).dataset.itemId;\n      if (itemId) {\n        element.classList.toggle('selected', this._selectedItems.has(itemId));\n      }\n    });\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('listview');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    this.render();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'view-mode':\n        this.viewMode = (newValue as ListViewMode) || 'list';\n        break;\n      case 'multi-select':\n        this.multiSelect = newValue !== null;\n        break;\n    }\n  }\n\n  // Properties\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n    this.applyTheme(value);\n  }\n\n  get items(): ListViewItem[] {\n    return [...this._items];\n  }\n\n  set items(value: ListViewItem[]) {\n    this._items = [...value];\n    this._selectedItems.clear();\n    this._lastSelectedIndex = -1;\n    if (this.isConnected) {\n      this.render();\n    }\n  }\n\n  get columns(): ListViewColumn[] {\n    return [...this._columns];\n  }\n\n  set columns(value: ListViewColumn[]) {\n    this._columns = [...value];\n    if (this.isConnected) {\n      this.render();\n    }\n  }\n\n  get viewMode(): ListViewMode {\n    return this._viewMode;\n  }\n\n  set viewMode(value: ListViewMode) {\n    this._viewMode = value;\n    this.setAttribute('view-mode', value);\n    if (this.isConnected) {\n      this.render();\n    }\n  }\n\n  get multiSelect(): boolean {\n    return this._multiSelect;\n  }\n\n  set multiSelect(value: boolean) {\n    this._multiSelect = value;\n    if (value) {\n      this.setAttribute('multi-select', '');\n    } else {\n      this.removeAttribute('multi-select');\n    }\n  }\n\n  get selectedItems(): ListViewItem[] {\n    return this._items.filter(item => this._selectedItems.has(item.id));\n  }\n\n  get selectedIds(): string[] {\n    return Array.from(this._selectedItems);\n  }\n\n  // Methods\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  selectItem(itemId: string): void {\n    if (!this._multiSelect) {\n      this._selectedItems.clear();\n    }\n    this._selectedItems.add(itemId);\n    this.updateItemElements();\n  }\n\n  deselectItem(itemId: string): void {\n    this._selectedItems.delete(itemId);\n    this.updateItemElements();\n  }\n\n  selectAll(): void {\n    if (!this._multiSelect) return;\n\n    this._items.forEach(item => {\n      if (!item.disabled) {\n        this._selectedItems.add(item.id);\n      }\n    });\n    this.updateItemElements();\n  }\n\n  deselectAll(): void {\n    this._selectedItems.clear();\n    this.updateItemElements();\n  }\n\n  toggleItemSelection(itemId: string): void {\n    if (this._selectedItems.has(itemId)) {\n      this.deselectItem(itemId);\n    } else {\n      this.selectItem(itemId);\n    }\n  }\n\n  setSelectedItems(itemIds: string[]): void {\n    const previousSelection = new Set(this._selectedItems);\n    this._selectedItems.clear();\n\n    itemIds.forEach(id => {\n      if (this._items.find(item => item.id === id)) {\n        this._selectedItems.add(id);\n      }\n    });\n\n    this.updateItemElements();\n    this.dispatchSelectionChange(previousSelection);\n  }\n\n  scrollToItem(itemId: string): void {\n    const itemElement = this.shadowRoot?.querySelector(\n      `[data-item-id=\"${itemId}\"]`\n    );\n    if (itemElement) {\n      itemElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  getItem(itemId: string): ListViewItem | undefined {\n    return this._items.find(item => item.id === itemId);\n  }\n\n  addItem(item: ListViewItem): void {\n    this._items.push(item);\n    if (this.isConnected) {\n      this.render();\n    }\n  }\n\n  removeItem(itemId: string): boolean {\n    const index = this._items.findIndex(item => item.id === itemId);\n    if (index !== -1) {\n      this._items.splice(index, 1);\n      this._selectedItems.delete(itemId);\n      if (this.isConnected) {\n        this.render();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  updateItem(itemId: string, updates: Partial<ListViewItem>): boolean {\n    const item = this._items.find(i => i.id === itemId);\n    if (item) {\n      Object.assign(item, updates);\n      if (this.isConnected) {\n        this.render();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  refresh(): void {\n    this.render();\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-list-view')) {\n  customElements.define('e2-list-view', ListView);\n}\n","/**\n * Notification Element\n * A toast notification component with theming and animation support\n */\n\nimport { EditorElementProperties, NotificationType, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class NotificationElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _timeoutId: number | null = null;\n  private _visible: boolean = false;\n  private _resolvePromise: (() => void) | null = null;\n  private _rejectPromise: ((reason?: any) => void) | null = null;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return [\n      'type',\n      'title',\n      'message',\n      'timeout',\n      'dismissible',\n      'persistent',\n      'theme',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --notification-bg: #ffffff;\n          --notification-border: #e0e0e0;\n          --notification-shadow: rgba(0, 0, 0, 0.1);\n          --notification-text: #333333;\n          --notification-title: #1a1a1a;\n          --notification-close-hover: #f0f0f0;\n          --notification-close-active: #e0e0e0;\n          --notification-icon-info: #3b82f6;\n          --notification-icon-success: #10b981;\n          --notification-icon-warning: #f59e0b;\n          --notification-icon-error: #ef4444;\n\n          display: block;\n          position: fixed;\n          z-index: 10000;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n\n          /* Default positioning - can be overridden by container */\n          top: 20px;\n          right: 20px;\n\n          /* Animation states */\n          opacity: 0;\n          transform: translateX(100%);\n          transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n          pointer-events: none;\n        }\n\n        :host(.visible) {\n          opacity: 1;\n          transform: translateX(0);\n          pointer-events: auto;\n        }\n\n        :host(.theme-dark) {\n          --notification-bg: #374151;\n          --notification-border: #4b5563;\n          --notification-text: #e5e7eb;\n          --notification-title: #f9fafb;\n          --notification-close-hover: #4b5563;\n          --notification-close-active: #6b7280;\n        }\n\n        .notification {\n          background: var(--notification-bg);\n          border: 1px solid var(--notification-border);\n          border-radius: 8px;\n          box-shadow: 0 4px 12px var(--notification-shadow);\n          padding: 16px;\n          min-width: 320px;\n          max-width: 480px;\n          display: flex;\n          align-items: flex-start;\n          gap: 12px;\n          position: relative;\n        }\n\n        .notification-icon {\n          flex-shrink: 0;\n          width: 20px;\n          height: 20px;\n          margin-top: 2px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 16px;\n        }\n\n        .notification-icon.type-info {\n          color: var(--notification-icon-info);\n        }\n\n        .notification-icon.type-success {\n          color: var(--notification-icon-success);\n        }\n\n        .notification-icon.type-warning {\n          color: var(--notification-icon-warning);\n        }\n\n        .notification-icon.type-error {\n          color: var(--notification-icon-error);\n        }\n\n        .notification-content {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .notification-title {\n          color: var(--notification-title);\n          font-weight: 600;\n          margin: 0 0 4px 0;\n          font-size: 14px;\n          line-height: 1.4;\n        }\n\n        .notification-message {\n          color: var(--notification-text);\n          margin: 0;\n          font-size: 14px;\n          line-height: 1.4;\n          word-wrap: break-word;\n        }\n\n        .notification-close {\n          flex-shrink: 0;\n          background: none;\n          border: none;\n          color: var(--notification-text);\n          cursor: pointer;\n          padding: 4px;\n          border-radius: 4px;\n          width: 24px;\n          height: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 16px;\n          line-height: 1;\n          margin-top: -2px;\n          margin-right: -2px;\n        }\n\n        .notification-close:hover {\n          background: var(--notification-close-hover);\n        }\n\n        .notification-close:active {\n          background: var(--notification-close-active);\n        }\n\n        .notification-close:focus {\n          outline: 2px solid var(--notification-icon-info);\n          outline-offset: 1px;\n        }\n\n        :host([dismissible=\"false\"]) .notification-close {\n          display: none;\n        }\n\n        /* Progress bar for timed notifications */\n        .notification-progress {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          height: 3px;\n          background: var(--notification-icon-info);\n          border-radius: 0 0 8px 8px;\n          transition: width linear;\n          opacity: 0.6;\n        }\n\n        :host([type=\"success\"]) .notification-progress {\n          background: var(--notification-icon-success);\n        }\n\n        :host([type=\"warning\"]) .notification-progress {\n          background: var(--notification-icon-warning);\n        }\n\n        :host([type=\"error\"]) .notification-progress {\n          background: var(--notification-icon-error);\n        }\n\n        :host([timeout=\"0\"]) .notification-progress,\n        :host([persistent]) .notification-progress {\n          display: none;\n        }\n      </style>\n\n      <div class=\"notification\" part=\"notification\">\n        <div class=\"notification-icon\" part=\"icon\"></div>\n        <div class=\"notification-content\" part=\"content\">\n          <div class=\"notification-title\" part=\"title\"></div>\n          <div class=\"notification-message\" part=\"message\"></div>\n        </div>\n        <button class=\"notification-close\" part=\"close-button\" type=\"button\" aria-label=\"Close notification\">\n          ×\n        </button>\n        <div class=\"notification-progress\" part=\"progress\"></div>\n      </div>\n    `;\n\n    this.setupEventListeners();\n    this.updateContent();\n  }\n\n  private setupEventListeners(): void {\n    const closeButton = this.shadowRoot?.querySelector('.notification-close');\n    const notification = this.shadowRoot?.querySelector('.notification');\n\n    if (closeButton) {\n      closeButton.addEventListener('click', this.handleCloseClick.bind(this));\n    }\n\n    if (notification) {\n      notification.addEventListener(\n        'click',\n        this.handleNotificationClick.bind(this)\n      );\n    }\n  }\n\n  private handleCloseClick(event: Event): void {\n    event.stopPropagation();\n    this.dismiss();\n  }\n\n  private handleNotificationClick(): void {\n    dispatchCustomEvent(this, 'notification-click', {\n      notificationId: this.id,\n      notification: this,\n      type: this.type,\n    });\n  }\n\n  private updateContent(): void {\n    const shadowRoot = this.shadowRoot;\n    if (!shadowRoot) return;\n\n    const iconElement = shadowRoot.querySelector('.notification-icon');\n    const titleElement = shadowRoot.querySelector('.notification-title');\n    const messageElement = shadowRoot.querySelector('.notification-message');\n\n    if (iconElement) {\n      iconElement.className = `notification-icon type-${this.type}`;\n      iconElement.textContent = this.getIconForType(this.type);\n    }\n\n    if (titleElement) {\n      const title = this.title;\n      if (title) {\n        titleElement.textContent = title;\n        (titleElement as HTMLElement).style.display = 'block';\n      } else {\n        (titleElement as HTMLElement).style.display = 'none';\n      }\n    }\n\n    if (messageElement) {\n      messageElement.textContent = this.message;\n    }\n  }\n\n  private getIconForType(type: NotificationType): string {\n    switch (type) {\n      case 'success':\n        return '✓';\n      case 'warning':\n        return '⚠';\n      case 'error':\n        return '✕';\n      case 'info':\n      default:\n        return 'ℹ';\n    }\n  }\n\n  private startTimeout(): void {\n    this.clearTimeout();\n\n    const timeout = this.timeout;\n    if (timeout <= 0 || this.persistent) return;\n\n    const progressBar = this.shadowRoot?.querySelector(\n      '.notification-progress'\n    ) as HTMLElement;\n    if (progressBar) {\n      progressBar.style.width = '100%';\n      progressBar.style.transitionDuration = `${timeout}ms`;\n\n      // Animate progress bar\n      requestAnimationFrame(() => {\n        progressBar.style.width = '0%';\n      });\n    }\n\n    this._timeoutId = window.setTimeout(() => {\n      this.hide();\n    }, timeout);\n  }\n\n  private clearTimeout(): void {\n    if (this._timeoutId !== null) {\n      window.clearTimeout(this._timeoutId);\n      this._timeoutId = null;\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('notification');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.clearTimeout();\n\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'type':\n      case 'title':\n      case 'message':\n        this.updateContent();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'timeout':\n      case 'persistent':\n        if (this._visible) {\n          this.startTimeout();\n        }\n        break;\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get type(): NotificationType {\n    return (this.getAttribute('type') as NotificationType) || 'info';\n  }\n\n  set type(value: NotificationType) {\n    this.setAttribute('type', value);\n  }\n\n  get title(): string {\n    return this.getAttribute('title') || '';\n  }\n\n  set title(value: string) {\n    this.setAttribute('title', value);\n  }\n\n  get message(): string {\n    return this.getAttribute('message') || 'This is a notification message.';\n  }\n\n  set message(value: string) {\n    this.setAttribute('message', value);\n  }\n\n  get timeout(): number {\n    return parseInt(this.getAttribute('timeout') || '5000', 10);\n  }\n\n  set timeout(value: number) {\n    this.setAttribute('timeout', value.toString());\n  }\n\n  get dismissible(): boolean {\n    return this.getAttribute('dismissible') !== 'false';\n  }\n\n  set dismissible(value: boolean) {\n    this.setAttribute('dismissible', value.toString());\n  }\n\n  get persistent(): boolean {\n    return this.hasAttribute('persistent');\n  }\n\n  set persistent(value: boolean) {\n    if (value) {\n      this.setAttribute('persistent', '');\n    } else {\n      this.removeAttribute('persistent');\n    }\n  }\n\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  /**\n   * Show the notification and return a promise that resolves when hidden\n   */\n  public show(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this._resolvePromise) {\n        // Already showing, reject the previous promise\n        this._rejectPromise?.(\n          new Error('Notification was replaced by another show() call')\n        );\n      }\n\n      this._resolvePromise = resolve;\n      this._rejectPromise = reject;\n\n      this._visible = true;\n      this.classList.add('visible');\n\n      dispatchCustomEvent(this, 'notification-show', {\n        notificationId: this.id,\n        notification: this,\n        type: this.type,\n      });\n\n      this.startTimeout();\n    });\n  }\n\n  /**\n   * Hide the notification with animation\n   */\n  public hide(): void {\n    if (!this._visible) return;\n\n    this._visible = false;\n    this.classList.remove('visible');\n    this.clearTimeout();\n\n    dispatchCustomEvent(this, 'notification-hide', {\n      notificationId: this.id,\n      notification: this,\n      type: this.type,\n    });\n\n    // Resolve the promise after animation completes\n    setTimeout(() => {\n      if (this._resolvePromise) {\n        this._resolvePromise();\n        this._resolvePromise = null;\n        this._rejectPromise = null;\n      }\n    }, 300); // Match CSS transition duration\n  }\n\n  /**\n   * Dismiss the notification (hide and remove from DOM if appropriate)\n   */\n  public dismiss(): void {\n    dispatchCustomEvent(this, 'notification-dismiss', {\n      notificationId: this.id,\n      notification: this,\n      type: this.type,\n    });\n\n    this.hide();\n  }\n\n  public applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-notification')) {\n  customElements.define('e2-notification', NotificationElement);\n}\n","/**\n * Notification Container Element\n * A container that manages positioning and lifecycle of notification toasts\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport type NotificationPosition =\n  | 'top-left'\n  | 'top-right'\n  | 'top-center'\n  | 'bottom-left'\n  | 'bottom-right'\n  | 'bottom-center';\n\nexport type StackDirection = 'up' | 'down';\n\nexport class NotificationContainerElement\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _observer: MutationObserver | null = null;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return [\n      'position',\n      'max-notifications',\n      'stack-direction',\n      'spacing',\n      'theme',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --container-spacing: 16px;\n          --notification-gap: 8px;\n\n          position: fixed;\n          z-index: 10000;\n          pointer-events: none;\n          display: flex;\n          flex-direction: column;\n          gap: var(--notification-gap);\n          max-width: calc(100vw - 40px);\n          max-height: calc(100vh - 40px);\n          overflow: hidden;\n        }\n\n        /* Position variants */\n        :host([position=\"top-left\"]) {\n          top: var(--container-spacing);\n          left: var(--container-spacing);\n          align-items: flex-start;\n        }\n\n        :host([position=\"top-right\"]) {\n          top: var(--container-spacing);\n          right: var(--container-spacing);\n          align-items: flex-end;\n        }\n\n        :host([position=\"top-center\"]) {\n          top: var(--container-spacing);\n          left: 50%;\n          transform: translateX(-50%);\n          align-items: center;\n        }\n\n        :host([position=\"bottom-left\"]) {\n          bottom: var(--container-spacing);\n          left: var(--container-spacing);\n          align-items: flex-start;\n          flex-direction: column-reverse;\n        }\n\n        :host([position=\"bottom-right\"]) {\n          bottom: var(--container-spacing);\n          right: var(--container-spacing);\n          align-items: flex-end;\n          flex-direction: column-reverse;\n        }\n\n        :host([position=\"bottom-center\"]) {\n          bottom: var(--container-spacing);\n          left: 50%;\n          transform: translateX(-50%);\n          align-items: center;\n          flex-direction: column-reverse;\n        }\n\n        /* Stack direction overrides */\n        :host([stack-direction=\"up\"]) {\n          flex-direction: column-reverse;\n        }\n\n        :host([stack-direction=\"down\"]) {\n          flex-direction: column;\n        }\n\n        /* Spacing control */\n        :host([spacing=\"small\"]) {\n          --notification-gap: 4px;\n        }\n\n        :host([spacing=\"medium\"]) {\n          --notification-gap: 8px;\n        }\n\n        :host([spacing=\"large\"]) {\n          --notification-gap: 16px;\n        }\n\n        ::slotted(e2-notification) {\n          pointer-events: auto;\n          position: static !important;\n          transform: none !important;\n          margin: 0;\n        }\n\n        /* Animation for notifications */\n        ::slotted(e2-notification:not(.visible)) {\n          opacity: 0;\n          transform: scale(0.9);\n          transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n        }\n\n        ::slotted(e2-notification.visible) {\n          opacity: 1;\n          transform: scale(1);\n        }\n\n        /* Stacking animations for top positions */\n        :host([position^=\"top\"]) ::slotted(e2-notification) {\n          animation: slideInFromTop 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n        }\n\n        /* Stacking animations for bottom positions */\n        :host([position^=\"bottom\"]) ::slotted(e2-notification) {\n          animation: slideInFromBottom 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n        }\n\n        @keyframes slideInFromTop {\n          from {\n            opacity: 0;\n            transform: translateY(-20px) scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n\n        @keyframes slideInFromBottom {\n          from {\n            opacity: 0;\n            transform: translateY(20px) scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n\n        /* Responsive adjustments */\n        @media (max-width: 640px) {\n          :host {\n            --container-spacing: 12px;\n            max-width: calc(100vw - 24px);\n          }\n\n          ::slotted(e2-notification) {\n            min-width: 280px;\n            max-width: calc(100vw - 24px);\n          }\n        }\n      </style>\n\n      <slot></slot>\n    `;\n\n    this.setupMutationObserver();\n  }\n\n  private setupMutationObserver(): void {\n    this._observer = new MutationObserver(mutations => {\n      mutations.forEach(mutation => {\n        if (mutation.type === 'childList') {\n          this.manageNotifications();\n          this.updateNotificationPositions();\n        }\n      });\n    });\n\n    this._observer.observe(this, {\n      childList: true,\n      subtree: false,\n    });\n  }\n\n  private manageNotifications(): void {\n    const notifications = this.querySelectorAll('e2-notification');\n    const maxNotifications = this.maxNotifications;\n\n    if (maxNotifications > 0 && notifications.length > maxNotifications) {\n      // Remove oldest notifications that exceed the limit\n      const excess = notifications.length - maxNotifications;\n      for (let i = 0; i < excess; i++) {\n        const notification = notifications[i] as any;\n        if (typeof notification.dismiss === 'function') {\n          notification.dismiss();\n        } else {\n          notification.remove();\n        }\n      }\n    }\n\n    // Dispatch container update event\n    dispatchCustomEvent(this, 'notification-container-update', {\n      containerId: this.id,\n      container: this,\n      position: this.position,\n      count: notifications.length,\n    });\n  }\n\n  private updateNotificationPositions(): void {\n    const notifications = this.querySelectorAll('e2-notification');\n\n    notifications.forEach((notification, index) => {\n      // Apply theme to notification if it matches container theme\n      if (\n        this._theme !== 'auto' &&\n        typeof (notification as any).applyTheme === 'function'\n      ) {\n        (notification as any).theme = this._theme;\n      }\n\n      // Apply z-index to ensure proper stacking\n      (notification as HTMLElement).style.zIndex = (\n        10000 +\n        notifications.length -\n        index\n      ).toString();\n    });\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('notification-container');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    this.updateNotificationPositions();\n  }\n\n  disconnectedCallback(): void {\n    if (this._observer) {\n      this._observer.disconnect();\n      this._observer = null;\n    }\n\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'position':\n      case 'stack-direction':\n      case 'spacing':\n        // Handled by CSS attribute selectors\n        break;\n      case 'max-notifications':\n        this.manageNotifications();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        this.updateNotificationPositions();\n        break;\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  get position(): NotificationPosition {\n    return (\n      (this.getAttribute('position') as NotificationPosition) || 'top-right'\n    );\n  }\n\n  set position(value: NotificationPosition) {\n    this.setAttribute('position', value);\n  }\n\n  get maxNotifications(): number {\n    return parseInt(this.getAttribute('max-notifications') || '5', 10);\n  }\n\n  set maxNotifications(value: number) {\n    this.setAttribute('max-notifications', value.toString());\n  }\n\n  get stackDirection(): StackDirection {\n    return (this.getAttribute('stack-direction') as StackDirection) || 'down';\n  }\n\n  set stackDirection(value: StackDirection) {\n    this.setAttribute('stack-direction', value);\n  }\n\n  get spacing(): 'small' | 'medium' | 'large' {\n    return (\n      (this.getAttribute('spacing') as 'small' | 'medium' | 'large') || 'medium'\n    );\n  }\n\n  set spacing(value: 'small' | 'medium' | 'large') {\n    this.setAttribute('spacing', value);\n  }\n\n  /**\n   * Add a notification to this container\n   */\n  public addNotification(notification: HTMLElement): void {\n    this.appendChild(notification);\n  }\n\n  /**\n   * Remove a notification from this container\n   */\n  public removeNotification(notification: HTMLElement): void {\n    if (this.contains(notification)) {\n      this.removeChild(notification);\n    }\n  }\n\n  /**\n   * Clear all notifications from this container\n   */\n  public clear(): void {\n    const notifications = this.querySelectorAll('e2-notification');\n    notifications.forEach(notification => {\n      const notificationElement = notification as any;\n      if (typeof notificationElement.dismiss === 'function') {\n        notificationElement.dismiss();\n      } else {\n        notification.remove();\n      }\n    });\n  }\n\n  /**\n   * Get count of visible notifications\n   */\n  public getNotificationCount(): number {\n    return this.querySelectorAll('e2-notification').length;\n  }\n\n  public applyTheme(theme: Theme): void {\n    this._theme = theme;\n    applyTheme(this, theme);\n    this.updateNotificationPositions();\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-notification-container')) {\n  customElements.define(\n    'e2-notification-container',\n    NotificationContainerElement\n  );\n}\n","/**\n * Collapsible Panel Element\n * A panel that can be collapsed to a thin bar with an expand button\n * or expanded to show its full content\n */\n\nimport {\n  CollapsiblePanelResizeEndEvent,\n  CollapsiblePanelResizeEvent,\n  CollapsiblePanelResizeStartEvent,\n  EditorElementProperties,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport type PanelOrientation = 'horizontal' | 'vertical';\n\nexport class CollapsiblePanel\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _collapsed: boolean = false;\n  private _orientation: PanelOrientation = 'vertical';\n  private _themeCleanup?: () => void;\n\n  // Resize properties\n  private _resizeLeft: boolean = false;\n  private _resizeRight: boolean = false;\n  private _resizeTop: boolean = false;\n  private _resizeBottom: boolean = false;\n  private _minWidth: number = 100;\n  private _maxWidth: number = 800;\n  private _minHeight: number = 100;\n  private _maxHeight: number = 600;\n\n  // Resize state\n  private _resizing: boolean = false;\n  private _resizeEdge: 'left' | 'right' | 'top' | 'bottom' | null = null;\n  private _startPosition: { x: number; y: number } = { x: 0, y: 0 };\n  private _startSize: { width: number; height: number } = {\n    width: 0,\n    height: 0,\n  };\n  private _storedSize: { width: number; height: number } | null = null;\n\n  static get observedAttributes(): string[] {\n    return [\n      'theme',\n      'disabled',\n      'collapsed',\n      'orientation',\n      'resize-left',\n      'resize-right',\n      'resize-top',\n      'resize-bottom',\n      'min-width',\n      'max-width',\n      'min-height',\n      'max-height',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          position: relative;\n          background: var(--panel-bg, #ffffff);\n          border: 1px solid var(--panel-border, #ccc);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n        }\n\n        :host(.theme-dark) {\n          background: var(--panel-bg-dark, #2d2d2d);\n          border-color: var(--panel-border-dark, #555);\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        /* Vertical orientation (default) */\n        :host([orientation=\"vertical\"]) {\n          min-height: 200px;\n        }\n\n        :host([orientation=\"vertical\"][collapsed]) {\n          min-height: 32px;\n          height: 32px !important;\n          overflow: hidden;\n        }\n\n        /* Horizontal orientation */\n        :host([orientation=\"horizontal\"]) {\n          min-width: 200px;\n          display: inline-block;\n          vertical-align: top;\n        }\n\n        :host([orientation=\"horizontal\"][collapsed]) {\n          min-width: 32px;\n          width: 32px !important;\n          overflow: hidden;\n        }\n\n        .panel-header {\n          display: flex;\n          align-items: center;\n          padding: 8px;\n          background: var(--panel-header-bg, #f8f8f8);\n          border-bottom: 1px solid var(--panel-border, #ccc);\n          min-height: 16px;\n          cursor: pointer;\n          user-select: none;\n        }\n\n        :host(.theme-dark) .panel-header {\n          background: var(--panel-header-bg-dark, #3a3a3a);\n          border-bottom-color: var(--panel-border-dark, #555);\n        }\n\n        .panel-header:hover {\n          background: var(--panel-header-hover-bg, #e8e8e8);\n        }\n\n        :host(.theme-dark) .panel-header:hover {\n          background: var(--panel-header-hover-bg-dark, #404040);\n        }\n\n        .toggle-button {\n          width: 16px;\n          height: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 12px;\n          margin-right: 8px;\n          flex-shrink: 0;\n        }\n\n        .burger-icon::before {\n          content: var(--panel-collapsed-icon, \"☰\");\n        }\n\n        .close-icon::before {\n          content: var(--panel-expanded-icon, \"✕\");\n        }\n\n        /* Vertical orientation icons */\n        :host([orientation=\"vertical\"]) .toggle-button .burger-icon {\n          display: none;\n        }\n\n        :host([orientation=\"vertical\"]) .toggle-button .close-icon {\n          display: block;\n        }\n\n        :host([orientation=\"vertical\"][collapsed]) .toggle-button .burger-icon {\n          display: block;\n        }\n\n        :host([orientation=\"vertical\"][collapsed]) .toggle-button .close-icon {\n          display: none;\n        }\n\n        /* Horizontal orientation icons */\n        :host([orientation=\"horizontal\"]) .toggle-button .burger-icon {\n          display: none;\n        }\n\n        :host([orientation=\"horizontal\"]) .toggle-button .close-icon {\n          display: block;\n        }\n\n        :host([orientation=\"horizontal\"][collapsed]) .toggle-button .burger-icon {\n          display: block;\n        }\n\n        :host([orientation=\"horizontal\"][collapsed]) .toggle-button .close-icon {\n          display: none;\n        }\n\n        /* Rotate icons for horizontal orientation */\n        :host([orientation=\"horizontal\"]) .toggle-button {\n          transform: rotate(90deg);\n        }\n\n        .panel-title {\n          flex-grow: 1;\n          font-weight: 500;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n        /* Hide title when collapsed */\n        :host([collapsed]) .panel-title {\n          display: none;\n        }\n\n        .panel-content {\n          padding: var(--panel-padding, 12px);\n          overflow: auto;\n          box-sizing: border-box;\n          height: calc(100% - 32px); /* Account for header height */\n        }\n\n        :host([collapsed]) .panel-content {\n          display: none;\n        }\n\n        /* Content slot styling */\n        ::slotted(*) {\n          display: block;\n        }\n\n        /* Resize handles */\n        :host([resize-left]:not([collapsed])) {\n          border-left-width: 4px;\n          border-left-color: var(--resize-handle-color, #999);\n        }\n\n        :host([resize-right]:not([collapsed])) {\n          border-right-width: 4px;\n          border-right-color: var(--resize-handle-color, #999);\n        }\n\n        :host([resize-top]:not([collapsed])) {\n          border-top-width: 4px;\n          border-top-color: var(--resize-handle-color, #999);\n        }\n\n        :host([resize-bottom]:not([collapsed])) {\n          border-bottom-width: 4px;\n          border-bottom-color: var(--resize-handle-color, #999);\n        }\n\n        /* Dark theme resize handles */\n        :host(.theme-dark[resize-left]:not([collapsed])) {\n          border-left-color: var(--resize-handle-color-dark, #666);\n        }\n\n        :host(.theme-dark[resize-right]:not([collapsed])) {\n          border-right-color: var(--resize-handle-color-dark, #666);\n        }\n\n        :host(.theme-dark[resize-top]:not([collapsed])) {\n          border-top-color: var(--resize-handle-color-dark, #666);\n        }\n\n        :host(.theme-dark[resize-bottom]:not([collapsed])) {\n          border-bottom-color: var(--resize-handle-color-dark, #666);\n        }\n\n        /* Resize cursors - will be handled by JavaScript for edge detection */\n\n        /* Disable resize cursors when dragging */\n        :host(.resizing) {\n          user-select: none;\n        }\n\n        :host(.resizing) * {\n          user-select: none;\n          pointer-events: none;\n        }\n      </style>\n\n      <div class=\"panel-header\">\n        <div class=\"toggle-button\">\n          <span class=\"burger-icon\"></span>\n          <span class=\"close-icon\"></span>\n        </div>\n        <div class=\"panel-title\">\n          <slot name=\"title\">Panel</slot>\n        </div>\n      </div>\n\n      <div class=\"panel-content\">\n        <slot></slot>\n      </div>\n    `;\n\n    // Add click handler for the header\n    const header = shadowRoot.querySelector('.panel-header') as HTMLElement;\n    header.addEventListener('click', this.handleToggle.bind(this));\n\n    // Add resize event handlers\n    this.addEventListener('mousedown', this.handleMouseDown.bind(this));\n    this.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    this.addEventListener('mouseup', this.handleMouseUp.bind(this));\n    this.addEventListener('mouseleave', this.handleMouseLeave.bind(this));\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('collapsible-panel');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'collapsed':\n        const wasCollapsed = this._collapsed;\n        this._collapsed = newValue !== null;\n        this.handleCollapsedChange(wasCollapsed);\n        break;\n      case 'orientation':\n        this._orientation = (newValue as PanelOrientation) || 'vertical';\n        break;\n      case 'resize-left':\n        this._resizeLeft = newValue !== null;\n        break;\n      case 'resize-right':\n        this._resizeRight = newValue !== null;\n        break;\n      case 'resize-top':\n        this._resizeTop = newValue !== null;\n        break;\n      case 'resize-bottom':\n        this._resizeBottom = newValue !== null;\n        break;\n      case 'min-width':\n        this._minWidth = parseFloat(newValue) || 100;\n        break;\n      case 'max-width':\n        this._maxWidth = parseFloat(newValue) || 800;\n        break;\n      case 'min-height':\n        this._minHeight = parseFloat(newValue) || 100;\n        break;\n      case 'max-height':\n        this._maxHeight = parseFloat(newValue) || 600;\n        break;\n    }\n  }\n\n  private handleToggle(): void {\n    this.collapsed = !this.collapsed;\n\n    // Dispatch toggle event\n    dispatchCustomEvent(this, 'collapsible-panel-toggle', {\n      panelId: this.id,\n      panel: this,\n      collapsed: this.collapsed,\n      orientation: this.orientation,\n    });\n  }\n\n  private handleCollapsedChange(wasCollapsed: boolean): void {\n    if (this._collapsed && !wasCollapsed) {\n      // Panel is being collapsed - store current size\n      this._storedSize = {\n        width: this.offsetWidth,\n        height: this.offsetHeight,\n      };\n    } else if (!this._collapsed && wasCollapsed && this._storedSize) {\n      // Panel is being expanded - restore stored size\n      requestAnimationFrame(() => {\n        if (this._storedSize) {\n          this.style.width = `${this._storedSize.width}px`;\n          this.style.height = `${this._storedSize.height}px`;\n        }\n      });\n    }\n  }\n\n  private handleMouseDown(event: MouseEvent): void {\n    if (this._collapsed) return;\n\n    const resizeEdge = this.getResizeEdge(event);\n    if (!resizeEdge) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    this._resizing = true;\n    this._resizeEdge = resizeEdge;\n    this._startPosition = { x: event.clientX, y: event.clientY };\n    this._startSize = {\n      width: this.offsetWidth,\n      height: this.offsetHeight,\n    };\n\n    this.classList.add('resizing');\n    document.body.style.cursor = this.getCursorForEdge(resizeEdge);\n\n    // Add global mouse events\n    document.addEventListener(\n      'mousemove',\n      this.handleDocumentMouseMove.bind(this)\n    );\n    document.addEventListener('mouseup', this.handleDocumentMouseUp.bind(this));\n\n    // Dispatch resize start event\n    dispatchCustomEvent<CollapsiblePanelResizeStartEvent['detail']>(\n      this,\n      'collapsible-panel-resize-start',\n      {\n        panelId: this.id,\n        panel: this,\n        startWidth: this._startSize.width,\n        startHeight: this._startSize.height,\n        edge: resizeEdge,\n      }\n    );\n  }\n\n  private handleMouseMove(event: MouseEvent): void {\n    if (this._resizing || this._collapsed) return;\n\n    const resizeEdge = this.getResizeEdge(event);\n    if (resizeEdge) {\n      this.style.cursor = this.getCursorForEdge(resizeEdge);\n    } else {\n      this.style.cursor = '';\n    }\n  }\n\n  private handleMouseUp(event: MouseEvent): void {\n    if (!this._resizing) return;\n    this.endResize(event);\n  }\n\n  private handleMouseLeave(event: MouseEvent): void {\n    if (!this._resizing) {\n      this.style.cursor = '';\n    }\n  }\n\n  private handleDocumentMouseMove(event: MouseEvent): void {\n    if (!this._resizing || !this._resizeEdge) return;\n\n    event.preventDefault();\n\n    const deltaX = event.clientX - this._startPosition.x;\n    const deltaY = event.clientY - this._startPosition.y;\n\n    let newWidth = this._startSize.width;\n    let newHeight = this._startSize.height;\n\n    switch (this._resizeEdge) {\n      case 'left':\n        newWidth = Math.max(\n          this._minWidth,\n          Math.min(this._maxWidth, this._startSize.width - deltaX)\n        );\n        break;\n      case 'right':\n        newWidth = Math.max(\n          this._minWidth,\n          Math.min(this._maxWidth, this._startSize.width + deltaX)\n        );\n        break;\n      case 'top':\n        newHeight = Math.max(\n          this._minHeight,\n          Math.min(this._maxHeight, this._startSize.height - deltaY)\n        );\n        break;\n      case 'bottom':\n        newHeight = Math.max(\n          this._minHeight,\n          Math.min(this._maxHeight, this._startSize.height + deltaY)\n        );\n        break;\n    }\n\n    // Apply size constraints based on orientation\n    if (this._orientation === 'horizontal') {\n      // Horizontal panels expand/collapse horizontally, so they can only be resized horizontally (width changes)\n      if (this._resizeEdge === 'left' || this._resizeEdge === 'right') {\n        this.style.width = `${newWidth}px`;\n      }\n    } else {\n      // Vertical panels expand/collapse vertically, so they can only be resized vertically (height changes)\n      if (this._resizeEdge === 'top' || this._resizeEdge === 'bottom') {\n        this.style.height = `${newHeight}px`;\n      }\n    }\n\n    // Dispatch resize event\n    dispatchCustomEvent<CollapsiblePanelResizeEvent['detail']>(\n      this,\n      'collapsible-panel-resize',\n      {\n        panelId: this.id,\n        panel: this,\n        width: newWidth,\n        height: newHeight,\n        edge: this._resizeEdge,\n      }\n    );\n  }\n\n  private handleDocumentMouseUp(event: MouseEvent): void {\n    if (!this._resizing) return;\n    this.endResize(event);\n  }\n\n  private endResize(event: MouseEvent): void {\n    if (!this._resizing || !this._resizeEdge) return;\n\n    const finalWidth = this.offsetWidth;\n    const finalHeight = this.offsetHeight;\n    const edge = this._resizeEdge;\n\n    this._resizing = false;\n    this._resizeEdge = null;\n    this.classList.remove('resizing');\n    document.body.style.cursor = '';\n\n    // Remove global mouse events\n    document.removeEventListener(\n      'mousemove',\n      this.handleDocumentMouseMove.bind(this)\n    );\n    document.removeEventListener(\n      'mouseup',\n      this.handleDocumentMouseUp.bind(this)\n    );\n\n    // Update stored size\n    this._storedSize = { width: finalWidth, height: finalHeight };\n\n    // Dispatch resize end event\n    dispatchCustomEvent<CollapsiblePanelResizeEndEvent['detail']>(\n      this,\n      'collapsible-panel-resize-end',\n      {\n        panelId: this.id,\n        panel: this,\n        finalWidth,\n        finalHeight,\n        edge,\n      }\n    );\n  }\n\n  private getResizeEdge(\n    event: MouseEvent\n  ): 'left' | 'right' | 'top' | 'bottom' | null {\n    const rect = this.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const edgeSize = 4; // Size of resize handle\n\n    // Check each edge if it's enabled and allowed for the orientation\n    if (this._orientation === 'vertical') {\n      // Vertical panels expand/collapse vertically, so they can only be resized vertically (top/bottom edges)\n      if (this._resizeTop && y <= edgeSize) {\n        return 'top';\n      }\n      if (this._resizeBottom && y >= rect.height - edgeSize) {\n        return 'bottom';\n      }\n    } else {\n      // Horizontal panels expand/collapse horizontally, so they can only be resized horizontally (left/right edges)\n      if (this._resizeLeft && x <= edgeSize) {\n        return 'left';\n      }\n      if (this._resizeRight && x >= rect.width - edgeSize) {\n        return 'right';\n      }\n    }\n\n    return null;\n  }\n\n  private getCursorForEdge(edge: 'left' | 'right' | 'top' | 'bottom'): string {\n    switch (edge) {\n      case 'left':\n      case 'right':\n        return 'ew-resize';\n      case 'top':\n      case 'bottom':\n        return 'ns-resize';\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  get collapsed(): boolean {\n    return this._collapsed;\n  }\n\n  set collapsed(value: boolean) {\n    this._collapsed = value;\n    if (value) {\n      this.setAttribute('collapsed', '');\n    } else {\n      this.removeAttribute('collapsed');\n    }\n  }\n\n  get orientation(): PanelOrientation {\n    return this._orientation;\n  }\n\n  set orientation(value: PanelOrientation) {\n    this._orientation = value;\n    this.setAttribute('orientation', value);\n  }\n\n  toggle(): void {\n    this.collapsed = !this.collapsed;\n  }\n\n  expand(): void {\n    this.collapsed = false;\n  }\n\n  collapse(): void {\n    this.collapsed = true;\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  // Resize API\n  get resizeLeft(): boolean {\n    return this._resizeLeft;\n  }\n\n  set resizeLeft(value: boolean) {\n    this._resizeLeft = value;\n    this.toggleAttribute('resize-left', value);\n  }\n\n  get resizeRight(): boolean {\n    return this._resizeRight;\n  }\n\n  set resizeRight(value: boolean) {\n    this._resizeRight = value;\n    this.toggleAttribute('resize-right', value);\n  }\n\n  get resizeTop(): boolean {\n    return this._resizeTop;\n  }\n\n  set resizeTop(value: boolean) {\n    this._resizeTop = value;\n    this.toggleAttribute('resize-top', value);\n  }\n\n  get resizeBottom(): boolean {\n    return this._resizeBottom;\n  }\n\n  set resizeBottom(value: boolean) {\n    this._resizeBottom = value;\n    this.toggleAttribute('resize-bottom', value);\n  }\n\n  get minWidth(): number {\n    return this._minWidth;\n  }\n\n  set minWidth(value: number) {\n    this._minWidth = value;\n    this.setAttribute('min-width', value.toString());\n  }\n\n  get maxWidth(): number {\n    return this._maxWidth;\n  }\n\n  set maxWidth(value: number) {\n    this._maxWidth = value;\n    this.setAttribute('max-width', value.toString());\n  }\n\n  get minHeight(): number {\n    return this._minHeight;\n  }\n\n  set minHeight(value: number) {\n    this._minHeight = value;\n    this.setAttribute('min-height', value.toString());\n  }\n\n  get maxHeight(): number {\n    return this._maxHeight;\n  }\n\n  set maxHeight(value: number) {\n    this._maxHeight = value;\n    this.setAttribute('max-height', value.toString());\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-collapsible-panel')) {\n  customElements.define('e2-collapsible-panel', CollapsiblePanel);\n}\n","/**\n * Split Panel Element\n * A single panel within a split panel container that can be resized\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  generateId,\n  getShadowRoot,\n  notifyThemeChange,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class SplitPanel extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _size: number = 50; // percentage\n  private _minSize: number = 10; // percentage\n  private _maxSize: number = 90; // percentage\n  private _resizable: boolean = true;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'size', 'min-size', 'max-size', 'resizable'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          position: relative;\n          background: var(--panel-bg, #ffffff);\n          border: 1px solid var(--panel-border, #e0e0e0);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          overflow: hidden;\n          box-sizing: border-box;\n        }\n\n        :host(.theme-dark) {\n          background: var(--panel-bg-dark, #2d2d2d);\n          border-color: var(--panel-border-dark, #555);\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .panel-content {\n          width: 100%;\n          height: 100%;\n          overflow: auto;\n          box-sizing: border-box;\n          padding: var(--panel-padding, 8px);\n        }\n\n        /* Content slot styling */\n        ::slotted(*) {\n          display: block;\n        }\n      </style>\n\n      <div class=\"panel-content\">\n        <slot></slot>\n      </div>\n    `;\n\n    // Set up event listeners\n    this.addEventListener('resize', this.handleResize.bind(this));\n  }\n\n  connectedCallback(): void {\n    // Generate ID if not provided\n    if (!this.id) {\n      this.id = generateId('split-panel');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // Clean up existing theme inheritance when explicit theme is set\n        if (this._themeCleanup) {\n          this._themeCleanup();\n          this._themeCleanup = undefined;\n        }\n        this._theme = (newValue as Theme) || 'auto';\n        this.applyTheme(this._theme);\n        break;\n      case 'size':\n        this._size = parseFloat(newValue || '50');\n        this.updateSize();\n        break;\n      case 'min-size':\n        this._minSize = parseFloat(newValue || '10');\n        break;\n      case 'max-size':\n        this._maxSize = parseFloat(newValue || '90');\n        break;\n      case 'resizable':\n        this._resizable = newValue !== 'false';\n        break;\n      case 'disabled':\n        this.toggleAttribute('disabled', newValue !== null);\n        break;\n    }\n  }\n\n  private handleResize(): void {\n    // Handle resize events from the container\n    this.updateSize();\n  }\n\n  private updateSize(): void {\n    // The container will handle the actual sizing via CSS\n    // This method can be used for cleanup or notifications\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n    // Notify child elements of theme change\n    notifyThemeChange(this, value);\n  }\n\n  get size(): number {\n    return this._size;\n  }\n\n  set size(value: number) {\n    this.setAttribute('size', value.toString());\n  }\n\n  get minSize(): number {\n    return this._minSize;\n  }\n\n  set minSize(value: number) {\n    this.setAttribute('min-size', value.toString());\n  }\n\n  get maxSize(): number {\n    return this._maxSize;\n  }\n\n  set maxSize(value: number) {\n    this.setAttribute('max-size', value.toString());\n  }\n\n  get resizable(): boolean {\n    return this._resizable;\n  }\n\n  set resizable(value: boolean) {\n    this.setAttribute('resizable', value.toString());\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    this.toggleAttribute('disabled', value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  // Utility method to get the current computed size\n  getCurrentSize(): number {\n    const container = this.parentElement;\n    if (!container) return this._size;\n\n    const isVertical = container.getAttribute('orientation') === 'vertical';\n\n    if (isVertical) {\n      const containerHeight = container.clientHeight;\n      const thisHeight = this.clientHeight;\n      return (thisHeight / containerHeight) * 100;\n    } else {\n      const containerWidth = container.clientWidth;\n      const thisWidth = this.clientWidth;\n      return (thisWidth / containerWidth) * 100;\n    }\n  }\n}\n\n// Register the element\nif (!customElements.get('e2-split-panel')) {\n  customElements.define('e2-split-panel', SplitPanel);\n}\n\nexport default SplitPanel;\n","/**\n * Split Panel Container Element\n * A container that manages multiple resizable split panels with drag handles\n */\n\nimport {\n  EditorElementProperties,\n  SplitPanelOrientation,\n  SplitPanelResizeEndEvent,\n  SplitPanelResizeEvent,\n  SplitPanelResizeStartEvent,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  debounce,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  notifyThemeChange,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class SplitPanelContainer\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _orientation: SplitPanelOrientation = 'horizontal';\n  private _resizing: boolean = false;\n  private _activePanel: HTMLElement | null = null;\n  private _startPosition: number = 0;\n  private _startSize: number = 0;\n  private _nextPanelStartSize: number = 0;\n  private _updatingPanelSizes: boolean = false;\n  private _themeCleanup?: () => void;\n\n  private debouncedResize = debounce(this.handleResize.bind(this), 16);\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'orientation'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n    this.bindEvents();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: flex;\n          position: relative;\n          width: 100%;\n          height: 100%;\n          min-height: 200px;\n          background: var(--container-bg, #f5f5f5);\n          font-family: var(--font-family, system-ui, sans-serif);\n          overflow: hidden;\n          box-sizing: border-box;\n        }\n\n        :host(.theme-dark) {\n          background: var(--container-bg-dark, #1e1e1e);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        /* Horizontal layout (side by side) */\n        :host([orientation=\"horizontal\"]) {\n          flex-direction: row;\n        }\n\n        /* Vertical layout (stacked) */\n        :host([orientation=\"vertical\"]) {\n          flex-direction: column;\n        }\n\n        /* Panel styling */\n        ::slotted(e2-split-panel) {\n          flex-shrink: 0;\n          overflow: hidden;\n          position: relative;\n        }\n\n        /* Add spacing for handles and visual separators */\n        ::slotted(e2-split-panel:not(:last-child)) {\n          border-right: var(--handle-size, 4px) solid var(--handle-bg, #ccc);\n        }\n\n        :host([orientation=\"vertical\"]) ::slotted(e2-split-panel:not(:last-child)) {\n          border-right: none;\n          border-bottom: var(--handle-size, 4px) solid var(--handle-bg, #ccc);\n        }\n\n        :host(.theme-dark) ::slotted(e2-split-panel:not(:last-child)) {\n          border-right-color: var(--handle-bg-dark, #555);\n        }\n\n        :host([orientation=\"vertical\"].theme-dark) ::slotted(e2-split-panel:not(:last-child)) {\n          border-bottom-color: var(--handle-bg-dark, #555);\n        }\n\n        /* No user selection during drag */\n        :host(.dragging) {\n          user-select: none;\n        }\n\n        :host(.dragging) ::slotted(*) {\n          user-select: none;\n          pointer-events: none;\n        }\n      </style>\n\n      <slot></slot>\n    `;\n  }\n\n  private bindEvents(): void {\n    // Handle mouse events for resizing\n    this.addEventListener('mousedown', this.handleMouseDown.bind(this));\n    this.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    this.addEventListener('mouseup', this.handleMouseUp.bind(this));\n    this.addEventListener('mouseleave', this.handleMouseLeave.bind(this));\n\n    // Handle window resize\n    window.addEventListener('resize', this.debouncedResize);\n\n    // Don't listen to slotchange to avoid infinite loops\n    // Instead, we'll rely on the initial setup and manual updates\n  }\n\n  connectedCallback(): void {\n    // Generate ID if not provided\n    if (!this.id) {\n      this.id = generateId('split-panel-container');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Initial setup\n    setTimeout(() => {\n      this.updateHandles();\n      this.updatePanelSizes();\n    }, 0);\n  }\n\n  disconnectedCallback(): void {\n    window.removeEventListener('resize', this.debouncedResize);\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // Clean up existing theme inheritance when explicit theme is set\n        if (this._themeCleanup) {\n          this._themeCleanup();\n          this._themeCleanup = undefined;\n        }\n        this._theme = (newValue as Theme) || 'auto';\n        this.applyTheme(this._theme);\n        break;\n      case 'orientation':\n        this._orientation = (newValue as SplitPanelOrientation) || 'horizontal';\n        this.updateHandles();\n        this.updatePanelSizes();\n        break;\n      case 'disabled':\n        this.toggleAttribute('disabled', newValue !== null);\n        break;\n    }\n  }\n\n  private updateHandles(): void {\n    // Do nothing - we're using CSS borders as visual handles\n    // and mouse event delegation for interaction\n  }\n\n  private updatePanelSizes(): void {\n    // Prevent infinite recursion\n    if (this._updatingPanelSizes) return;\n    this._updatingPanelSizes = true;\n\n    try {\n      const panels = this.getPanels();\n      if (panels.length === 0) return;\n\n      // Calculate total available space\n      const containerRect = this.getBoundingClientRect();\n      const handleSize = parseInt(\n        getComputedStyle(this).getPropertyValue('--handle-size') || '4'\n      );\n      const totalHandles = panels.length - 1;\n      const totalHandleSpace = totalHandles * handleSize;\n\n      const availableSpace =\n        this._orientation === 'horizontal'\n          ? containerRect.width - totalHandleSpace\n          : containerRect.height - totalHandleSpace;\n\n      // Calculate default sizes if not set\n      let totalSetSize = 0;\n      let unsetPanels = 0;\n\n      panels.forEach(panel => {\n        const size = parseFloat(panel.getAttribute('size') || '0');\n        if (size > 0) {\n          totalSetSize += size;\n        } else {\n          unsetPanels++;\n        }\n      });\n\n      const remainingPercentage = Math.max(0, 100 - totalSetSize);\n      const defaultSize =\n        unsetPanels > 0 ? remainingPercentage / unsetPanels : 0;\n\n      // Apply sizes\n      panels.forEach(panel => {\n        let size = parseFloat(panel.getAttribute('size') || '0');\n        if (size <= 0) {\n          size = defaultSize;\n          // Only set attribute if it's actually different to avoid recursive calls\n          const currentSize = panel.getAttribute('size');\n          if (currentSize !== size.toString()) {\n            panel.setAttribute('size', size.toString());\n          }\n        }\n\n        const actualSize = (size / 100) * availableSpace;\n\n        if (this._orientation === 'horizontal') {\n          panel.style.width = `${actualSize}px`;\n          panel.style.height = '100%';\n          panel.style.flexBasis = `${actualSize}px`;\n        } else {\n          panel.style.height = `${actualSize}px`;\n          panel.style.width = '100%';\n          panel.style.flexBasis = `${actualSize}px`;\n        }\n      });\n    } finally {\n      this._updatingPanelSizes = false;\n    }\n  }\n\n  private handleMouseDown(event: MouseEvent): void {\n    const panels = this.getPanels();\n    if (panels.length < 2) return;\n\n    // Find which panel border we're on\n    let panelIndex = -1;\n    let currentPanel: HTMLElement | null = null;\n    let nextPanel: HTMLElement | null = null;\n\n    const handleSize = parseInt(\n      getComputedStyle(this).getPropertyValue('--handle-size') || '4'\n    );\n\n    for (let i = 0; i < panels.length - 1; i++) {\n      const panel = panels[i];\n      const rect = panel.getBoundingClientRect();\n      const containerRect = this.getBoundingClientRect();\n\n      const relativeX = event.clientX - containerRect.left;\n      const relativeY = event.clientY - containerRect.top;\n\n      let onBorder = false;\n\n      if (this._orientation === 'horizontal') {\n        // Check if we're on the right border of this panel (border is part of the panel)\n        const borderStart = rect.right - containerRect.left - handleSize;\n        const borderEnd = rect.right - containerRect.left;\n        onBorder = relativeX >= borderStart && relativeX <= borderEnd;\n      } else {\n        // Check if we're on the bottom border of this panel (border is part of the panel)\n        const borderStart = rect.bottom - containerRect.top - handleSize;\n        const borderEnd = rect.bottom - containerRect.top;\n        onBorder = relativeY >= borderStart && relativeY <= borderEnd;\n      }\n\n      if (onBorder) {\n        panelIndex = i;\n        currentPanel = panels[i];\n        nextPanel = panels[i + 1];\n        break;\n      }\n    }\n\n    if (panelIndex === -1 || !currentPanel || !nextPanel) return;\n\n    event.preventDefault();\n\n    this._resizing = true;\n    this._activePanel = currentPanel;\n    this._startPosition =\n      this._orientation === 'horizontal' ? event.clientX : event.clientY;\n    this._startSize = parseFloat(currentPanel.getAttribute('size') || '50');\n    this._nextPanelStartSize = parseFloat(\n      nextPanel.getAttribute('size') || '50'\n    );\n\n    this.classList.add('dragging');\n\n    // Update cursor\n    this.style.cursor =\n      this._orientation === 'horizontal' ? 'col-resize' : 'row-resize';\n\n    // Dispatch resize start event\n    dispatchCustomEvent<SplitPanelResizeStartEvent['detail']>(\n      this,\n      'split-panel-resize-start',\n      {\n        containerId: this.id,\n        container: this,\n        panelId: currentPanel.id,\n        panel: currentPanel,\n        startSize: this._startSize,\n      }\n    );\n  }\n\n  private handleMouseMove(event: MouseEvent): void {\n    // Handle dragging if currently resizing\n    if (this._resizing && this._activePanel) {\n      event.preventDefault();\n\n      const currentPosition =\n        this._orientation === 'horizontal' ? event.clientX : event.clientY;\n      const delta = currentPosition - this._startPosition;\n\n      const containerRect = this.getBoundingClientRect();\n      const containerSize =\n        this._orientation === 'horizontal'\n          ? containerRect.width\n          : containerRect.height;\n\n      const deltaPercentage = (delta / containerSize) * 100;\n\n      const panels = this.getPanels();\n      const currentIndex = panels.indexOf(this._activePanel);\n      const nextPanel = panels[currentIndex + 1];\n\n      if (!nextPanel) return;\n\n      const newCurrentSize = Math.max(\n        parseFloat(this._activePanel.getAttribute('min-size') || '10'),\n        Math.min(\n          parseFloat(this._activePanel.getAttribute('max-size') || '90'),\n          this._startSize + deltaPercentage\n        )\n      );\n\n      const newNextSize = Math.max(\n        parseFloat(nextPanel.getAttribute('min-size') || '10'),\n        Math.min(\n          parseFloat(nextPanel.getAttribute('max-size') || '90'),\n          this._nextPanelStartSize - deltaPercentage\n        )\n      );\n\n      // Update panel sizes\n      this._activePanel.setAttribute('size', newCurrentSize.toString());\n      nextPanel.setAttribute('size', newNextSize.toString());\n\n      this.updatePanelSizes();\n\n      // Dispatch resize event\n      dispatchCustomEvent<SplitPanelResizeEvent['detail']>(\n        this,\n        'split-panel-resize',\n        {\n          containerId: this.id,\n          container: this,\n          panelId: this._activePanel.id,\n          panel: this._activePanel,\n          size: newCurrentSize,\n          minSize: parseFloat(\n            this._activePanel.getAttribute('min-size') || '10'\n          ),\n          maxSize: parseFloat(\n            this._activePanel.getAttribute('max-size') || '90'\n          ),\n        }\n      );\n    } else {\n      // Handle hover cursor when not dragging\n      this.updateHoverCursor(event);\n    }\n  }\n\n  private updateHoverCursor(event: MouseEvent): void {\n    const panels = this.getPanels();\n    if (panels.length < 2) {\n      this.style.cursor = '';\n      return;\n    }\n\n    const handleSize = parseInt(\n      getComputedStyle(this).getPropertyValue('--handle-size') || '4'\n    );\n\n    let overHandle = false;\n\n    for (let i = 0; i < panels.length - 1; i++) {\n      const panel = panels[i];\n      const rect = panel.getBoundingClientRect();\n      const containerRect = this.getBoundingClientRect();\n\n      const relativeX = event.clientX - containerRect.left;\n      const relativeY = event.clientY - containerRect.top;\n\n      if (this._orientation === 'horizontal') {\n        // Check if we're on the right border of this panel (border is part of the panel)\n        const borderStart = rect.right - containerRect.left - handleSize;\n        const borderEnd = rect.right - containerRect.left;\n        if (relativeX >= borderStart && relativeX <= borderEnd) {\n          overHandle = true;\n          break;\n        }\n      } else {\n        // Check if we're on the bottom border of this panel (border is part of the panel)\n        const borderStart = rect.bottom - containerRect.top - handleSize;\n        const borderEnd = rect.bottom - containerRect.top;\n        if (relativeY >= borderStart && relativeY <= borderEnd) {\n          overHandle = true;\n          break;\n        }\n      }\n    }\n\n    // Update cursor based on whether we're over a handle\n    if (overHandle) {\n      this.style.cursor =\n        this._orientation === 'horizontal' ? 'col-resize' : 'row-resize';\n    } else {\n      this.style.cursor = '';\n    }\n  }\n\n  private handleMouseUp(event: MouseEvent): void {\n    if (!this._resizing) return;\n\n    event.preventDefault();\n\n    const finalSize = this._activePanel\n      ? parseFloat(this._activePanel.getAttribute('size') || '50')\n      : 0;\n\n    // Dispatch resize end event\n    if (this._activePanel) {\n      dispatchCustomEvent<SplitPanelResizeEndEvent['detail']>(\n        this,\n        'split-panel-resize-end',\n        {\n          containerId: this.id,\n          container: this,\n          panelId: this._activePanel.id,\n          panel: this._activePanel,\n          finalSize,\n        }\n      );\n    }\n\n    this._resizing = false;\n    this._activePanel = null;\n    this.classList.remove('dragging');\n\n    // Update cursor based on current hover position\n    this.updateHoverCursor(event);\n  }\n\n  private handleMouseLeave(event: MouseEvent): void {\n    // End resizing if mouse leaves the container\n    if (this._resizing) {\n      this.handleMouseUp(event);\n    }\n\n    // Reset cursor when leaving the container\n    this.style.cursor = '';\n  }\n\n  private handleResize(): void {\n    this.updatePanelSizes();\n  }\n\n  private getPanels(): HTMLElement[] {\n    return Array.from(this.querySelectorAll('e2-split-panel'));\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n    // Notify child elements of theme change\n    notifyThemeChange(this, value);\n  }\n\n  get orientation(): SplitPanelOrientation {\n    return this._orientation;\n  }\n\n  set orientation(value: SplitPanelOrientation) {\n    this.setAttribute('orientation', value);\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    this.toggleAttribute('disabled', value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  // Method to programmatically resize a panel\n  resizePanel(panelId: string, size: number): void {\n    const panel = this.querySelector(`#${panelId}`) as HTMLElement;\n    if (panel && panel.tagName.toLowerCase() === 'e2-split-panel') {\n      panel.setAttribute('size', size.toString());\n      this.updatePanelSizes();\n    }\n  }\n\n  // Method to get panel sizes\n  getPanelSizes(): { [panelId: string]: number } {\n    const panels = this.getPanels();\n    const sizes: { [panelId: string]: number } = {};\n\n    panels.forEach(panel => {\n      if (panel.id) {\n        sizes[panel.id] = parseFloat(panel.getAttribute('size') || '0');\n      }\n    });\n\n    return sizes;\n  }\n\n  // Method to reset all panels to equal sizes\n  resetPanelSizes(): void {\n    const panels = this.getPanels();\n    const equalSize = 100 / panels.length;\n\n    panels.forEach(panel => {\n      panel.setAttribute('size', equalSize.toString());\n    });\n\n    this.updatePanelSizes();\n  }\n}\n\n// Register the element\nif (!customElements.get('e2-split-panel-container')) {\n  customElements.define('e2-split-panel-container', SplitPanelContainer);\n}\n\nexport default SplitPanelContainer;\n","/**\n * Status Bar Element\n * A horizontal status bar typically placed at the bottom of an application\n * Contains left, center, and right sections for different types of status information\n */\n\nimport {\n  EditorElementProperties,\n  StatusMessageEvent,\n  StatusMessageType,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class StatusBar extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _temporaryMessageTimeout?: number;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n          padding: 4px 8px;\n          background: var(--statusbar-bg, #f8f8f8);\n          border-top: 1px solid var(--statusbar-border, #e0e0e0);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size-small, 12px);\n          min-height: 24px;\n          position: relative;\n          overflow: hidden;\n        }\n\n        :host(.theme-dark) {\n          background: var(--statusbar-bg-dark, #252526);\n          border-top-color: var(--statusbar-border-dark, #3e3e42);\n          color: var(--text-color-dark, #cccccc);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .status-container {\n          display: flex;\n          align-items: center;\n          width: 100%;\n          gap: 8px;\n        }\n\n        .status-section {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .status-section.left {\n          flex: 0 0 auto;\n          justify-content: flex-start;\n        }\n\n        .status-section.center {\n          flex: 1 1 auto;\n          justify-content: center;\n        }\n\n        .status-section.right {\n          flex: 0 0 auto;\n          justify-content: flex-end;\n        }\n\n        .temporary-message {\n          position: absolute;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          display: flex;\n          align-items: center;\n          padding: 4px 8px;\n          background: var(--statusbar-message-bg, var(--statusbar-bg, #f8f8f8));\n          z-index: 10;\n          opacity: 0;\n          transform: translateY(100%);\n          transition: all 0.2s ease-in-out;\n        }\n\n        .temporary-message.show {\n          opacity: 1;\n          transform: translateY(0);\n        }\n\n        .temporary-message.info {\n          background: var(--statusbar-info-bg, #e3f2fd);\n          color: var(--statusbar-info-text, #1565c0);\n        }\n\n        .temporary-message.success {\n          background: var(--statusbar-success-bg, #e8f5e8);\n          color: var(--statusbar-success-text, #2e7d32);\n        }\n\n        .temporary-message.warning {\n          background: var(--statusbar-warning-bg, #fff3e0);\n          color: var(--statusbar-warning-text, #f57c00);\n        }\n\n        .temporary-message.error {\n          background: var(--statusbar-error-bg, #ffebee);\n          color: var(--statusbar-error-text, #c62828);\n        }\n\n        :host(.theme-dark) .temporary-message.info {\n          background: var(--statusbar-info-bg-dark, #1e3a8a);\n          color: var(--statusbar-info-text-dark, #93c5fd);\n        }\n\n        :host(.theme-dark) .temporary-message.success {\n          background: var(--statusbar-success-bg-dark, #166534);\n          color: var(--statusbar-success-text-dark, #86efac);\n        }\n\n        :host(.theme-dark) .temporary-message.warning {\n          background: var(--statusbar-warning-bg-dark, #92400e);\n          color: var(--statusbar-warning-text-dark, #fcd34d);\n        }\n\n        :host(.theme-dark) .temporary-message.error {\n          background: var(--statusbar-error-bg-dark, #991b1b);\n          color: var(--statusbar-error-text-dark, #fca5a5);\n        }\n      </style>\n\n      <div class=\"status-container\">\n        <div class=\"status-section left\">\n          <slot name=\"left\"></slot>\n        </div>\n        <div class=\"status-section center\">\n          <slot name=\"center\"></slot>\n        </div>\n        <div class=\"status-section right\">\n          <slot name=\"right\"></slot>\n        </div>\n      </div>\n\n      <div class=\"temporary-message\" id=\"temporary-message\">\n        <span id=\"message-text\"></span>\n      </div>\n    `;\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('status-bar');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    // Clear any temporary message timeout\n    if (this._temporaryMessageTimeout) {\n      window.clearTimeout(this._temporaryMessageTimeout);\n      this._temporaryMessageTimeout = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n    }\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  /**\n   * Show a temporary message in the status bar\n   * @param message The message to display\n   * @param type The type of message (info, success, warning, error)\n   * @param duration Duration in milliseconds (default: 3000)\n   */\n  showMessage(\n    message: string,\n    type: StatusMessageType = 'info',\n    duration: number = 3000\n  ): void {\n    const shadowRoot = this.shadowRoot!;\n    const messageEl = shadowRoot.getElementById('temporary-message')!;\n    const textEl = shadowRoot.getElementById('message-text')!;\n\n    // Clear any existing timeout\n    if (this._temporaryMessageTimeout) {\n      clearTimeout(this._temporaryMessageTimeout);\n    }\n\n    // Set message content and type\n    textEl.textContent = message;\n    messageEl.className = `temporary-message ${type}`;\n\n    // Show message with animation\n    requestAnimationFrame(() => {\n      messageEl.classList.add('show');\n    });\n\n    // Dispatch event\n    dispatchCustomEvent<StatusMessageEvent['detail']>(this, 'status-message', {\n      message,\n      type,\n      duration,\n      temporary: true,\n    });\n\n    // Auto-hide after duration\n    if (duration > 0) {\n      this._temporaryMessageTimeout = window.setTimeout(() => {\n        this.hideMessage();\n      }, duration);\n    }\n  }\n\n  /**\n   * Hide the temporary message\n   */\n  hideMessage(): void {\n    const shadowRoot = this.shadowRoot!;\n    const messageEl = shadowRoot.getElementById('temporary-message')!;\n\n    messageEl.classList.remove('show');\n\n    if (this._temporaryMessageTimeout) {\n      clearTimeout(this._temporaryMessageTimeout);\n      this._temporaryMessageTimeout = undefined;\n    }\n  }\n\n  /**\n   * Get all status items in a specific section\n   * @param section The section to query ('left', 'center', 'right')\n   */\n  getItemsInSection(section: 'left' | 'center' | 'right'): HTMLElement[] {\n    const slot = this.querySelector(`[slot=\"${section}\"]`);\n    if (!slot) return [];\n\n    return Array.from(slot.children) as HTMLElement[];\n  }\n\n  /**\n   * Clear all items from a specific section\n   * @param section The section to clear ('left', 'center', 'right')\n   */\n  clearSection(section: 'left' | 'center' | 'right'): void {\n    const items = this.getItemsInSection(section);\n    items.forEach(item => item.remove());\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-status-bar')) {\n  customElements.define('e2-status-bar', StatusBar);\n}\n","/**\n * Status Item Element\n * A flexible status bar item that can display text, progress indicators, tools, and other status information\n * Supports different types: text, progress, tool, message, indicator\n */\n\nimport {\n  EditorElementProperties,\n  StatusItemClickEvent,\n  StatusItemType,\n  StatusItemUpdateEvent,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class StatusItem extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _type: StatusItemType = 'text';\n  private _value: string | number = '';\n  private _label: string = '';\n  private _clickable: boolean = false;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'type', 'value', 'label', 'clickable', 'disabled'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: inline-flex;\n          align-items: center;\n          gap: 4px;\n          padding: 2px 6px;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size-small, 12px);\n          color: var(--text-color, #333);\n          white-space: nowrap;\n          border-radius: 2px;\n          transition: background-color 0.1s ease;\n        }\n\n        :host(.theme-dark) {\n          color: var(--text-color-dark, #cccccc);\n        }\n\n        :host([clickable]) {\n          cursor: pointer;\n          padding: 2px 8px;\n        }\n\n        :host([clickable]:hover) {\n          background: var(--status-item-hover-bg, rgba(0, 0, 0, 0.05));\n        }\n\n        :host(.theme-dark[clickable]:hover) {\n          background: var(--status-item-hover-bg-dark, rgba(255, 255, 255, 0.1));\n        }\n\n        :host([clickable]:active) {\n          background: var(--status-item-active-bg, rgba(0, 0, 0, 0.1));\n        }\n\n        :host(.theme-dark[clickable]:active) {\n          background: var(--status-item-active-bg-dark, rgba(255, 255, 255, 0.15));\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .content {\n          display: flex;\n          align-items: center;\n          gap: 4px;\n        }\n\n        .icon {\n          font-size: 10px;\n          width: 12px;\n          text-align: center;\n          flex-shrink: 0;\n        }\n\n        .label {\n          flex-shrink: 0;\n        }\n\n        .value {\n          font-weight: 500;\n          flex-shrink: 0;\n        }\n\n        .progress-container {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n\n        .progress-bar {\n          width: 60px;\n          height: 8px;\n          background: var(--progress-bg, #e0e0e0);\n          border-radius: 4px;\n          overflow: hidden;\n          position: relative;\n        }\n\n        :host(.theme-dark) .progress-bar {\n          background: var(--progress-bg-dark, #3e3e42);\n        }\n\n        .progress-fill {\n          height: 100%;\n          background: var(--progress-fill, #007acc);\n          border-radius: 4px;\n          transition: width 0.2s ease;\n          min-width: 2px;\n        }\n\n        :host(.theme-dark) .progress-fill {\n          background: var(--progress-fill-dark, #0e7afe);\n        }\n\n        .progress-text {\n          font-size: 10px;\n          min-width: 30px;\n          text-align: right;\n        }\n\n        /* Type-specific styles */\n        :host([type=\"tool\"]) {\n          background: var(--tool-item-bg, rgba(0, 120, 204, 0.1));\n          color: var(--tool-item-color, #007acc);\n          border: 1px solid var(--tool-item-border, rgba(0, 120, 204, 0.2));\n        }\n\n        :host(.theme-dark[type=\"tool\"]) {\n          background: var(--tool-item-bg-dark, rgba(14, 122, 254, 0.15));\n          color: var(--tool-item-color-dark, #0e7afe);\n          border-color: var(--tool-item-border-dark, rgba(14, 122, 254, 0.3));\n        }\n\n        :host([type=\"message\"]) {\n          font-style: italic;\n          opacity: 0.8;\n        }\n\n        :host([type=\"indicator\"]) .icon {\n          color: var(--indicator-color, #28a745);\n        }\n\n        :host(.theme-dark[type=\"indicator\"]) .icon {\n          color: var(--indicator-color-dark, #40d865);\n        }\n      </style>\n\n      <div class=\"content\">\n        <span class=\"icon\" id=\"icon\"></span>\n        <span class=\"label\" id=\"label\"></span>\n        <div class=\"progress-container\" id=\"progress-container\" style=\"display: none;\">\n          <div class=\"progress-bar\">\n            <div class=\"progress-fill\" id=\"progress-fill\"></div>\n          </div>\n          <span class=\"progress-text\" id=\"progress-text\"></span>\n        </div>\n        <span class=\"value\" id=\"value\"></span>\n      </div>\n    `;\n\n    // Add click handler\n    this.addEventListener('click', this.handleClick.bind(this));\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('status-item');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    this.updateDisplay();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'type':\n        this._type = newValue as StatusItemType;\n        this.updateDisplay();\n        break;\n      case 'value':\n        this._value = newValue;\n        this.updateDisplay();\n        break;\n      case 'label':\n        this._label = newValue;\n        this.updateDisplay();\n        break;\n      case 'clickable':\n        this._clickable = newValue !== null;\n        break;\n    }\n  }\n\n  private handleClick(event: Event): void {\n    if (!this._clickable || this.hasAttribute('disabled')) return;\n\n    dispatchCustomEvent<StatusItemClickEvent['detail']>(\n      this,\n      'status-item-click',\n      {\n        itemId: this.id,\n        item: this,\n        itemType: this._type,\n        value: this._value,\n      }\n    );\n  }\n\n  private updateDisplay(): void {\n    if (!this.shadowRoot) return;\n\n    const iconEl = this.shadowRoot.getElementById('icon')!;\n    const labelEl = this.shadowRoot.getElementById('label')!;\n    const valueEl = this.shadowRoot.getElementById('value')!;\n    const progressContainer =\n      this.shadowRoot.getElementById('progress-container')!;\n    const progressFill = this.shadowRoot.getElementById('progress-fill')!;\n    const progressText = this.shadowRoot.getElementById('progress-text')!;\n\n    // Set label\n    labelEl.textContent = this._label;\n    labelEl.style.display = this._label ? 'inline' : 'none';\n\n    // Handle different types\n    switch (this._type) {\n      case 'progress':\n        this.updateProgressDisplay(\n          progressContainer,\n          progressFill,\n          progressText\n        );\n        valueEl.style.display = 'none';\n        iconEl.style.display = 'none';\n        break;\n\n      case 'tool':\n        iconEl.textContent = '🔧';\n        iconEl.style.display = 'inline';\n        valueEl.textContent = String(this._value);\n        valueEl.style.display = this._value ? 'inline' : 'none';\n        progressContainer.style.display = 'none';\n        break;\n\n      case 'indicator':\n        iconEl.textContent = '●';\n        iconEl.style.display = 'inline';\n        valueEl.textContent = String(this._value);\n        valueEl.style.display = this._value ? 'inline' : 'none';\n        progressContainer.style.display = 'none';\n        break;\n\n      case 'message':\n        iconEl.textContent = 'ℹ';\n        iconEl.style.display = 'inline';\n        valueEl.textContent = String(this._value);\n        valueEl.style.display = this._value ? 'inline' : 'none';\n        progressContainer.style.display = 'none';\n        break;\n\n      case 'text':\n      default:\n        iconEl.style.display = 'none';\n        valueEl.textContent = String(this._value);\n        valueEl.style.display = this._value ? 'inline' : 'none';\n        progressContainer.style.display = 'none';\n        break;\n    }\n  }\n\n  private updateProgressDisplay(\n    container: HTMLElement,\n    fill: HTMLElement,\n    text: HTMLElement\n  ): void {\n    container.style.display = 'flex';\n\n    const numValue =\n      typeof this._value === 'number'\n        ? this._value\n        : parseFloat(String(this._value)) || 0;\n    const percentage = Math.max(0, Math.min(100, numValue * 100));\n\n    fill.style.width = `${percentage}%`;\n    text.textContent = `${Math.round(percentage)}%`;\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  get type(): StatusItemType {\n    return this._type;\n  }\n\n  set type(value: StatusItemType) {\n    this._type = value;\n    this.setAttribute('type', value);\n  }\n\n  get value(): string | number {\n    return this._value;\n  }\n\n  set value(newValue: string | number) {\n    const oldValue = this._value;\n    this._value = newValue;\n    this.setAttribute('value', String(newValue));\n\n    // Dispatch update event\n    dispatchCustomEvent<StatusItemUpdateEvent['detail']>(\n      this,\n      'status-item-update',\n      {\n        itemId: this.id,\n        item: this,\n        oldValue,\n        newValue,\n      }\n    );\n  }\n\n  get label(): string {\n    return this._label;\n  }\n\n  set label(value: string) {\n    this._label = value;\n    this.setAttribute('label', value);\n  }\n\n  get clickable(): boolean {\n    return this._clickable;\n  }\n\n  set clickable(value: boolean) {\n    this._clickable = value;\n    if (value) {\n      this.setAttribute('clickable', '');\n    } else {\n      this.removeAttribute('clickable');\n    }\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  /**\n   * Update the progress value (for progress type items)\n   * @param progress Progress value between 0 and 1\n   */\n  setProgress(progress: number): void {\n    if (this._type === 'progress') {\n      this.value = Math.max(0, Math.min(1, progress));\n    }\n  }\n\n  /**\n   * Set an icon for the status item\n   * @param icon Unicode emoji or symbol\n   */\n  setIcon(icon: string): void {\n    if (this.shadowRoot) {\n      const iconEl = this.shadowRoot.getElementById('icon')!;\n      iconEl.textContent = icon;\n      iconEl.style.display = 'inline';\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-status-item')) {\n  customElements.define('e2-status-item', StatusItem);\n}\n","/**\n * Status Section Element\n * A container for grouping status items within a status bar\n * Provides left, center, or right positioning and overflow handling\n */\n\nimport {\n  EditorElementProperties,\n  StatusSectionPosition,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class StatusSection\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _position: StatusSectionPosition = 'left';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'position', 'disabled'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size-small, 12px);\n          flex-shrink: 0;\n        }\n\n        :host([position=\"left\"]) {\n          justify-content: flex-start;\n        }\n\n        :host([position=\"center\"]) {\n          justify-content: center;\n          flex: 1 1 auto;\n        }\n\n        :host([position=\"right\"]) {\n          justify-content: flex-end;\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .section-container {\n          display: flex;\n          align-items: center;\n          gap: inherit;\n          min-width: 0; /* Allow shrinking */\n          overflow: hidden;\n        }\n\n        :host([position=\"center\"]) .section-container {\n          width: 100%;\n          justify-content: center;\n        }\n\n        ::slotted(*) {\n          flex-shrink: 0;\n          white-space: nowrap;\n        }\n\n        /* Responsive behavior - hide items on smaller screens */\n        @media (max-width: 768px) {\n          ::slotted([data-priority=\"low\"]) {\n            display: none;\n          }\n        }\n\n        @media (max-width: 480px) {\n          ::slotted([data-priority=\"medium\"]) {\n            display: none;\n          }\n        }\n      </style>\n\n      <div class=\"section-container\">\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('status-section');\n    }\n\n    // Set position attribute if not already set\n    if (!this.hasAttribute('position')) {\n      this.position = this._position;\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'position':\n        this._position = newValue as StatusSectionPosition;\n        break;\n    }\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  get position(): StatusSectionPosition {\n    return this._position;\n  }\n\n  set position(value: StatusSectionPosition) {\n    this._position = value;\n    this.setAttribute('position', value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  /**\n   * Add a status item to this section\n   * @param item The status item element to add\n   * @param priority Optional priority for responsive behavior ('high', 'medium', 'low')\n   */\n  addItem(item: HTMLElement, priority?: 'high' | 'medium' | 'low'): void {\n    if (priority) {\n      item.setAttribute('data-priority', priority);\n    }\n    this.appendChild(item);\n  }\n\n  /**\n   * Remove a status item from this section\n   * @param item The status item element to remove\n   */\n  removeItem(item: HTMLElement): void {\n    if (this.contains(item)) {\n      item.remove();\n    }\n  }\n\n  /**\n   * Clear all items from this section\n   */\n  clear(): void {\n    while (this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n  }\n\n  /**\n   * Get all items in this section\n   */\n  getItems(): HTMLElement[] {\n    return Array.from(this.children) as HTMLElement[];\n  }\n\n  /**\n   * Get items by priority level\n   * @param priority The priority level to filter by\n   */\n  getItemsByPriority(priority: 'high' | 'medium' | 'low'): HTMLElement[] {\n    return this.getItems().filter(\n      item => item.getAttribute('data-priority') === priority\n    );\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-status-section')) {\n  customElements.define('e2-status-section', StatusSection);\n}\n","/**\n * Tab Element\n * Individual tab that can be clicked to show associated content\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  notifyThemeChange,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class Tab extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _active: boolean = false;\n  private _closable: boolean = false;\n  private _icon: string = '';\n  private _label: string = '';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return [\n      'theme',\n      'disabled',\n      'active',\n      'closable',\n      'icon',\n      'label',\n      'panel',\n    ];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n    this.setupEventListeners();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n          padding: 8px 12px;\n          background: var(--tab-bg, #f8f8f8);\n          border: 1px solid var(--tab-border, #ddd);\n          border-bottom: none;\n          cursor: pointer;\n          user-select: none;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          color: var(--tab-color, #333);\n          min-width: 0;\n          position: relative;\n          transition: background-color 0.2s ease, color 0.2s ease;\n        }\n\n        :host(:hover) {\n          background: var(--tab-bg-hover, #e8e8e8);\n        }\n\n        :host([active]) {\n          background: var(--tab-bg-active, #ffffff);\n          color: var(--tab-color-active, #000);\n          border-bottom: 1px solid var(--tab-bg-active, #ffffff);\n          z-index: 1;\n        }\n\n        :host(.theme-dark) {\n          background: var(--tab-bg-dark, #2d2d2d);\n          border-color: var(--tab-border-dark, #555);\n          color: var(--tab-color-dark, #ccc);\n        }\n\n        :host(.theme-dark:hover) {\n          background: var(--tab-bg-hover-dark, #3d3d3d);\n        }\n\n        :host(.theme-dark[active]) {\n          background: var(--tab-bg-active-dark, #1e1e1e);\n          color: var(--tab-color-active-dark, #fff);\n          border-bottom-color: var(--tab-bg-active-dark, #1e1e1e);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          cursor: not-allowed;\n          pointer-events: none;\n        }\n\n        /* Tab position adjustments for container orientation */\n        :host-context(e2-tab-container[tab-position=\"bottom\"]) {\n          border-top: none;\n          border-bottom: 1px solid var(--tab-border, #ddd);\n        }\n\n        :host-context(e2-tab-container[tab-position=\"bottom\"][active]) {\n          border-top: 1px solid var(--tab-bg-active, #ffffff);\n          border-bottom-color: var(--tab-bg-active, #ffffff);\n        }\n\n        :host-context(e2-tab-container.theme-dark[tab-position=\"bottom\"]) {\n          border-bottom-color: var(--tab-border-dark, #555);\n        }\n\n        :host-context(e2-tab-container.theme-dark[tab-position=\"bottom\"][active]) {\n          border-top-color: var(--tab-bg-active-dark, #1e1e1e);\n          border-bottom-color: var(--tab-bg-active-dark, #1e1e1e);\n        }\n\n        :host-context(e2-tab-container[tab-position=\"left\"]),\n        :host-context(e2-tab-container[tab-position=\"right\"]) {\n          border-bottom: 1px solid var(--tab-border, #ddd);\n          border-right: none;\n          width: 100%;\n        }\n\n        :host-context(e2-tab-container[tab-position=\"left\"][active]) {\n          border-right: 1px solid var(--tab-bg-active, #ffffff);\n        }\n\n        :host-context(e2-tab-container[tab-position=\"right\"]) {\n          border-left: none;\n          border-right: 1px solid var(--tab-border, #ddd);\n        }\n\n        :host-context(e2-tab-container[tab-position=\"right\"][active]) {\n          border-left: 1px solid var(--tab-bg-active, #ffffff);\n          border-right-color: var(--tab-bg-active, #ffffff);\n        }\n\n        .tab-content {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          min-width: 0;\n          flex: 1;\n        }\n\n        .tab-icon {\n          flex-shrink: 0;\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .tab-label {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          flex: 1;\n          min-width: 0;\n        }\n\n        .close-button {\n          flex-shrink: 0;\n          width: 16px;\n          height: 16px;\n          border: none;\n          background: transparent;\n          cursor: pointer;\n          border-radius: 2px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-left: 4px;\n          font-size: 12px;\n          color: var(--tab-close-color, #666);\n          opacity: 0.7;\n          transition: opacity 0.2s ease, background-color 0.2s ease;\n        }\n\n        .close-button:hover {\n          opacity: 1;\n          background: var(--tab-close-bg-hover, rgba(0, 0, 0, 0.1));\n        }\n\n        :host(.theme-dark) .close-button {\n          color: var(--tab-close-color-dark, #aaa);\n        }\n\n        :host(.theme-dark) .close-button:hover {\n          background: var(--tab-close-bg-hover-dark, rgba(255, 255, 255, 0.1));\n        }\n\n        :host(:not([closable])) .close-button {\n          display: none;\n        }\n      </style>\n\n      <div class=\"tab-content\">\n        <span class=\"tab-icon\"></span>\n        <span class=\"tab-label\"></span>\n        <button class=\"close-button\" type=\"button\">&times;</button>\n      </div>\n    `;\n  }\n\n  private setupEventListeners(): void {\n    this.addEventListener('click', this.handleClick.bind(this));\n\n    const closeButton = this.shadowRoot?.querySelector(\n      '.close-button'\n    ) as HTMLButtonElement;\n    closeButton?.addEventListener('click', this.handleCloseClick.bind(this));\n  }\n\n  private handleClick(event: MouseEvent): void {\n    if (this.disabled) return;\n\n    // Don't trigger tab click if close button was clicked\n    if ((event.target as HTMLElement).classList.contains('close-button')) {\n      return;\n    }\n\n    event.stopPropagation();\n\n    dispatchCustomEvent(this, 'tab-click', {\n      tabId: this.id,\n      tab: this,\n      panelId: this.getAttribute('panel') || `${this.id}-panel`,\n    });\n  }\n\n  private handleCloseClick(event: MouseEvent): void {\n    if (this.disabled) return;\n\n    event.stopPropagation();\n\n    dispatchCustomEvent(this, 'tab-close', {\n      tabId: this.id,\n      tab: this,\n      panelId: this.getAttribute('panel') || `${this.id}-panel`,\n    });\n\n    // The parent container will handle the removal\n  }\n\n  private updateContent(): void {\n    const shadowRoot = this.shadowRoot!;\n    const iconElement = shadowRoot.querySelector('.tab-icon') as HTMLElement;\n    const labelElement = shadowRoot.querySelector('.tab-label') as HTMLElement;\n\n    // Update icon\n    if (this._icon) {\n      iconElement.textContent = this._icon;\n      iconElement.style.display = 'flex';\n    } else {\n      iconElement.style.display = 'none';\n    }\n\n    // Update label\n    labelElement.textContent = this._label || this.textContent || '';\n  }\n\n  // Public API\n  public click(): void {\n    if (!this.disabled) {\n      this.handleClick(new MouseEvent('click'));\n    }\n  }\n\n  public close(): void {\n    if (!this.disabled && this._closable) {\n      this.handleCloseClick(new MouseEvent('click'));\n    }\n  }\n\n  // Properties\n  public get theme(): Theme {\n    return this._theme;\n  }\n\n  public set theme(value: Theme) {\n    this._theme = value;\n    this.setAttribute('theme', value);\n    this.applyTheme(value);\n    // Notify child elements of theme change\n    notifyThemeChange(this, value);\n  }\n\n  public get active(): boolean {\n    return this._active;\n  }\n\n  public set active(value: boolean) {\n    this._active = value;\n    if (value) {\n      this.setAttribute('active', '');\n    } else {\n      this.removeAttribute('active');\n    }\n  }\n\n  public get closable(): boolean {\n    return this._closable;\n  }\n\n  public set closable(value: boolean) {\n    this._closable = value;\n    if (value) {\n      this.setAttribute('closable', '');\n    } else {\n      this.removeAttribute('closable');\n    }\n  }\n\n  public get icon(): string {\n    return this._icon;\n  }\n\n  public set icon(value: string) {\n    this._icon = value;\n    this.setAttribute('icon', value);\n    this.updateContent();\n  }\n\n  public get label(): string {\n    return this._label;\n  }\n\n  public set label(value: string) {\n    this._label = value;\n    this.setAttribute('label', value);\n    this.updateContent();\n  }\n\n  public get panel(): string | null {\n    return this.getAttribute('panel');\n  }\n\n  public set panel(value: string | null) {\n    if (value) {\n      this.setAttribute('panel', value);\n    } else {\n      this.removeAttribute('panel');\n    }\n  }\n\n  public get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  public set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  public applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // Clean up existing theme inheritance when explicit theme is set\n        if (this._themeCleanup) {\n          this._themeCleanup();\n          this._themeCleanup = undefined;\n        }\n        this._theme = (newValue as Theme) || 'auto';\n        this.applyTheme(this._theme);\n        break;\n      case 'active':\n        this._active = newValue !== null;\n        break;\n      case 'closable':\n        this._closable = newValue !== null;\n        break;\n      case 'icon':\n        this._icon = newValue || '';\n        this.updateContent();\n        break;\n      case 'label':\n        this._label = newValue || '';\n        this.updateContent();\n        break;\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('tab');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    this.updateContent();\n\n    // Handle pending setup from dynamic creation\n    if ((this as any)._pendingSetup) {\n      const setup = (this as any)._pendingSetup;\n\n      // Set attributes safely now that element is connected\n      if (setup.slot) {\n        this.setAttribute('slot', setup.slot);\n      }\n      if (setup.panel) {\n        this.setAttribute('panel', setup.panel);\n      }\n      if (setup.label) {\n        this.label = setup.label;\n      }\n      if (setup.closable) {\n        this.closable = setup.closable;\n      }\n      if (setup.theme) {\n        this.applyTheme(setup.theme);\n      }\n\n      // Clean up\n      delete (this as any)._pendingSetup;\n    }\n\n    // Update content when connected\n    this.updateContent();\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-tab')) {\n  customElements.define('e2-tab', Tab);\n}\n","/**\n * Tab Container Element\n * A container that manages tabs and their associated panels\n */\n\nimport {\n  EditorElementProperties,\n  TabCloseEvent,\n  TabContainerChangeEvent,\n  TabSelectEvent,\n  Theme,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getEffectiveTheme,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class TabContainer\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _activeTabId: string | null = null;\n  private _tabPosition: 'top' | 'bottom' | 'left' | 'right' = 'top';\n  private _closable: boolean = false;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'active-tab', 'tab-position', 'closable'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n    this.setupEventListeners();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: flex;\n          flex-direction: column;\n          background: var(--tab-container-bg, #ffffff);\n          border: 1px solid var(--tab-container-border, #ccc);\n          border-radius: var(--tab-container-border-radius, 4px);\n          overflow: hidden;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n        }\n\n        :host(.theme-dark) {\n          background: var(--tab-container-bg-dark, #1e1e1e);\n          border-color: var(--tab-container-border-dark, #555);\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        /* Tab position variations */\n        :host([tab-position=\"top\"]) {\n          flex-direction: column;\n        }\n\n        :host([tab-position=\"bottom\"]) {\n          flex-direction: column-reverse;\n        }\n\n        :host([tab-position=\"left\"]) {\n          flex-direction: row;\n        }\n\n        :host([tab-position=\"right\"]) {\n          flex-direction: row-reverse;\n        }\n\n        .tab-list {\n          display: flex;\n          background: var(--tab-list-bg, #f8f8f8);\n          border-bottom: 1px solid var(--tab-list-border, #ddd);\n          overflow-x: auto;\n          flex-shrink: 0;\n        }\n\n        :host(.theme-dark) .tab-list {\n          background: var(--tab-list-bg-dark, #2d2d2d);\n          border-bottom-color: var(--tab-list-border-dark, #555);\n        }\n\n        :host([tab-position=\"bottom\"]) .tab-list {\n          border-bottom: none;\n          border-top: 1px solid var(--tab-list-border, #ddd);\n        }\n\n        :host(.theme-dark[tab-position=\"bottom\"]) .tab-list {\n          border-top-color: var(--tab-list-border-dark, #555);\n        }\n\n        :host([tab-position=\"left\"]) .tab-list,\n        :host([tab-position=\"right\"]) .tab-list {\n          flex-direction: column;\n          border-bottom: none;\n          border-right: 1px solid var(--tab-list-border, #ddd);\n          overflow-x: visible;\n          overflow-y: auto;\n        }\n\n        :host([tab-position=\"right\"]) .tab-list {\n          border-right: none;\n          border-left: 1px solid var(--tab-list-border, #ddd);\n        }\n\n        :host(.theme-dark[tab-position=\"left\"]) .tab-list {\n          border-right-color: var(--tab-list-border-dark, #555);\n        }\n\n        :host(.theme-dark[tab-position=\"right\"]) .tab-list {\n          border-left-color: var(--tab-list-border-dark, #555);\n        }\n\n        .panel-container {\n          flex: 1;\n          overflow: hidden;\n          position: relative;\n        }\n\n        ::slotted(e2-tab) {\n          flex-shrink: 0;\n        }\n\n        ::slotted(e2-tab-panel) {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          overflow: auto;\n        }\n\n        ::slotted(e2-tab-panel[active]) {\n          display: flex !important;\n        }\n      </style>\n\n      <div class=\"tab-list\">\n        <slot name=\"tabs\"></slot>\n      </div>\n      <div class=\"panel-container\">\n        <slot name=\"panels\"></slot>\n      </div>\n    `;\n  }\n\n  private setupEventListeners(): void {\n    // Listen for tab clicks\n    this.addEventListener(\n      'tab-click',\n      this.handleTabClick.bind(this) as EventListener\n    );\n    this.addEventListener(\n      'tab-close',\n      this.handleTabClose.bind(this) as EventListener\n    );\n\n    // Listen for slotchange to manage initial state\n    const shadowRoot = this.shadowRoot!;\n    const tabSlot = shadowRoot.querySelector(\n      'slot[name=\"tabs\"]'\n    ) as HTMLSlotElement;\n    const panelSlot = shadowRoot.querySelector(\n      'slot[name=\"panels\"]'\n    ) as HTMLSlotElement;\n\n    tabSlot?.addEventListener('slotchange', () => {\n      this.updateTabsAndPanels();\n    });\n\n    panelSlot?.addEventListener('slotchange', () => {\n      this.updateTabsAndPanels();\n    });\n  }\n\n  private handleTabClick(event: Event): void {\n    event.stopPropagation();\n    const tabElement = event.target as HTMLElement;\n    const tabId = tabElement.id;\n    const panelId = tabElement.getAttribute('panel') || `${tabId}-panel`;\n\n    this.selectTab(tabId, panelId);\n  }\n\n  private handleTabClose(event: Event): void {\n    event.stopPropagation();\n\n    // Find the actual tab element (event might come from close button inside tab)\n    let tabElement = event.target as HTMLElement;\n\n    // If the event came from inside a tab, find the parent tab element\n    if (!tabElement.matches('e2-tab')) {\n      tabElement = tabElement.closest('e2-tab') as HTMLElement;\n    }\n\n    if (!tabElement) {\n      return;\n    }\n\n    const tabId = tabElement.id;\n    const panelId = tabElement.getAttribute('panel') || `${tabId}-panel`;\n\n    // Check if this tab is already being removed to prevent recursion\n    if (tabElement.hasAttribute('data-removing')) {\n      return;\n    }\n\n    // Mark as being removed to prevent recursive calls\n    tabElement.setAttribute('data-removing', 'true');\n\n    // Dispatch close event to external listeners (without bubbling to avoid recursion)\n    const closeEvent = dispatchCustomEvent<TabCloseEvent['detail']>(\n      this,\n      'tab-close',\n      {\n        tabId,\n        tab: tabElement,\n        panelId,\n        panel: this.querySelector(\n          `e2-tab-panel[id=\"${panelId}\"]`\n        ) as HTMLElement,\n        containerId: this.id,\n        container: this,\n      },\n      { bubbles: false } // Prevent bubbling to avoid recursion\n    );\n\n    // Defer the removal to break any potential event loops\n    if (closeEvent) {\n      setTimeout(() => {\n        this.removeTab(tabId);\n      }, 0);\n    }\n  }\n\n  private selectTab(tabId: string, panelId: string): void {\n    const tabElement = this.querySelector(\n      `e2-tab[id=\"${tabId}\"]`\n    ) as HTMLElement;\n    const panelElement = this.querySelector(\n      `e2-tab-panel[id=\"${panelId}\"]`\n    ) as HTMLElement;\n\n    if (!tabElement || !panelElement) {\n      return;\n    }\n\n    const previousTabId = this._activeTabId;\n    const effectiveTheme = this.hasAttribute('theme')\n      ? this._theme\n      : getEffectiveTheme(this);\n\n    // Deactivate all tabs and panels\n    this.querySelectorAll('e2-tab').forEach(tab => {\n      if ((tab as any).active !== undefined) {\n        (tab as any).active = false;\n      } else {\n        tab.removeAttribute('active');\n      }\n      // Preserve theme after state change\n      if ((tab as any).applyTheme && !tab.hasAttribute('theme')) {\n        (tab as any).applyTheme(effectiveTheme);\n      }\n    });\n    this.querySelectorAll('e2-tab-panel').forEach(panel => {\n      if ((panel as any).active !== undefined) {\n        (panel as any).active = false;\n      } else {\n        panel.removeAttribute('active');\n        (panel as HTMLElement).style.display = 'none';\n      }\n      // Preserve theme after state change\n      if ((panel as any).applyTheme && !panel.hasAttribute('theme')) {\n        (panel as any).applyTheme(effectiveTheme);\n      }\n    });\n\n    // Activate the selected tab and panel\n    if ((tabElement as any).active !== undefined) {\n      (tabElement as any).active = true;\n    } else {\n      tabElement.setAttribute('active', '');\n    }\n\n    if ((panelElement as any).active !== undefined) {\n      (panelElement as any).active = true;\n    } else {\n      panelElement.setAttribute('active', '');\n      panelElement.style.display = 'flex';\n    }\n\n    // Ensure theme is preserved on the newly active elements\n    if ((tabElement as any).applyTheme && !tabElement.hasAttribute('theme')) {\n      (tabElement as any).applyTheme(effectiveTheme);\n    }\n    if (\n      (panelElement as any).applyTheme &&\n      !panelElement.hasAttribute('theme')\n    ) {\n      (panelElement as any).applyTheme(effectiveTheme);\n    }\n\n    this._activeTabId = tabId;\n    this.setAttribute('active-tab', tabId);\n\n    // Dispatch select event\n    dispatchCustomEvent<TabSelectEvent['detail']>(this, 'tab-select', {\n      tabId,\n      tab: tabElement,\n      panelId,\n      panel: panelElement,\n      containerId: this.id,\n      container: this,\n      previousTabId: previousTabId || undefined,\n    });\n\n    // Dispatch container change event\n    dispatchCustomEvent<TabContainerChangeEvent['detail']>(\n      this,\n      'tab-container-change',\n      {\n        containerId: this.id,\n        container: this,\n        activeTabId: tabId,\n        activePanelId: panelId,\n      }\n    );\n  }\n\n  private removeTab(tabId: string): void {\n    const tabElement = this.querySelector(\n      `e2-tab[id=\"${tabId}\"]`\n    ) as HTMLElement;\n    const panelId = tabElement?.getAttribute('panel') || `${tabId}-panel`;\n    const panelElement = this.querySelector(\n      `e2-tab-panel[id=\"${panelId}\"]`\n    ) as HTMLElement;\n\n    // Remove elements\n    tabElement?.remove();\n    panelElement?.remove();\n\n    // If this was the active tab, select another\n    if (this._activeTabId === tabId) {\n      const remainingTabs = this.querySelectorAll('e2-tab');\n      if (remainingTabs.length > 0) {\n        const nextTab = remainingTabs[0] as HTMLElement;\n        const nextPanelId =\n          nextTab.getAttribute('panel') || `${nextTab.id}-panel`;\n        this.selectTab(nextTab.id, nextPanelId);\n      } else {\n        this._activeTabId = null;\n        this.removeAttribute('active-tab');\n      }\n    }\n\n    // Refresh theme inheritance after removing tab\n    this.refreshThemes();\n  }\n\n  private updateTabsAndPanels(): void {\n    // Auto-assign panels to tabs and vice versa\n    const tabs = this.querySelectorAll('e2-tab');\n    const panels = this.querySelectorAll('e2-tab-panel');\n\n    // Get the effective theme for proper inheritance\n    const effectiveTheme = this.hasAttribute('theme')\n      ? this._theme\n      : getEffectiveTheme(this);\n\n    tabs.forEach((tab, index) => {\n      const tabElement = tab as HTMLElement;\n\n      // Only set ID if it's not already set and the element doesn't have attributes being processed\n      if (!tabElement.id && !tabElement.hasAttribute('id')) {\n        try {\n          tabElement.id = generateId('tab');\n        } catch (e) {\n          // If setting ID fails, skip this tab for now\n          console.warn('Failed to set tab ID, skipping:', e);\n          return;\n        }\n      }\n\n      // Set closable attribute if container is closable, but avoid if element is being processed\n      if (this._closable && !tabElement.hasAttribute('closable')) {\n        try {\n          tabElement.setAttribute('closable', '');\n        } catch (e) {\n          // If setting attribute fails, the element might still be initializing\n          console.warn('Failed to set closable attribute, skipping:', e);\n        }\n      }\n\n      // Apply effective theme only if tab doesn't have its own theme attribute\n      if ((tabElement as any).applyTheme && !tabElement.hasAttribute('theme')) {\n        try {\n          (tabElement as any).applyTheme(effectiveTheme);\n        } catch (e) {\n          console.warn('Failed to apply theme to tab:', e);\n        }\n      }\n\n      // Link to panel\n      if (!tabElement.getAttribute('panel')) {\n        const correspondingPanel = panels[index] as HTMLElement;\n        if (correspondingPanel) {\n          if (\n            !correspondingPanel.id &&\n            !correspondingPanel.hasAttribute('id')\n          ) {\n            try {\n              correspondingPanel.id = `${tabElement.id}-panel`;\n            } catch (e) {\n              console.warn('Failed to set panel ID:', e);\n              return;\n            }\n          }\n          try {\n            tabElement.setAttribute('panel', correspondingPanel.id);\n          } catch (e) {\n            console.warn('Failed to link tab to panel:', e);\n          }\n        }\n      }\n    });\n\n    // Determine which tab should be active initially\n    let activeTabElement: HTMLElement | null = null;\n    let activePanelId: string | null = null;\n\n    // Priority 1: Check if container has active-tab attribute\n    if (this.hasAttribute('active-tab')) {\n      const activeTabId = this.getAttribute('active-tab');\n      activeTabElement = this.querySelector(\n        `e2-tab[id=\"${activeTabId}\"]`\n      ) as HTMLElement;\n    }\n\n    // Priority 2: Check if any tab has active attribute\n    if (!activeTabElement) {\n      activeTabElement = this.querySelector('e2-tab[active]') as HTMLElement;\n    }\n\n    // Priority 3: Use first tab as fallback\n    if (!activeTabElement && tabs.length > 0) {\n      activeTabElement = tabs[0] as HTMLElement;\n    }\n\n    // Set the active panel ID based on the determined active tab\n    if (activeTabElement) {\n      activePanelId =\n        activeTabElement.getAttribute('panel') ||\n        `${activeTabElement.id}-panel`;\n    }\n\n    panels.forEach(panel => {\n      const panelElement = panel as HTMLElement;\n\n      // Only set ID if it's not already set and the element is ready\n      if (!panelElement.id && !panelElement.hasAttribute('id')) {\n        try {\n          panelElement.id = generateId('tab-panel');\n        } catch (e) {\n          console.warn('Failed to set panel ID:', e);\n          return;\n        }\n      }\n\n      // Apply effective theme only if panel doesn't have its own theme attribute\n      if (\n        (panelElement as any).applyTheme &&\n        !panelElement.hasAttribute('theme')\n      ) {\n        try {\n          (panelElement as any).applyTheme(effectiveTheme);\n        } catch (e) {\n          console.warn('Failed to apply theme to panel:', e);\n        }\n      }\n\n      // Hide all panels except the one that should be active\n      if (panelElement.id === activePanelId) {\n        // This will be the initially active panel - ensure it's visible\n        if ((panelElement as any).active !== undefined) {\n          try {\n            (panelElement as any).active = true;\n          } catch (e) {\n            console.warn('Failed to set panel active property:', e);\n          }\n        } else {\n          try {\n            panelElement.setAttribute('active', '');\n            panelElement.style.display = 'flex';\n          } catch (e) {\n            console.warn('Failed to set panel active state:', e);\n          }\n        }\n      } else {\n        if ((panelElement as any).active !== undefined) {\n          try {\n            (panelElement as any).active = false;\n          } catch (e) {\n            console.warn('Failed to set panel inactive property:', e);\n          }\n        } else {\n          try {\n            panelElement.style.display = 'none';\n          } catch (e) {\n            console.warn('Failed to hide panel:', e);\n          }\n        }\n      }\n    });\n\n    // Select the determined active tab if none is currently selected\n    if (!this._activeTabId && activeTabElement) {\n      const panelId =\n        activeTabElement.getAttribute('panel') ||\n        `${activeTabElement.id}-panel`;\n      setTimeout(() => {\n        if (activeTabElement) {\n          this.selectTab(activeTabElement.id, panelId);\n        }\n      }, 100);\n    }\n  }\n\n  // Public API\n  public selectTabById(tabId: string): void {\n    const tabElement = this.querySelector(\n      `e2-tab[id=\"${tabId}\"]`\n    ) as HTMLElement;\n    if (tabElement) {\n      const panelId = tabElement.getAttribute('panel') || `${tabId}-panel`;\n      this.selectTab(tabId, panelId);\n    }\n  }\n\n  /**\n   * Refresh theme inheritance for all child tabs and panels\n   * This can be called after dynamic operations to ensure theme is maintained\n   */\n  public refreshThemes(): void {\n    const effectiveTheme = this.hasAttribute('theme')\n      ? this._theme\n      : getEffectiveTheme(this);\n\n    this.querySelectorAll('e2-tab').forEach((tab: any) => {\n      if (tab.applyTheme && !tab.hasAttribute('theme')) {\n        tab.applyTheme(effectiveTheme);\n      }\n    });\n\n    this.querySelectorAll('e2-tab-panel').forEach((panel: any) => {\n      if (panel.applyTheme && !panel.hasAttribute('theme')) {\n        panel.applyTheme(effectiveTheme);\n      }\n    });\n  }\n\n  public addTab(\n    label: string,\n    content: string = '',\n    tabId?: string,\n    panelId?: string\n  ): { tabId: string; panelId: string } {\n    const finalTabId = tabId || generateId('tab');\n    const finalPanelId = panelId || `${finalTabId}-panel`;\n\n    // Create tab element using customElements workaround\n    const TabConstructor = window.customElements.get('e2-tab') as any;\n    const tab = new TabConstructor();\n    tab.id = finalTabId;\n\n    // Create panel element using customElements workaround\n    const TabPanelConstructor = window.customElements.get(\n      'e2-tab-panel'\n    ) as any;\n    const panel = new TabPanelConstructor();\n    panel.id = finalPanelId;\n\n    // Get effective theme for proper inheritance\n    const effectiveTheme = this.hasAttribute('theme')\n      ? this._theme\n      : getEffectiveTheme(this);\n\n    // Set up initial data that will be applied in connectedCallback\n    (tab as any)._pendingSetup = {\n      slot: 'tabs',\n      panel: finalPanelId,\n      label: label,\n      closable: this._closable,\n      theme: effectiveTheme,\n    };\n\n    (panel as any)._pendingSetup = {\n      slot: 'panels',\n      content: content,\n      theme: effectiveTheme,\n    };\n\n    // Add to DOM - this will trigger connectedCallback\n    this.appendChild(tab);\n    this.appendChild(panel);\n\n    return { tabId: finalTabId, panelId: finalPanelId };\n  }\n\n  public removeTabById(tabId: string): void {\n    this.removeTab(tabId);\n  }\n\n  public get activeTabId(): string | null {\n    return this._activeTabId;\n  }\n\n  public get tabs(): NodeListOf<HTMLElement> {\n    return this.querySelectorAll('e2-tab');\n  }\n\n  public get panels(): NodeListOf<HTMLElement> {\n    return this.querySelectorAll('e2-tab-panel');\n  }\n\n  // Attribute handling\n  public get theme(): Theme {\n    return this._theme;\n  }\n\n  public set theme(value: Theme) {\n    this._theme = value;\n    this.setAttribute('theme', value);\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  public get tabPosition(): 'top' | 'bottom' | 'left' | 'right' {\n    return this._tabPosition;\n  }\n\n  public set tabPosition(value: 'top' | 'bottom' | 'left' | 'right') {\n    this._tabPosition = value;\n    this.setAttribute('tab-position', value);\n  }\n\n  public get closable(): boolean {\n    return this._closable;\n  }\n\n  public set closable(value: boolean) {\n    this._closable = value;\n    if (value) {\n      this.setAttribute('closable', '');\n    } else {\n      this.removeAttribute('closable');\n    }\n\n    // Update existing tabs\n    this.querySelectorAll('e2-tab').forEach(tab => {\n      if (value) {\n        tab.setAttribute('closable', '');\n      } else {\n        tab.removeAttribute('closable');\n      }\n    });\n  }\n\n  public get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  public set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  public applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n\n    // Also apply theme to all child tabs and panels that don't have explicit theme\n    this.querySelectorAll('e2-tab').forEach((tab: any) => {\n      if (tab.applyTheme && !tab.hasAttribute('theme')) {\n        tab.applyTheme(theme);\n      }\n    });\n\n    this.querySelectorAll('e2-tab-panel').forEach((panel: any) => {\n      if (panel.applyTheme && !panel.hasAttribute('theme')) {\n        panel.applyTheme(theme);\n      }\n    });\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this._theme = newValue as Theme;\n          // Clean up any existing theme inheritance\n          if (this._themeCleanup) {\n            this._themeCleanup();\n            this._themeCleanup = undefined;\n          }\n          this.applyTheme(this._theme);\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          this._theme = 'auto';\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'active-tab':\n        if (newValue && newValue !== this._activeTabId) {\n          this.selectTabById(newValue);\n        }\n        break;\n      case 'tab-position':\n        this._tabPosition = (newValue as any) || 'top';\n        break;\n      case 'closable':\n        this._closable = newValue !== null;\n        break;\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('tab-container');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    this.updateTabsAndPanels();\n\n    // Defer initialization until the next frame to avoid conflicts with custom element initialization\n    // Use requestAnimationFrame instead of setTimeout for better timing\n    // requestAnimationFrame(() => {\n    //   // Wait one more frame to ensure all child custom elements are fully initialized\n    //   requestAnimationFrame(() => {\n    //     this.updateTabsAndPanels();\n\n    //     // If still no active tab after initialization, try once more\n    //     if (!this._activeTabId) {\n    //       requestAnimationFrame(() => {\n    //         this.updateTabsAndPanels();\n    //       });\n    //     }\n    //   });\n    // });\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-tab-container')) {\n  customElements.define('e2-tab-container', TabContainer);\n}\n","/**\n * Tab Panel Element\n * Container for tab content that shows/hides based on tab selection\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  generateId,\n  getShadowRoot,\n  notifyThemeChange,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class TabPanel extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _active: boolean = false;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'active'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: none;\n          flex-direction: column;\n          width: 100%;\n          height: 100%;\n          overflow: auto;\n          background: var(--tab-panel-bg, #ffffff);\n          padding: var(--tab-panel-padding, 16px);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          color: var(--tab-panel-color, #333);\n          box-sizing: border-box;\n        }\n\n        :host([active]) {\n          display: flex;\n        }\n\n        :host(.theme-dark) {\n          background: var(--tab-panel-bg-dark, #1e1e1e);\n          color: var(--tab-panel-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        /* Scrollbar styling for dark theme */\n        :host(.theme-dark) {\n          scrollbar-width: thin;\n          scrollbar-color: var(--scrollbar-thumb-dark, #555) var(--scrollbar-track-dark, #2d2d2d);\n        }\n\n        :host(.theme-dark)::-webkit-scrollbar {\n          width: 8px;\n          height: 8px;\n        }\n\n        :host(.theme-dark)::-webkit-scrollbar-track {\n          background: var(--scrollbar-track-dark, #2d2d2d);\n        }\n\n        :host(.theme-dark)::-webkit-scrollbar-thumb {\n          background: var(--scrollbar-thumb-dark, #555);\n          border-radius: 4px;\n        }\n\n        :host(.theme-dark)::-webkit-scrollbar-thumb:hover {\n          background: var(--scrollbar-thumb-hover-dark, #666);\n        }\n\n        /* Light theme scrollbar */\n        :host(.theme-light) {\n          scrollbar-width: thin;\n          scrollbar-color: var(--scrollbar-thumb-light, #ccc) var(--scrollbar-track-light, #f0f0f0);\n        }\n\n        :host(.theme-light)::-webkit-scrollbar {\n          width: 8px;\n          height: 8px;\n        }\n\n        :host(.theme-light)::-webkit-scrollbar-track {\n          background: var(--scrollbar-track-light, #f0f0f0);\n        }\n\n        :host(.theme-light)::-webkit-scrollbar-thumb {\n          background: var(--scrollbar-thumb-light, #ccc);\n          border-radius: 4px;\n        }\n\n        :host(.theme-light)::-webkit-scrollbar-thumb:hover {\n          background: var(--scrollbar-thumb-hover-light, #bbb);\n        }\n\n        /* Content styling */\n        ::slotted(*) {\n          max-width: 100%;\n        }\n\n        ::slotted(h1),\n        ::slotted(h2),\n        ::slotted(h3),\n        ::slotted(h4),\n        ::slotted(h5),\n        ::slotted(h6) {\n          margin-top: 0;\n          color: inherit;\n        }\n\n        ::slotted(p) {\n          line-height: 1.5;\n          margin-bottom: 1em;\n        }\n\n        ::slotted(pre) {\n          background: var(--code-bg, #f5f5f5);\n          padding: 12px;\n          border-radius: 4px;\n          overflow-x: auto;\n          font-family: var(--font-family-mono, 'Consolas', 'Monaco', monospace);\n        }\n\n        :host(.theme-dark) ::slotted(pre) {\n          background: var(--code-bg-dark, #0d1117);\n        }\n\n        ::slotted(code) {\n          background: var(--code-bg, #f5f5f5);\n          padding: 2px 4px;\n          border-radius: 2px;\n          font-family: var(--font-family-mono, 'Consolas', 'Monaco', monospace);\n          font-size: 0.9em;\n        }\n\n        :host(.theme-dark) ::slotted(code) {\n          background: var(--code-bg-dark, #0d1117);\n        }\n\n        /* Loading state */\n        :host([loading]) {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        :host([loading])::before {\n          content: 'Loading...';\n          color: var(--tab-panel-loading-color, #666);\n        }\n\n        :host(.theme-dark[loading])::before {\n          color: var(--tab-panel-loading-color-dark, #aaa);\n        }\n\n        /* Empty state */\n        :host(:empty:not([loading])) {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        :host(:empty:not([loading]))::before {\n          content: attr(data-empty-message);\n          color: var(--tab-panel-empty-color, #999);\n          font-style: italic;\n        }\n\n        :host(.theme-dark:empty:not([loading]))::before {\n          color: var(--tab-panel-empty-color-dark, #666);\n        }\n      </style>\n\n      <slot></slot>\n    `;\n  }\n\n  // Public API\n  public show(): void {\n    this.active = true;\n  }\n\n  public hide(): void {\n    this.active = false;\n  }\n\n  public scrollToTop(): void {\n    this.scrollTop = 0;\n  }\n\n  public scrollToBottom(): void {\n    this.scrollTop = this.scrollHeight;\n  }\n\n  public scrollToElement(element: Element): void {\n    if (this.contains(element)) {\n      element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  public clearContent(): void {\n    this.innerHTML = '';\n  }\n\n  public setContent(content: string): void {\n    // Clear existing content first to avoid conflicts\n    this.innerHTML = '';\n    this.innerHTML = content;\n  }\n\n  public appendContent(content: string): void {\n    this.insertAdjacentHTML('beforeend', content);\n  }\n\n  public prependContent(content: string): void {\n    this.insertAdjacentHTML('afterbegin', content);\n  }\n\n  // Properties\n  public get theme(): Theme {\n    return this._theme;\n  }\n\n  public set theme(value: Theme) {\n    this._theme = value;\n    this.setAttribute('theme', value);\n    this.applyTheme(value);\n    // Notify child elements of theme change\n    notifyThemeChange(this, value);\n  }\n\n  public get active(): boolean {\n    return this._active;\n  }\n\n  public set active(value: boolean) {\n    this._active = value;\n    if (value) {\n      this.setAttribute('active', '');\n      this.style.display = 'flex';\n    } else {\n      this.removeAttribute('active');\n      this.style.display = 'none';\n    }\n  }\n\n  public get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  public set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  public get loading(): boolean {\n    return this.hasAttribute('loading');\n  }\n\n  public set loading(value: boolean) {\n    if (value) {\n      this.setAttribute('loading', '');\n    } else {\n      this.removeAttribute('loading');\n    }\n  }\n\n  public get emptyMessage(): string {\n    return this.getAttribute('data-empty-message') || 'No content available';\n  }\n\n  public set emptyMessage(value: string) {\n    this.setAttribute('data-empty-message', value);\n  }\n\n  public applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // Clean up existing theme inheritance when explicit theme is set\n        if (this._themeCleanup) {\n          this._themeCleanup();\n          this._themeCleanup = undefined;\n        }\n        this._theme = (newValue as Theme) || 'auto';\n        this.applyTheme(this._theme);\n        break;\n      case 'active':\n        this._active = newValue !== null;\n        if (this._active) {\n          this.style.display = 'flex';\n        } else {\n          this.style.display = 'none';\n        }\n        break;\n    }\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('tab-panel');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n\n    // Handle pending setup from dynamic creation\n    if ((this as any)._pendingSetup) {\n      const setup = (this as any)._pendingSetup;\n\n      // Set attributes safely now that element is connected\n      if (setup.slot) {\n        this.setAttribute('slot', setup.slot);\n      }\n      if (setup.content) {\n        // Only set innerHTML if the element doesn't already have content\n        // This prevents conflicts when the element is declared with existing content\n        if (this.children.length === 0 && this.textContent?.trim() === '') {\n          this.innerHTML = setup.content;\n        }\n      }\n      if (setup.theme) {\n        this.applyTheme(setup.theme);\n      }\n\n      // Clean up\n      delete (this as any)._pendingSetup;\n    }\n\n    // Set initial visibility based on active state\n    if (this._active) {\n      this.style.display = 'flex';\n    } else {\n      this.style.display = 'none';\n    }\n\n    // Set default empty message if not provided\n    if (!this.hasAttribute('data-empty-message')) {\n      this.emptyMessage = 'No content available';\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-tab-panel')) {\n  customElements.define('e2-tab-panel', TabPanel);\n}\n","/**\n * Toolbar Element\n * A horizontal container for toolbar buttons and other controls\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class Toolbar extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n          padding: 4px;\n          background: var(--toolbar-bg, #f0f0f0);\n          border-bottom: 1px solid var(--toolbar-border, #ccc);\n          gap: 2px;\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n        }\n\n        :host(.theme-dark) {\n          background: var(--toolbar-bg-dark, #2d2d2d);\n          border-bottom-color: var(--toolbar-border-dark, #555);\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        ::slotted(*) {\n          flex-shrink: 0;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('toolbar');\n    }\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n    }\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  /**\n   * Close all toolbar menus except the specified one\n   * @param exceptMenu The menu to keep open (optional)\n   */\n  closeAllMenus(exceptMenu?: HTMLElement): void {\n    const toolbarMenus = this.querySelectorAll('e2-toolbar-menu');\n    toolbarMenus.forEach(menu => {\n      if (menu !== exceptMenu && typeof (menu as any).close === 'function') {\n        (menu as any).close();\n      }\n    });\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-toolbar')) {\n  customElements.define('e2-toolbar', Toolbar);\n}\n","/**\n * Toolbar Button Element\n * A button designed to be used within a toolbar\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ToolbarButton\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['label', 'icon', 'theme', 'disabled', 'active'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: inline-block;\n        }\n\n        button {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 4px;\n          padding: 6px 12px;\n          border: 1px solid transparent;\n          background: transparent;\n          color: var(--text-color, #333);\n          font-family: inherit;\n          font-size: inherit;\n          cursor: pointer;\n          border-radius: 3px;\n          min-height: 24px;\n          transition: all 0.15s ease;\n          text-overflow: ellipsis;\n          overflow: hidden;\n        }\n\n        button:hover {\n          background: var(--button-hover-bg, rgba(0, 0, 0, 0.1));\n        }\n\n        button:active,\n        button.active {\n          background: var(--button-active-bg, rgba(0, 0, 0, 0.2));\n        }\n\n        button:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        :host(.theme-dark) button {\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host(.theme-dark) button:hover {\n          background: var(--button-hover-bg-dark, rgba(255, 255, 255, 0.1));\n        }\n\n        :host(.theme-dark) button:active,\n        :host(.theme-dark) button.active {\n          background: var(--button-active-bg-dark, rgba(255, 255, 255, 0.2));\n        }\n\n        .icon {\n          width: 16px;\n          height: 16px;\n          flex-shrink: 0;\n        }\n\n        .label {\n          white-space: nowrap;\n          margin-left: 4px;\n        }\n      </style>\n      <button>\n        <span class=\"icon\" style=\"display: none;\"></span>\n        <span class=\"label\"></span>\n      </button>\n    `;\n\n    const button = shadowRoot.querySelector('button')!;\n    button.addEventListener('click', this.handleClick.bind(this));\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('toolbar-button');\n    }\n    this.updateContent();\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'label':\n      case 'icon':\n        this.updateContent();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'disabled':\n        this.updateDisabled();\n        break;\n      case 'active':\n        this.updateActive();\n        break;\n    }\n  }\n\n  private updateContent(): void {\n    const shadowRoot = this.shadowRoot!;\n    const iconSpan = shadowRoot.querySelector('.icon') as HTMLSpanElement;\n    const labelSpan = shadowRoot.querySelector('.label') as HTMLSpanElement;\n\n    const icon = this.getAttribute('icon');\n    const label = this.getAttribute('label') || '';\n\n    if (icon) {\n      iconSpan.textContent = icon;\n      iconSpan.style.display = 'inline-block';\n    } else {\n      iconSpan.style.display = 'none';\n    }\n\n    labelSpan.textContent = label;\n  }\n\n  private updateDisabled(): void {\n    const button = this.shadowRoot!.querySelector('button')!;\n    button.disabled = this.hasAttribute('disabled');\n  }\n\n  private updateActive(): void {\n    const button = this.shadowRoot!.querySelector('button')!;\n    button.classList.toggle('active', this.hasAttribute('active'));\n  }\n\n  private handleClick(event: Event): void {\n    if (this.hasAttribute('disabled')) return;\n\n    const customEvent = new CustomEvent('toolbar-button-click', {\n      detail: {\n        buttonId: this.id,\n        button: this,\n      },\n      bubbles: true,\n      cancelable: true,\n    });\n\n    this.dispatchEvent(customEvent);\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n\n  get label(): string {\n    return this.getAttribute('label') || '';\n  }\n\n  set label(value: string) {\n    this.setAttribute('label', value);\n  }\n\n  get icon(): string {\n    return this.getAttribute('icon') || '';\n  }\n\n  set icon(value: string) {\n    this.setAttribute('icon', value);\n  }\n\n  get active(): boolean {\n    return this.hasAttribute('active');\n  }\n\n  set active(value: boolean) {\n    if (value) {\n      this.setAttribute('active', '');\n    } else {\n      this.removeAttribute('active');\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-toolbar-button')) {\n  customElements.define('e2-toolbar-button', ToolbarButton);\n}\n","/**\n * Toolbar Menu Element\n * A dropdown menu button designed to be used within a toolbar\n */\n\nimport { EditorElementProperties, Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ToolbarMenu\n  extends HTMLElement\n  implements EditorElementProperties\n{\n  private _theme: Theme = 'auto';\n  private _isOpen: boolean = false;\n  private _justOpened: boolean = false;\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['label', 'icon', 'theme', 'disabled'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n    this.bindEvents();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n\n        .button {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 4px;\n          padding: 6px 12px;\n          border: 1px solid transparent;\n          background: transparent;\n          color: var(--text-color, #333);\n          font-family: inherit;\n          font-size: inherit;\n          cursor: pointer;\n          border-radius: 3px;\n          min-height: 24px;\n          transition: all 0.15s ease;\n          text-overflow: ellipsis;\n          overflow: hidden;\n        }\n\n        .button:hover {\n          background: var(--button-hover-bg, rgba(0, 0, 0, 0.1));\n        }\n\n        .button:active,\n        .button.open {\n          background: var(--button-active-bg, rgba(0, 0, 0, 0.2));\n        }\n\n        .button:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        :host(.theme-dark) .button {\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host(.theme-dark) .button:hover {\n          background: var(--button-hover-bg-dark, rgba(255, 255, 255, 0.1));\n        }\n\n        :host(.theme-dark) .button:active,\n        :host(.theme-dark) .button.open {\n          background: var(--button-active-bg-dark, rgba(255, 255, 255, 0.2));\n        }\n\n        .icon {\n          width: 16px;\n          height: 16px;\n          flex-shrink: 0;\n        }\n\n        .label {\n          white-space: nowrap;\n        }\n\n        .dropdown-arrow {\n          width: 0;\n          height: 0;\n          border-left: 4px solid transparent;\n          border-right: 4px solid transparent;\n          border-top: 4px solid currentColor;\n          margin-left: 4px;\n          flex-shrink: 0;\n        }\n\n        .dropdown {\n          position: absolute;\n          top: 100%;\n          left: 0;\n          z-index: 9999;\n          display: none;\n          min-width: 180px;\n          background: var(--context-menu-bg, #ffffff);\n          border: 1px solid var(--context-menu-border, #d0d0d0);\n          border-radius: 4px;\n          box-shadow: var(--context-menu-shadow, 0 2px 8px rgba(0, 0, 0, 0.15));\n          padding: 4px 0;\n          font-family: inherit;\n          font-size: 14px;\n          margin-top: 2px;\n        }\n\n        .dropdown.open {\n          display: block;\n        }\n\n        :host(.theme-light) .dropdown {\n          background: var(--context-menu-bg-light, #ffffff);\n          border-color: var(--context-menu-border-light, #d0d0d0);\n          box-shadow: var(--context-menu-shadow-light, 0 2px 8px rgba(0, 0, 0, 0.15));\n        }\n\n        :host(.theme-dark) .dropdown {\n          background: var(--context-menu-bg-dark, #2a2a2a);\n          border-color: var(--context-menu-border-dark, #444444);\n          box-shadow: var(--context-menu-shadow-dark, 0 2px 8px rgba(0, 0, 0, 0.4));\n        }\n\n        @media (prefers-color-scheme: dark) {\n          :host(.theme-auto) .dropdown {\n            background: var(--context-menu-bg-dark, #2a2a2a);\n            border-color: var(--context-menu-border-dark, #444444);\n            box-shadow: var(--context-menu-shadow-dark, 0 2px 8px rgba(0, 0, 0, 0.4));\n          }\n        }\n\n        ::slotted(*) {\n          display: block;\n        }\n      </style>\n      <button class=\"button\">\n        <span class=\"icon\" style=\"display: none;\"></span>\n        <span class=\"label\"></span>\n        <div class=\"dropdown-arrow\"></div>\n      </button>\n      <div class=\"dropdown\">\n        <slot></slot>\n      </div>\n    `;\n\n    const button = shadowRoot.querySelector('.button')!;\n    button.addEventListener('click', this.handleButtonClick.bind(this));\n  }\n\n  private bindEvents(): void {\n    // Close menu when clicking outside\n    document.addEventListener('click', this.handleDocumentClick.bind(this));\n\n    // Close menu on escape key\n    document.addEventListener('keydown', this.handleKeyDown.bind(this));\n\n    // Handle window resize\n    window.addEventListener('resize', this.handleWindowResize.bind(this));\n\n    // Listen for item clicks to close menu\n    this.addEventListener('click', this.handleItemClick.bind(this));\n  }\n\n  connectedCallback(): void {\n    if (!this.id) {\n      this.id = generateId('toolbar-menu');\n    }\n    this.updateContent();\n\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'label':\n      case 'icon':\n        this.updateContent();\n        break;\n      case 'theme':\n        // If theme attribute is being set, use explicit theme\n        // If theme attribute is being removed, switch to inheritance\n        if (newValue) {\n          this.theme = newValue as Theme;\n        } else if (this.isConnected) {\n          // Attribute was removed, switch to inheritance\n          applyEffectiveTheme(this);\n          this._themeCleanup = setupThemeInheritance(this);\n        }\n        break;\n      case 'disabled':\n        this.updateDisabled();\n        break;\n    }\n  }\n\n  private updateContent(): void {\n    const shadowRoot = this.shadowRoot!;\n    const iconSpan = shadowRoot.querySelector('.icon') as HTMLSpanElement;\n    const labelSpan = shadowRoot.querySelector('.label') as HTMLSpanElement;\n\n    const icon = this.getAttribute('icon');\n    const label = this.getAttribute('label') || '';\n\n    if (icon) {\n      iconSpan.textContent = icon;\n      iconSpan.style.display = 'inline-block';\n    } else {\n      iconSpan.style.display = 'none';\n    }\n\n    labelSpan.textContent = label;\n  }\n\n  private updateDisabled(): void {\n    const button = this.shadowRoot!.querySelector(\n      '.button'\n    )! as HTMLButtonElement;\n    button.disabled = this.hasAttribute('disabled');\n\n    if (this.hasAttribute('disabled') && this._isOpen) {\n      this.close();\n    }\n  }\n\n  private handleButtonClick(event: Event): void {\n    if (this.hasAttribute('disabled')) return;\n\n    event.stopPropagation();\n\n    if (this._isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  private handleDocumentClick(event: MouseEvent): void {\n    if (!this._isOpen) return;\n\n    // Ignore the click that just opened the menu\n    if (this._justOpened) {\n      this._justOpened = false;\n      return;\n    }\n\n    const target = event.target as Node;\n    if (!this.contains(target) && !this.shadowRoot?.contains(target)) {\n      this.close();\n    }\n  }\n\n  private handleKeyDown(event: KeyboardEvent): void {\n    if (!this._isOpen) return;\n\n    switch (event.key) {\n      case 'Escape':\n        event.preventDefault();\n        this.close();\n        break;\n      case 'ArrowDown':\n        event.preventDefault();\n        this.focusNextItem();\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        this.focusPreviousItem();\n        break;\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        this.activateFocusedItem();\n        break;\n    }\n  }\n\n  private handleWindowResize(): void {\n    if (this._isOpen) {\n      this.close();\n    }\n  }\n\n  private handleItemClick(event: Event): void {\n    // Close menu when any item is clicked\n    const target = event.target as HTMLElement;\n    if (\n      target.tagName === 'E2-CONTEXT-MENU-ITEM' ||\n      target.closest('e2-context-menu-item')\n    ) {\n      // Small delay to allow the item click event to be processed first\n      setTimeout(() => this.close(), 0);\n    }\n  }\n\n  private focusNextItem(): void {\n    const items = this.querySelectorAll('e2-context-menu-item:not([disabled])');\n    const currentIndex = Array.from(items).findIndex(\n      item => item === document.activeElement || item.shadowRoot?.activeElement\n    );\n\n    const nextIndex = currentIndex < items.length - 1 ? currentIndex + 1 : 0;\n    (items[nextIndex] as HTMLElement).focus();\n  }\n\n  private focusPreviousItem(): void {\n    const items = this.querySelectorAll('e2-context-menu-item:not([disabled])');\n    const currentIndex = Array.from(items).findIndex(\n      item => item === document.activeElement || item.shadowRoot?.activeElement\n    );\n\n    const prevIndex = currentIndex > 0 ? currentIndex - 1 : items.length - 1;\n    (items[prevIndex] as HTMLElement).focus();\n  }\n\n  private activateFocusedItem(): void {\n    const focused = document.activeElement;\n    if (focused && focused.tagName === 'E2-CONTEXT-MENU-ITEM') {\n      (focused as any).click();\n    }\n  }\n\n  private adjustPosition(): void {\n    const dropdown = this.shadowRoot!.querySelector('.dropdown') as HTMLElement;\n    const rect = this.getBoundingClientRect();\n    const dropdownRect = dropdown.getBoundingClientRect();\n\n    // Check if dropdown would go off the right edge of the viewport\n    if (rect.left + dropdownRect.width > window.innerWidth) {\n      dropdown.style.left = 'auto';\n      dropdown.style.right = '0';\n    } else {\n      dropdown.style.left = '0';\n      dropdown.style.right = 'auto';\n    }\n\n    // Check if dropdown would go off the bottom edge of the viewport\n    if (rect.bottom + dropdownRect.height > window.innerHeight) {\n      dropdown.style.top = 'auto';\n      dropdown.style.bottom = '100%';\n      dropdown.style.marginTop = '0';\n      dropdown.style.marginBottom = '2px';\n    } else {\n      dropdown.style.top = '100%';\n      dropdown.style.bottom = 'auto';\n      dropdown.style.marginTop = '2px';\n      dropdown.style.marginBottom = '0';\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n\n    // Clean up any existing theme inheritance\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n\n    this.applyTheme(value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n\n    // Apply theme to all child context menu items and separators\n    const childItems = this.querySelectorAll(\n      'e2-context-menu-item, e2-context-menu-separator'\n    );\n    childItems.forEach(child => {\n      if (typeof (child as any).applyTheme === 'function') {\n        (child as any).applyTheme(theme);\n      }\n    });\n  }\n\n  get label(): string {\n    return this.getAttribute('label') || '';\n  }\n\n  set label(value: string) {\n    this.setAttribute('label', value);\n  }\n\n  get icon(): string {\n    return this.getAttribute('icon') || '';\n  }\n\n  set icon(value: string) {\n    this.setAttribute('icon', value);\n  }\n\n  get isOpen(): boolean {\n    return this._isOpen;\n  }\n\n  open(): void {\n    if (this.hasAttribute('disabled') || this._isOpen) return;\n\n    // Close other toolbar menus in the same toolbar\n    const parentToolbar = this.closest('e2-toolbar');\n    if (\n      parentToolbar &&\n      typeof (parentToolbar as any).closeAllMenus === 'function'\n    ) {\n      (parentToolbar as any).closeAllMenus(this);\n    }\n\n    this._isOpen = true;\n    const button = this.shadowRoot!.querySelector('.button')!;\n    const dropdown = this.shadowRoot!.querySelector('.dropdown')!;\n\n    button.classList.add('open');\n    dropdown.classList.add('open');\n\n    // Adjust position to stay within viewport\n    this.adjustPosition();\n\n    // Set the flag to prevent immediate closing\n    this._justOpened = true;\n\n    // Ensure all child items have the correct theme\n    this.applyTheme(this._theme);\n\n    // Dispatch show event\n    const showEvent = new CustomEvent('toolbar-menu-show', {\n      detail: {\n        menuId: this.id,\n        menu: this,\n      },\n      bubbles: true,\n      cancelable: true,\n    });\n\n    this.dispatchEvent(showEvent);\n  }\n\n  close(): void {\n    if (!this._isOpen) return;\n\n    this._isOpen = false;\n    const button = this.shadowRoot!.querySelector('.button')!;\n    const dropdown = this.shadowRoot!.querySelector('.dropdown')!;\n\n    button.classList.remove('open');\n    dropdown.classList.remove('open');\n\n    // Dispatch hide event\n    const hideEvent = new CustomEvent('toolbar-menu-hide', {\n      detail: {\n        menuId: this.id,\n        menu: this,\n      },\n      bubbles: true,\n      cancelable: true,\n    });\n\n    this.dispatchEvent(hideEvent);\n  }\n\n  toggle(): void {\n    if (this._isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-toolbar-menu')) {\n  customElements.define('e2-toolbar-menu', ToolbarMenu);\n}\n","/**\n * Toolbar Separator Element\n * A visual separator for toolbar items\n */\n\nimport { Theme } from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  getShadowRoot,\n  notifyThemeChange,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class ToolbarSeparator extends HTMLElement {\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n\n  static get observedAttributes(): string[] {\n    return ['theme'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: inline-block;\n          width: 1px;\n          height: 24px;\n          background: var(--separator-color, #ccc);\n          margin: 0 4px;\n          flex-shrink: 0;\n        }\n\n        :host(.theme-dark) {\n          background: var(--separator-color-dark, #555);\n        }\n      </style>\n    `;\n  }\n\n  connectedCallback(): void {\n    // Set up theme inheritance if no explicit theme is set\n    if (!this.hasAttribute('theme')) {\n      applyEffectiveTheme(this);\n      this._themeCleanup = setupThemeInheritance(this);\n    } else {\n      this.applyTheme(this._theme);\n    }\n  }\n\n  disconnectedCallback(): void {\n    // Clean up theme inheritance listener\n    if (this._themeCleanup) {\n      this._themeCleanup();\n      this._themeCleanup = undefined;\n    }\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        // Clean up existing theme inheritance when explicit theme is set\n        if (this._themeCleanup) {\n          this._themeCleanup();\n          this._themeCleanup = undefined;\n        }\n        this.theme = newValue as Theme;\n        break;\n    }\n  }\n\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this._theme = value;\n    this.applyTheme(value);\n    // Notify child elements of theme change\n    notifyThemeChange(this, value);\n  }\n\n  applyTheme(theme: Theme): void {\n    applyTheme(this, theme);\n  }\n}\n\n// Register the custom element\nif (!customElements.get('e2-toolbar-separator')) {\n  customElements.define('e2-toolbar-separator', ToolbarSeparator);\n}\n","/**\n * TreeView Element\n * A hierarchical tree component supporting expand/collapse, selection, and multi-select\n */\n\nimport {\n  EditorElementProperties,\n  Theme,\n  TreeViewCollapseEvent,\n  TreeViewContext,\n  TreeViewExpandEvent,\n  TreeViewItem,\n  TreeViewItemClickEvent,\n  TreeViewItemDoubleClickEvent,\n  TreeViewSelectionChangeEvent,\n} from '../../types';\nimport {\n  applyEffectiveTheme,\n  applyTheme,\n  dispatchCustomEvent,\n  generateId,\n  getShadowRoot,\n  setupThemeInheritance,\n} from '../../utils';\n\nexport class TreeView extends HTMLElement implements EditorElementProperties {\n  private _theme: Theme = 'auto';\n  private _themeCleanup?: () => void;\n  private _items: TreeViewItem[] = [];\n  private _multiSelect: boolean = false;\n  private _selectedItems: Set<string> = new Set();\n  private _expandedItems: Set<string> = new Set();\n\n  static get observedAttributes(): string[] {\n    return ['theme', 'disabled', 'multi-select'];\n  }\n\n  constructor() {\n    super();\n    this.setupElement();\n  }\n\n  private setupElement(): void {\n    const shadowRoot = getShadowRoot(this);\n\n    shadowRoot.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          border: 1px solid var(--treeview-border, #ccc);\n          background: var(--treeview-bg, #fff);\n          font-family: var(--font-family, system-ui, sans-serif);\n          font-size: var(--font-size, 14px);\n          overflow: auto;\n          min-height: 100px;\n          box-sizing: border-box;\n        }\n\n        :host *,\n        :host *::before,\n        :host *::after {\n          box-sizing: border-box;\n        }\n\n        :host(.theme-dark) {\n          background: var(--treeview-bg-dark, #1e1e1e);\n          border-color: var(--treeview-border-dark, #555);\n          color: var(--text-color-dark, #fff);\n        }\n\n        :host([disabled]) {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        .treeview-container {\n          width: 100%;\n          height: 100%;\n          padding: 2px;\n        }\n\n        .tree-item {\n          display: block;\n          user-select: none;\n        }\n\n        .tree-item-content {\n          display: flex;\n          align-items: center;\n          padding: 2px 4px;\n          cursor: pointer;\n          border-radius: 3px;\n          min-height: 22px;\n          max-width: 100%;\n        }\n\n        .tree-item-content:hover {\n          background: var(--treeview-item-hover-bg, #f0f0f0);\n        }\n\n        :host(.theme-dark) .tree-item-content:hover {\n          background: var(--treeview-item-hover-bg-dark, #2d2d2d);\n        }\n\n        .tree-item-content.selected {\n          background: var(--treeview-item-selected-bg, #0078d4);\n          color: var(--treeview-item-selected-text, #fff);\n        }\n\n        :host(.theme-dark) .tree-item-content.selected {\n          background: var(--treeview-item-selected-bg-dark, #0078d4);\n          color: var(--treeview-item-selected-text-dark, #fff);\n        }\n\n        .tree-item-content.disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n          pointer-events: none;\n        }\n\n        .tree-item-expand {\n          width: 16px;\n          height: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 4px;\n          cursor: pointer;\n          font-size: 12px;\n          border-radius: 2px;\n          flex-shrink: 0;\n        }\n\n        .tree-item-expand:hover {\n          background: var(--treeview-expand-hover-bg, rgba(0, 0, 0, 0.1));\n        }\n\n        :host(.theme-dark) .tree-item-expand:hover {\n          background: var(--treeview-expand-hover-bg-dark, rgba(255, 255, 255, 0.1));\n        }\n\n        .tree-item-expand.has-children::before {\n          content: '▶';\n          transition: transform 0.2s ease;\n        }\n\n        .tree-item-expand.expanded::before {\n          transform: rotate(90deg);\n        }\n\n        .tree-item-icon {\n          width: 16px;\n          height: 16px;\n          margin-right: 6px;\n          flex-shrink: 0;\n          font-size: 14px;\n          text-align: center;\n          line-height: 16px;\n        }\n\n        .tree-item-label {\n          flex: 1;\n          min-width: 0;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n        }\n\n        .tree-item-children {\n          margin-left: 16px;\n          border-left: 1px dotted var(--treeview-guide-color, #ccc);\n          position: relative;\n          max-width: calc(100% - 16px);\n        }\n\n        :host(.theme-dark) .tree-item-children {\n          border-left-color: var(--treeview-guide-color-dark, #555);\n        }\n\n        .tree-item-children.collapsed {\n          display: none;\n        }\n\n        .tree-item-children::before {\n          content: '';\n          position: absolute;\n          left: -1px;\n          top: 0;\n          bottom: 0;\n          width: 1px;\n          background: var(--treeview-guide-color, #ccc);\n        }\n\n        :host(.theme-dark) .tree-item-children::before {\n          background: var(--treeview-guide-color-dark, #555);\n        }\n\n        .empty-message {\n          padding: 20px;\n          text-align: center;\n          color: var(--treeview-empty-text, #666);\n          font-style: italic;\n        }\n\n        :host(.theme-dark) .empty-message {\n          color: var(--treeview-empty-text-dark, #999);\n        }\n      </style>\n      <div class=\"treeview-container\">\n        <div class=\"tree-content\"></div>\n      </div>\n    `;\n\n    this.setupEventListeners();\n    this.setupTheme();\n  }\n\n  private setupEventListeners(): void {\n    const container = this.shadowRoot!.querySelector(\n      '.tree-content'\n    ) as HTMLElement;\n\n    container.addEventListener('click', e => {\n      this.handleClick(e);\n    });\n\n    container.addEventListener('dblclick', e => {\n      this.handleDoubleClick(e);\n    });\n\n    container.addEventListener('contextmenu', e => {\n      this.handleContextMenu(e);\n    });\n  }\n\n  private setupTheme(): void {\n    this._themeCleanup = setupThemeInheritance(this, theme => {\n      this._theme = theme;\n      applyTheme(this, theme);\n    });\n  }\n\n  private handleClick(e: Event): void {\n    const target = e.target as HTMLElement;\n\n    // Handle expand/collapse click\n    if (target.classList.contains('tree-item-expand')) {\n      e.stopPropagation();\n      const itemElement = target.closest('.tree-item') as HTMLElement;\n      const itemId = itemElement.dataset.itemId;\n      if (itemId) {\n        this.toggleExpanded(itemId);\n      }\n      return;\n    }\n\n    // Handle item selection click\n    const itemContent = target.closest('.tree-item-content') as HTMLElement;\n    if (itemContent) {\n      const itemElement = itemContent.closest('.tree-item') as HTMLElement;\n      const itemId = itemElement.dataset.itemId;\n      if (itemId) {\n        const item = this.findItemById(itemId);\n        if (item && !item.disabled) {\n          this.handleItemClick(itemId, e as MouseEvent);\n        }\n      }\n    }\n  }\n\n  private handleDoubleClick(e: Event): void {\n    const target = e.target as HTMLElement;\n    const itemContent = target.closest('.tree-item-content') as HTMLElement;\n\n    if (itemContent) {\n      const itemElement = itemContent.closest('.tree-item') as HTMLElement;\n      const itemId = itemElement.dataset.itemId;\n      if (itemId) {\n        const item = this.findItemById(itemId);\n        if (item && !item.disabled) {\n          this.dispatchItemDoubleClick(item, itemId);\n        }\n      }\n    }\n  }\n\n  private handleContextMenu(e: Event): void {\n    const mouseEvent = e as MouseEvent;\n    const target = mouseEvent.target as HTMLElement;\n\n    // Find the clicked tree item (if any)\n    const itemContent = target.closest('.tree-item-content') as HTMLElement;\n    let item: TreeViewItem | null = null;\n    let itemId: string | null = null;\n\n    if (itemContent) {\n      const itemElement = itemContent.closest('.tree-item') as HTMLElement;\n      itemId = itemElement?.dataset.itemId || null;\n      if (itemId) {\n        item = this.findItemById(itemId);\n      }\n    }\n\n    // Add component context to the event\n    const componentContext: TreeViewContext = {\n      componentType: 'tree-view',\n      componentId: this.id || generateId(),\n      component: this,\n      item,\n      itemId,\n    };\n\n    // Add the context to the event\n    (mouseEvent as any).componentContext = componentContext;\n  }\n\n  private handleItemClick(itemId: string, event: MouseEvent): void {\n    const item = this.findItemById(itemId);\n    if (!item) return;\n\n    const wasSelected = this._selectedItems.has(itemId);\n    const addedItems: TreeViewItem[] = [];\n    const removedItems: TreeViewItem[] = [];\n\n    if (this._multiSelect && (event.ctrlKey || event.metaKey)) {\n      // Toggle selection with Ctrl/Cmd\n      if (wasSelected) {\n        this._selectedItems.delete(itemId);\n        removedItems.push(item);\n      } else {\n        this._selectedItems.add(itemId);\n        addedItems.push(item);\n      }\n    } else {\n      // Single selection or clear and select\n      const previouslySelected = Array.from(this._selectedItems);\n      this._selectedItems.clear();\n\n      // Add previously selected items to removed list\n      previouslySelected.forEach(id => {\n        const prevItem = this.findItemById(id);\n        if (prevItem) removedItems.push(prevItem);\n      });\n\n      if (!wasSelected || previouslySelected.length > 1) {\n        this._selectedItems.add(itemId);\n        addedItems.push(item);\n      }\n    }\n\n    this.updateSelection();\n\n    // Dispatch events\n    this.dispatchSelectionChange(addedItems, removedItems);\n    this.dispatchItemClick(item, itemId, event);\n  }\n\n  private toggleExpanded(itemId: string): void {\n    const item = this.findItemById(itemId);\n    if (!item || !item.children || item.children.length === 0) return;\n\n    const wasExpanded = this._expandedItems.has(itemId);\n\n    if (wasExpanded) {\n      this._expandedItems.delete(itemId);\n      this.dispatchCollapseEvent(item, itemId);\n    } else {\n      this._expandedItems.add(itemId);\n      this.dispatchExpandEvent(item, itemId);\n    }\n\n    this.render();\n  }\n\n  private findItemById(\n    id: string,\n    items: TreeViewItem[] = this._items\n  ): TreeViewItem | null {\n    for (const item of items) {\n      if (item.id === id) return item;\n      if (item.children) {\n        const found = this.findItemById(id, item.children);\n        if (found) return found;\n      }\n    }\n    return null;\n  }\n\n  private updateSelection(): void {\n    const allItems = this.shadowRoot!.querySelectorAll('.tree-item-content');\n    allItems.forEach(element => {\n      const itemElement = element.closest('.tree-item') as HTMLElement;\n      const itemId = itemElement.dataset.itemId;\n      if (itemId) {\n        element.classList.toggle('selected', this._selectedItems.has(itemId));\n      }\n    });\n  }\n\n  private render(): void {\n    const container = this.shadowRoot!.querySelector(\n      '.tree-content'\n    ) as HTMLElement;\n\n    if (this._items.length === 0) {\n      container.innerHTML =\n        '<div class=\"empty-message\">No items to display</div>';\n      return;\n    }\n\n    container.innerHTML = this.renderItems(this._items);\n  }\n\n  private renderItems(items: TreeViewItem[], level: number = 0): string {\n    return items.map(item => this.renderItem(item, level)).join('');\n  }\n\n  private renderItem(item: TreeViewItem, level: number): string {\n    const hasChildren = item.children && item.children.length > 0;\n    const isExpanded = this._expandedItems.has(item.id);\n    const isSelected = this._selectedItems.has(item.id);\n    const isDisabled = item.disabled;\n\n    let html = `\n      <div class=\"tree-item\" data-item-id=\"${item.id}\">\n        <div class=\"tree-item-content ${isSelected ? 'selected' : ''} ${\n      isDisabled ? 'disabled' : ''\n    }\">\n          <div class=\"tree-item-expand ${hasChildren ? 'has-children' : ''} ${\n      isExpanded ? 'expanded' : ''\n    }\"></div>\n    `;\n\n    if (item.icon) {\n      html += `<div class=\"tree-item-icon\">${item.icon}</div>`;\n    }\n\n    html += `\n          <div class=\"tree-item-label\">${this.escapeHtml(item.label)}</div>\n        </div>\n    `;\n\n    if (hasChildren) {\n      html += `\n        <div class=\"tree-item-children ${isExpanded ? '' : 'collapsed'}\">\n          ${this.renderItems(item.children!, level + 1)}\n        </div>\n      `;\n    }\n\n    html += '</div>';\n    return html;\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  // Event dispatchers\n  private dispatchExpandEvent(item: TreeViewItem, itemId: string): void {\n    dispatchCustomEvent<TreeViewExpandEvent['detail']>(this, 'tree-expand', {\n      treeViewId: this.id || generateId(),\n      treeView: this,\n      item,\n      itemId,\n    });\n  }\n\n  private dispatchCollapseEvent(item: TreeViewItem, itemId: string): void {\n    dispatchCustomEvent<TreeViewCollapseEvent['detail']>(\n      this,\n      'tree-collapse',\n      {\n        treeViewId: this.id || generateId(),\n        treeView: this,\n        item,\n        itemId,\n      }\n    );\n  }\n\n  private dispatchSelectionChange(\n    addedItems: TreeViewItem[],\n    removedItems: TreeViewItem[]\n  ): void {\n    const selectedItems = Array.from(this._selectedItems)\n      .map(id => this.findItemById(id)!)\n      .filter(Boolean);\n\n    dispatchCustomEvent<TreeViewSelectionChangeEvent['detail']>(\n      this,\n      'tree-selection-change',\n      {\n        treeViewId: this.id || generateId(),\n        treeView: this,\n        selectedItems,\n        selectedIds: Array.from(this._selectedItems),\n        addedItems,\n        removedItems,\n      }\n    );\n  }\n\n  private dispatchItemClick(\n    item: TreeViewItem,\n    itemId: string,\n    event: MouseEvent\n  ): void {\n    dispatchCustomEvent<TreeViewItemClickEvent['detail']>(\n      this,\n      'tree-item-click',\n      {\n        treeViewId: this.id || generateId(),\n        treeView: this,\n        item,\n        itemId,\n        ctrlKey: event.ctrlKey,\n        shiftKey: event.shiftKey,\n        altKey: event.altKey,\n      }\n    );\n  }\n\n  private dispatchItemDoubleClick(item: TreeViewItem, itemId: string): void {\n    dispatchCustomEvent<TreeViewItemDoubleClickEvent['detail']>(\n      this,\n      'tree-item-dblclick',\n      {\n        treeViewId: this.id || generateId(),\n        treeView: this,\n        item,\n        itemId,\n      }\n    );\n  }\n\n  // Attribute change handler\n  attributeChangedCallback(\n    name: string,\n    oldValue: string,\n    newValue: string\n  ): void {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'theme':\n        this._theme = (newValue as Theme) || 'auto';\n        applyEffectiveTheme(this);\n        break;\n      case 'disabled':\n        // Handled via CSS\n        break;\n      case 'multi-select':\n        this._multiSelect = newValue !== null;\n        if (!this._multiSelect) {\n          // Clear multiple selections if multi-select is disabled\n          const selected = Array.from(this._selectedItems);\n          if (selected.length > 1) {\n            const firstSelected = selected[0];\n            this._selectedItems.clear();\n            this._selectedItems.add(firstSelected);\n            this.updateSelection();\n          }\n        }\n        break;\n    }\n  }\n\n  // Public API\n  get theme(): Theme {\n    return this._theme;\n  }\n\n  set theme(value: Theme) {\n    this.setAttribute('theme', value);\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '');\n    } else {\n      this.removeAttribute('disabled');\n    }\n  }\n\n  get multiSelect(): boolean {\n    return this._multiSelect;\n  }\n\n  set multiSelect(value: boolean) {\n    if (value) {\n      this.setAttribute('multi-select', '');\n    } else {\n      this.removeAttribute('multi-select');\n    }\n  }\n\n  get items(): TreeViewItem[] {\n    return [...this._items];\n  }\n\n  set items(value: TreeViewItem[]) {\n    this._items = value || [];\n    this._selectedItems.clear();\n    this._expandedItems.clear();\n\n    // Restore expanded and selected states from item data\n    this.restoreItemStates(this._items);\n\n    this.render();\n  }\n\n  private restoreItemStates(items: TreeViewItem[]): void {\n    for (const item of items) {\n      if (item.expanded) {\n        this._expandedItems.add(item.id);\n      }\n      if (item.selected) {\n        this._selectedItems.add(item.id);\n      }\n      if (item.children) {\n        this.restoreItemStates(item.children);\n      }\n    }\n  }\n\n  get selectedItems(): TreeViewItem[] {\n    return Array.from(this._selectedItems)\n      .map(id => this.findItemById(id)!)\n      .filter(Boolean);\n  }\n\n  get selectedIds(): string[] {\n    return Array.from(this._selectedItems);\n  }\n\n  // Methods\n  selectItem(itemId: string): void {\n    if (!this._multiSelect) {\n      this._selectedItems.clear();\n    }\n    this._selectedItems.add(itemId);\n    this.updateSelection();\n  }\n\n  deselectItem(itemId: string): void {\n    this._selectedItems.delete(itemId);\n    this.updateSelection();\n  }\n\n  clearSelection(): void {\n    this._selectedItems.clear();\n    this.updateSelection();\n  }\n\n  expandItem(itemId: string): void {\n    const item = this.findItemById(itemId);\n    if (item && item.children && item.children.length > 0) {\n      this._expandedItems.add(itemId);\n      this.render();\n    }\n  }\n\n  collapseItem(itemId: string): void {\n    this._expandedItems.delete(itemId);\n    this.render();\n  }\n\n  expandAll(): void {\n    const addAllIds = (items: TreeViewItem[]) => {\n      for (const item of items) {\n        if (item.children && item.children.length > 0) {\n          this._expandedItems.add(item.id);\n          addAllIds(item.children);\n        }\n      }\n    };\n    addAllIds(this._items);\n    this.render();\n  }\n\n  collapseAll(): void {\n    this._expandedItems.clear();\n    this.render();\n  }\n\n  disconnectedCallback(): void {\n    if (this._themeCleanup) {\n      this._themeCleanup();\n    }\n  }\n}\n\n// Register the custom element\ncustomElements.define('e2-tree-view', TreeView);\n","/**\n * E2 - A collection of custom HTML elements for building editors\n *\n * This library provides a set of reusable UI components designed specifically\n * for creating level editors, sprite editors, and similar desktop-like web applications.\n */\n\n// Import and register all custom elements\nimport './elements/app/app';\nimport './elements/contextmenu/context-menu';\nimport './elements/contextmenu/context-menu-item';\nimport './elements/contextmenu/context-menu-separator';\nimport './elements/dialog/alert';\nimport './elements/dialog/confirm';\nimport './elements/dialog/dialog';\nimport './elements/dialog/prompt';\nimport './elements/keyvalue/keyvalue-editor';\nimport './elements/listview/list-view';\nimport './elements/notification/notification';\nimport './elements/notification/notification-container';\nimport './elements/panel/collapsible-panel';\nimport './elements/panel/split-panel';\nimport './elements/panel/split-panel-container';\nimport './elements/statusbar/status-bar';\nimport './elements/statusbar/status-item';\nimport './elements/statusbar/status-section';\nimport './elements/tabs/tab';\nimport './elements/tabs/tab-container';\nimport './elements/tabs/tab-panel';\nimport './elements/toolbar/toolbar';\nimport './elements/toolbar/toolbar-button';\nimport './elements/toolbar/toolbar-menu';\nimport './elements/toolbar/toolbar-separator';\nimport './elements/treeview/tree-view';\n\n// Export types and interfaces for TypeScript users\nexport * from './types';\n\n// Export utility functions if any\nexport * from './utils';\n\n// Version information\nexport const VERSION = '1.0.0';\n\n// Auto-registration message for development\nif (typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {\n  console.log(\n    `E2 v${VERSION} loaded - Custom elements registered automatically`\n  );\n}\n"],"names":["root","factory","exports","module","define","amd","this","helpers","ValidatorResult","SchemaError","attribute","validators","testSchemaNoThrow","instance","options","ctx","callback","schema","throwError","throwAll","res","validateSchema","valid","Function","getEnumerableProperty","object","key","Object","hasOwnProperty","call","getPrototypeOf","propertyIsEnumerable","testAdditionalProperty","property","result","types","properties","undefined","additionalProperties","addError","name","argument","message","JSON","stringify","preValidateProperty","makeChild","importErrors","type","Array","isArray","some","testType","bind","list","map","v","id","$id","anyOf","inner","i","title","nestedErrors","join","allOf","self","forEach","msg","length","errors","oneOf","count","filter","if","isSchema","Error","ifValid","then","else","propertyNames","subschema","prop","patternProperties","test","pattern","regexp","RegExp","_e","minProperties","keys","maxProperties","items","array","every","value","additionalItems","contains","minimum","number","exclusiveMinimum","maximum","exclusiveMaximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","getDecimalPlaces","divisorDecimals","maxDecimals","Math","max","multiplier","pow","round","testArrays","a","j","len","deepCompareStrict","multipleOf","divisibleBy","required","n","string","match","toString","format","disableFormat","isFormat","minLength","hsp","maxLength","minItems","maxItems","uniqueItems","dependencies","dep","childContext","propertyPath","String","not","disallow","notTypes","schemaId","Validator","scanSchema","ValidatorResultError","SchemaContext","customFormats","create","prototype","schemas","unresolvedRefs","attributes","shouldResolve","ref","$ref","addSchema","base","scan","ourUri","uri","push","addSubSchemaArray","baseuri","addSubSchema","addSubSchemaObject","p","setSchemas","getSchema","urn","validate","resolveUrl","found","sch","schemaobj","schemaTraverser","deepMerge","superResolve","switchSchema","resolved","resolve","subctx","path","skipAttributes","ignoreProperties","indexOf","validatorErr","validator","allowUnknownAttributes","rewrite","s","fragment","URL","hash","document","substr","objectGetPath","isFinite","integer","boolean","date","Date","any","ValidationError","reduce","sum","item","makeSuffix","stack","throwFirst","stringizer","captureStackTrace","detail","err","validatorType","concat","defineProperty","get","constructor","enumerable","target","propertyName","FORMAT_REGEXPS","input","parseFloat","parseInt","isNaN","e","regex","ipv4","deepMerger","dst","copyist","src","copyistWithDeepMerge","pathEncoder","encodeURIComponent","replace","b","aKeys","bKeys","o","k","parts","split","slice","shift","decodeURIComponent","encodePath","decimalPlaces","Number","decimalParts","val","from","to","resolvedUrl","protocol","pathname","search","SchemaScanResult","resolvedUri","resolvedBase","ourBase","substring","scanArray","extends","scanObject","definitions","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","obj","r","Symbol","toStringTag","generateId","prefix","random","dispatchCustomEvent","element","eventName","event","CustomEvent","bubbles","cancelable","dispatchEvent","addGlobalCSS","css","getElementById","style","createElement","textContent","head","appendChild","createTemplate","html","template","innerHTML","trim","getShadowRoot","mode","shadowRoot","attachShadow","debounce","func","wait","timeout","args","clearTimeout","window","setTimeout","isElementVisible","rect","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","findParentApp","current","parentElement","tagName","toLowerCase","getEffectiveTheme","explicitTheme","getAttribute","includes","parentApp","parentTheme","applyTheme","theme","classList","remove","add","applyEffectiveTheme","setupThemeInheritance","onThemeChange","handleAppThemeChange","hasAttribute","newTheme","addEventListener","removeEventListener","notifyThemeChange","appElement","initializeThemeInheritance","currentTheme","handleThemeChange","themeCleanupRef","isConnected","createToast","notification","container","dismissible","persistent","querySelector","body","existingContainer","defaultContainer","position","show","parentNode","removeChild","Toast","info","success","warning","error","E2App","HTMLElement","observedAttributes","super","_theme","_stylesInitialized","setupElement","styleElement","connectedCallback","setupAutoTheme","disconnectedCallback","mediaQueryList","matchMedia","attributeChangedCallback","oldValue","newValue","oldTheme","setCSSVariable","setProperty","getCSSVariable","getComputedStyle","getPropertyValue","customElements","ContextMenu","_visible","_justShown","boundContextMenuHandler","handleContextMenu","bindEvents","handleDocumentClick","handleKeyDown","handleWindowResize","_themeCleanup","setupTargetListeners","removeTargetListeners","hide","targetSelector","querySelectorAll","disabled","mouseEvent","preventDefault","stopPropagation","trigger","currentTarget","componentContext","clientX","clientY","focusNextItem","focusPreviousItem","activateFocusedItem","currentIndex","findIndex","activeElement","focus","focused","click","setAttribute","removeAttribute","visible","x","y","adjustPosition","requestAnimationFrame","firstItem","eventDetail","menuId","menu","viewportWidth","viewportHeight","width","height","child","ContextMenuItem","button","handleClick","tabIndex","handleFocus","updateContent","updateDisabledState","iconElement","labelElement","shortcutElement","icon","display","label","shortcut","contextMenu","closest","itemId","Event","ContextMenuSeparator","_value","AlertDialogElement","_nativeDialog","_resolvePromise","_rejectPromise","handleClose","handleCancel","close","titleElement","messageElement","buttonElement","getDefaultTitle","className","getIconForType","dialogId","dialog","buttonText","open","Promise","reject","showModal","ConfirmDialogElement","confirmButton","cancelButton","confirm","cancel","confirmed","confirmText","cancelText","danger","DialogElement","closeButton","updateTitle","updateClosable","updateSize","closable","returnValue","modal","PromptDialogElement","handleInput","handleKeydown","inputElement","multiline","currentType","textarea","replaceChild","setupInputElement","placeholder","defaultValue","HTMLInputElement","validateInput","shiftKey","isValid","toggle","select","KeyValueEditorElement","_valueProxy","_schema","_readonly","_compact","_headerTitle","_validationErrors","_validator","setupValueProxy","Proxy","set","dispatchChangeEvent","render","validateField","deleteProperty","content","header","headerText","renderFields","fields","entries","fieldSchema","renderField","renderNestedField","formatLabel","description","find","inputType","getInputType","inputId","renderInput","renderNestedFields","errorClass","min","step","rangeMin","rangeMax","rangeStep","emailPattern","telPattern","enum","option","formatEnumOption","maxLengthAttr","str","toUpperCase","isInteger","startsWith","validateValue","tempObject","tempSchema","formatValidationError","expectedType","updateValue","getValue","setValue","setSchema","validationResult","focusField","readonly","compact","headerTitle","ListView","_items","_columns","_viewMode","_multiSelect","_selectedItems","Set","_lastSelectedIndex","setupEventHandlers","handleItemClick","handleItemDoubleClick","itemElement","dataset","ctrlKey","altKey","handleItemSelection","listViewId","listView","itemIndex","previousSelection","start","end","clear","has","delete","updateItemElements","dispatchSelectionChange","selectedItems","addedItems","removedItems","selectedIds","renderHeader","renderContent","headerRow","column","cell","columnId","flex","itemsContainer","emptyState","createItemElement","data","renderer","viewMode","multiSelect","columns","selectItem","deselectItem","selectAll","deselectAll","toggleItemSelection","setSelectedItems","itemIds","scrollToItem","scrollIntoView","behavior","block","getItem","addItem","removeItem","index","splice","updateItem","updates","assign","refresh","NotificationElement","_timeoutId","setupEventListeners","handleCloseClick","handleNotificationClick","dismiss","notificationId","startTimeout","progressBar","transitionDuration","NotificationContainerElement","_observer","setupMutationObserver","MutationObserver","mutations","mutation","manageNotifications","updateNotificationPositions","observe","childList","subtree","notifications","maxNotifications","excess","containerId","zIndex","disconnect","stackDirection","spacing","addNotification","removeNotification","notificationElement","getNotificationCount","CollapsiblePanel","_collapsed","_orientation","_resizeLeft","_resizeRight","_resizeTop","_resizeBottom","_minWidth","_maxWidth","_minHeight","_maxHeight","_resizing","_resizeEdge","_startPosition","_startSize","_storedSize","handleToggle","handleMouseDown","handleMouseMove","handleMouseUp","handleMouseLeave","wasCollapsed","handleCollapsedChange","collapsed","panelId","panel","orientation","offsetWidth","offsetHeight","resizeEdge","getResizeEdge","cursor","getCursorForEdge","handleDocumentMouseMove","handleDocumentMouseUp","startWidth","startHeight","edge","endResize","deltaX","deltaY","newWidth","newHeight","finalWidth","finalHeight","expand","collapse","resizeLeft","toggleAttribute","resizeRight","resizeTop","resizeBottom","minWidth","maxWidth","minHeight","maxHeight","SplitPanel","_size","_minSize","_maxSize","_resizable","handleResize","size","minSize","maxSize","resizable","getCurrentSize","containerHeight","containerWidth","SplitPanelContainer","_activePanel","_nextPanelStartSize","_updatingPanelSizes","debouncedResize","updateHandles","updatePanelSizes","panels","getPanels","containerRect","handleSize","totalHandleSpace","availableSpace","totalSetSize","unsetPanels","remainingPercentage","defaultSize","actualSize","flexBasis","panelIndex","currentPanel","nextPanel","relativeX","relativeY","onBorder","borderStart","borderEnd","startSize","delta","deltaPercentage","newCurrentSize","newNextSize","updateHoverCursor","overHandle","finalSize","resizePanel","getPanelSizes","sizes","resetPanelSizes","equalSize","StatusBar","_temporaryMessageTimeout","showMessage","duration","messageEl","textEl","temporary","hideMessage","getItemsInSection","section","slot","children","clearSection","StatusItem","_type","_label","_clickable","updateDisplay","itemType","iconEl","labelEl","valueEl","progressContainer","progressFill","progressText","updateProgressDisplay","fill","text","numValue","percentage","clickable","setProgress","progress","setIcon","StatusSection","_position","priority","firstChild","getItems","getItemsByPriority","Tab","_active","_closable","_icon","tabId","tab","MouseEvent","active","_pendingSetup","setup","TabContainer","_activeTabId","_tabPosition","handleTabClick","handleTabClose","tabSlot","panelSlot","updateTabsAndPanels","tabElement","selectTab","matches","removeTab","panelElement","previousTabId","effectiveTheme","activeTabId","activePanelId","remainingTabs","nextTab","nextPanelId","refreshThemes","tabs","console","warn","correspondingPanel","activeTabElement","selectTabById","addTab","finalTabId","finalPanelId","removeTabById","tabPosition","TabPanel","scrollToTop","scrollTop","scrollToBottom","scrollHeight","scrollToElement","clearContent","setContent","appendContent","insertAdjacentHTML","prependContent","loading","emptyMessage","Toolbar","closeAllMenus","exceptMenu","ToolbarButton","updateDisabled","updateActive","iconSpan","labelSpan","customEvent","buttonId","ToolbarMenu","_isOpen","_justOpened","handleButtonClick","dropdown","dropdownRect","marginTop","marginBottom","isOpen","parentToolbar","showEvent","hideEvent","ToolbarSeparator","TreeView","_expandedItems","setupTheme","handleDoubleClick","toggleExpanded","itemContent","findItemById","dispatchItemDoubleClick","componentType","componentId","component","wasSelected","metaKey","previouslySelected","prevItem","updateSelection","dispatchItemClick","dispatchCollapseEvent","dispatchExpandEvent","renderItems","level","renderItem","hasChildren","isExpanded","isSelected","isDisabled","escapeHtml","div","treeViewId","treeView","Boolean","selected","firstSelected","restoreItemStates","expanded","clearSelection","expandItem","collapseItem","expandAll","addAllIds","collapseAll","VERSION"],"sourceRoot":""}