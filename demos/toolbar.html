<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E2 - Editor Elements - Toolbar Demo</title>
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <div class="theme-controls">
      <button class="theme-button active" onclick="setTheme('light')">
        Light
      </button>
      <button class="theme-button" onclick="setTheme('dark')">Dark</button>
      <button class="theme-button" onclick="setTheme('auto')">Auto</button>
    </div>

    <header>
      <h1>
        <a href="index.html" style="text-decoration: none; color: inherit">
          &laquo;
        </a>
        E2 - Toolbar Demo
      </h1>
      <p>
        Interactive demonstration of the <code>&lt;e2-toolbar&gt;</code> element
      </p>
    </header>

    <main>
      <div class="demo-section">
        <h2>Toolbar Components</h2>
        <p>Toolbar with buttons and separators:</p>

        <e2-toolbar class="demo-toolbar">
          <e2-toolbar-button
            label="New"
            icon="📄"
            id="btn-new"
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Open"
            icon="📁"
            id="btn-open"
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Save"
            icon="💾"
            id="btn-save"
          ></e2-toolbar-button>
          <input type="number" value="42" style="width: 60px" />
          <e2-toolbar-separator></e2-toolbar-separator>
          <e2-toolbar-button
            label="Cut"
            icon="✂️"
            id="btn-cut"
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Copy"
            icon="📋"
            id="btn-copy"
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Paste"
            icon="📌"
            id="btn-paste"
          ></e2-toolbar-button>
          <e2-toolbar-separator></e2-toolbar-separator>
          <e2-toolbar-button
            label="Play"
            icon="▶️"
            id="btn-play"
            active
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Stop"
            icon="⏹️"
            id="btn-stop"
            disabled
          ></e2-toolbar-button>
        </e2-toolbar>
      </div>

      <div class="demo-section">
        <h2>Toolbar Menu Example</h2>
        <p>Toolbar with dropdown menus (menu bar style):</p>

        <e2-toolbar class="demo-toolbar">
          <e2-toolbar-menu label="File" id="file-menu">
            <e2-context-menu-item
              label="New File"
              icon="📄"
              value="new"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Open File"
              icon="📁"
              value="open"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Recent Files"
              icon="📋"
              value="recent"
            ></e2-context-menu-item>
            <e2-context-menu-separator></e2-context-menu-separator>
            <e2-context-menu-item
              label="Save"
              icon="💾"
              value="save"
              shortcut="Ctrl+S"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Save As..."
              value="save-as"
              shortcut="Ctrl+Shift+S"
            ></e2-context-menu-item>
            <e2-context-menu-separator></e2-context-menu-separator>
            <e2-context-menu-item
              label="Exit"
              value="exit"
              shortcut="Alt+F4"
            ></e2-context-menu-item>
          </e2-toolbar-menu>

          <e2-toolbar-menu label="Edit" id="edit-menu">
            <e2-context-menu-item
              label="Undo"
              icon="↶"
              value="undo"
              shortcut="Ctrl+Z"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Redo"
              icon="↷"
              value="redo"
              shortcut="Ctrl+Y"
            ></e2-context-menu-item>
            <e2-context-menu-separator></e2-context-menu-separator>
            <e2-context-menu-item
              label="Cut"
              icon="✂️"
              value="cut"
              shortcut="Ctrl+X"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Copy"
              icon="📋"
              value="copy"
              shortcut="Ctrl+C"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Paste"
              icon="📌"
              value="paste"
              shortcut="Ctrl+V"
            ></e2-context-menu-item>
          </e2-toolbar-menu>

          <e2-toolbar-menu label="View" id="view-menu">
            <e2-context-menu-item
              label="Zoom In"
              icon="🔍"
              value="zoom-in"
              shortcut="Ctrl+="
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Zoom Out"
              icon="🔍"
              value="zoom-out"
              shortcut="Ctrl+-"
            ></e2-context-menu-item>
            <e2-context-menu-item
              label="Reset Zoom"
              value="zoom-reset"
              shortcut="Ctrl+0"
            ></e2-context-menu-item>
            <e2-context-menu-separator></e2-context-menu-separator>
            <e2-context-menu-item
              label="Full Screen"
              value="fullscreen"
              shortcut="F11"
            ></e2-context-menu-item>
          </e2-toolbar-menu>

          <e2-toolbar-separator></e2-toolbar-separator>

          <e2-toolbar-button
            label="Play"
            icon="▶️"
            id="btn-play-2"
          ></e2-toolbar-button>
        </e2-toolbar>
      </div>

      <div class="demo-section">
        <h2>Dark Theme Example</h2>
        <p>Toolbar with dark theme:</p>

        <e2-toolbar theme="dark" class="demo-toolbar">
          <e2-toolbar-button
            label="Undo"
            icon="↶"
            theme="dark"
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Redo"
            icon="↷"
            theme="dark"
          ></e2-toolbar-button>
          <e2-toolbar-separator theme="dark"></e2-toolbar-separator>
          <e2-toolbar-button
            label="Zoom In"
            icon="🔍"
            theme="dark"
          ></e2-toolbar-button>
          <e2-toolbar-button
            label="Zoom Out"
            icon="🔍"
            theme="dark"
          ></e2-toolbar-button>
        </e2-toolbar>
      </div>

      <div class="demo-section">
        <h2>Copy-Paste Examples</h2>
        <p>Ready-to-use code snippets for your projects:</p>

        <div class="code-example">
          <h3>Basic Toolbar HTML:</h3>
          <button class="copy-button" onclick="copyToClipboard('toolbar-html')">
            Copy
          </button>
          <pre id="toolbar-html">
&lt;!-- Load E2 Library --&gt;
&lt;script src="path/to/e2.min.js"&gt;&lt;/script&gt;

&lt;!-- Basic Toolbar --&gt;
&lt;e2-toolbar&gt;
  &lt;e2-toolbar-button label="New" icon="📄"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-button label="Open" icon="📁"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-button label="Save" icon="💾"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-separator&gt;&lt;/e2-toolbar-separator&gt;
  &lt;e2-toolbar-button label="Cut" icon="✂️"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-button label="Copy" icon="📋"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-button label="Paste" icon="📌"&gt;&lt;/e2-toolbar-button&gt;
&lt;/e2-toolbar&gt;</pre
          >
        </div>

        <div class="code-example">
          <h3>Dark Theme Toolbar:</h3>
          <button class="copy-button" onclick="copyToClipboard('toolbar-dark')">
            Copy
          </button>
          <pre id="toolbar-dark">
&lt;e2-toolbar theme="dark"&gt;
  &lt;e2-toolbar-button label="Undo" icon="↶" theme="dark"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-button label="Redo" icon="↷" theme="dark"&gt;&lt;/e2-toolbar-button&gt;
  &lt;e2-toolbar-separator theme="dark"&gt;&lt;/e2-toolbar-separator&gt;
  &lt;e2-toolbar-button label="Zoom In" icon="🔍" theme="dark"&gt;&lt;/e2-toolbar-button&gt;
&lt;/e2-toolbar&gt;</pre
          >
        </div>

        <div class="code-example">
          <h3>Toolbar Menu (Menu Bar Style):</h3>
          <button class="copy-button" onclick="copyToClipboard('toolbar-menu')">
            Copy
          </button>
          <pre id="toolbar-menu">
&lt;e2-toolbar&gt;
  &lt;e2-toolbar-menu label="File"&gt;
    &lt;e2-context-menu-item label="New" icon="📄" value="new"&gt;&lt;/e2-context-menu-item&gt;
    &lt;e2-context-menu-item label="Open" icon="📁" value="open"&gt;&lt;/e2-context-menu-item&gt;
    &lt;e2-context-menu-separator&gt;&lt;/e2-context-menu-separator&gt;
    &lt;e2-context-menu-item label="Save" icon="💾" value="save" shortcut="Ctrl+S"&gt;&lt;/e2-context-menu-item&gt;
  &lt;/e2-toolbar-menu&gt;

  &lt;e2-toolbar-menu label="Edit"&gt;
    &lt;e2-context-menu-item label="Cut" icon="✂️" value="cut" shortcut="Ctrl+X"&gt;&lt;/e2-context-menu-item&gt;
    &lt;e2-context-menu-item label="Copy" icon="📋" value="copy" shortcut="Ctrl+C"&gt;&lt;/e2-context-menu-item&gt;
    &lt;e2-context-menu-item label="Paste" icon="📌" value="paste" shortcut="Ctrl+V"&gt;&lt;/e2-context-menu-item&gt;
  &lt;/e2-toolbar-menu&gt;
&lt;/e2-toolbar&gt;</pre
          >
        </div>

        <div class="code-example">
          <h3>JavaScript Event Handling:</h3>
          <button class="copy-button" onclick="copyToClipboard('toolbar-js')">
            Copy
          </button>
          <pre id="toolbar-js">
// Listen for toolbar button clicks
document.addEventListener('toolbar-button-click', event => {
  const { buttonId, button } = event.detail;
  console.log(`Button clicked: ${buttonId}`, button);
});

// Listen for toolbar menu events
document.addEventListener('toolbar-menu-show', event => {
  const { menuId, menu } = event.detail;
  console.log(`Menu opened: ${menuId}`, menu);
});

document.addEventListener('toolbar-menu-hide', event => {
  const { menuId, menu } = event.detail;
  console.log(`Menu closed: ${menuId}`, menu);
});

// Listen for menu item clicks
document.addEventListener('context-menu-item-click', event => {
  const { itemId, value, menuId } = event.detail;
  console.log(`Menu item clicked: ${value} in menu ${menuId}`);
});

// Programmatic control
const button = document.querySelector('e2-toolbar-button');
button.active = true;
button.disabled = false;

const menu = document.querySelector('e2-toolbar-menu');
menu.open(); // Open dropdown
menu.close(); // Close dropdown</pre>
        </div>
      </div>

      <div class="demo-section">
        <h2>Output</h2>
        <p>Click buttons to see events:</p>
        <div class="output" id="toolbar-output"></div>
      </div>
    </main>

    <!-- Load the library -->
    <script src="../build/e2.min.js"></script>

    <script>
      // Add event listeners to demonstrate functionality
      const output = document.getElementById('toolbar-output');

      // Listen for toolbar button clicks
      document.addEventListener('toolbar-button-click', event => {
        const { buttonId, button } = event.detail;
        const timestamp = new Date().toLocaleTimeString();

        output.innerHTML += `
          <div>[${timestamp}] Button clicked: ${buttonId} (${
            button.label || 'no label'
          })</div>
        `;
        output.scrollTop = output.scrollHeight;
      });

      // Listen for toolbar menu events
      document.addEventListener('toolbar-menu-show', event => {
        const { menuId, menu } = event.detail;
        const timestamp = new Date().toLocaleTimeString();

        output.innerHTML += `
          <div>[${timestamp}] Menu opened: ${menuId} (${
            menu.label || 'no label'
          })</div>
        `;
        output.scrollTop = output.scrollHeight;
      });

      document.addEventListener('toolbar-menu-hide', event => {
        const { menuId, menu } = event.detail;
        const timestamp = new Date().toLocaleTimeString();

        output.innerHTML += `
          <div>[${timestamp}] Menu closed: ${menuId} (${
            menu.label || 'no label'
          })</div>
        `;
        output.scrollTop = output.scrollHeight;
      });

      // Listen for context menu item clicks (from toolbar menus)
      document.addEventListener('context-menu-item-click', event => {
        const { itemId, value, menuId } = event.detail;
        const timestamp = new Date().toLocaleTimeString();

        output.innerHTML += `
          <div>[${timestamp}] Menu item clicked: "${value || itemId}" ${menuId ? `(menu: ${menuId})` : ''}</div>
        `;
        output.scrollTop = output.scrollHeight;
      });

      // Demonstrate programmatic control
      setTimeout(() => {
        const playBtn = document.getElementById('btn-play');
        const stopBtn = document.getElementById('btn-stop');

        if (playBtn && stopBtn) {
          // Toggle states
          playBtn.active = false;
          stopBtn.removeAttribute('disabled');

          output.innerHTML += `
            <div>[${new Date().toLocaleTimeString()}] Programmatically toggled Play/Stop states</div>
          `;
        }
      }, 3000);

      // Copy to clipboard functionality
      function copyToClipboard(id) {
        const element = document.getElementById(id);
        const text = element.textContent;
        navigator.clipboard.writeText(text).then(() => {
          const button = element.previousElementSibling;
          const originalText = button.textContent;
          button.textContent = 'Copied!';
          setTimeout(() => {
            button.textContent = originalText;
          }, 2000);
        });
      }

      // Theme control
      let currentTheme = 'light';

      function setTheme(theme) {
        currentTheme = theme;
        document.body.className = theme === 'auto' ? '' : `theme-${theme}`;

        // Update theme buttons
        document.querySelectorAll('.theme-button').forEach(btn => {
          btn.classList.remove('active');
        });
        event.target.classList.add('active');

        // Apply theme to all toolbar elements
        document.querySelectorAll('e2-toolbar').forEach(toolbar => {
          toolbar.theme = theme;
        });
        document.querySelectorAll('e2-toolbar-button').forEach(button => {
          button.theme = theme;
        });
        document.querySelectorAll('e2-toolbar-menu').forEach(menu => {
          menu.theme = theme;
        });
        document.querySelectorAll('e2-context-menu').forEach(contextMenu => {
          contextMenu.theme = theme;
        });
      }

      console.log('E2 loaded:', E2);
      console.log('Version:', E2.VERSION);
    </script>
  </body>
</html>
